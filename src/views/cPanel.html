<!DOCTYPE html> 
<html lang="es" id="protectCpanel"> 
    <head> 
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- Agrega el script de Leaflet -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
        
        <!-- //fontAwosome -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
        <!-- Agrega el script de NodeGeocoder -->
        <script src="https://cdn.jsdelivr.net/npm/node-geocoder@3.29.0/dist/node-geocoder.min.js"></script>
        <!-- Agrega el script de Leaflet -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
        <!-- Agrega la biblioteca de Bootstrap -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <link href="/assets/css/main.css" rel="stylesheet">
        <link rel="stylesheet" href="assets/css/font-awesome.min.css" />
        <!-- Include jQuery and Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
        <!-- Bootstrap bundle JS (popper.js + bootstrap.js) -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">	  
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
        <script src="https://code.jquery.com/jquery-3.6.4.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI/t1QIqDE8YFUZHfb7dGB6j8f5M6EExQgA8N7gk=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"></script>
        
        <!-- Bootstrap CSS -->
        <link href="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
        <!-- CDN de Bootstrap CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
        <!-- Bootstrap JS Bundle -->
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
            <!-- Bootstrap JS y Popper.js NO MOVER DE AQUI-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
            <!-- Incluye la biblioteca Slick Carousel -->
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css"/>
        
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-beta1/css/bootstrap.min.css" rel="stylesheet">
        
        <!-- Bootstrap Icons -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
        
        <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
        
        <!-- // descargar a excel -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.16.9/xlsx.full.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.1/xlsx.full.min.js"></script>
        
        <!--REVISAR //config toast -->
        <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
        
        <!-- Incluye Bootstrap JS después de jQuery -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        
        <script src="https://cdn.ckeditor.com/ckeditor5/34.1.0/classic/ckeditor.js"></script>
        
        <!-- reiniciar  -->
        <script src="/reiniciar.js"></script>
		<link href="/css/mainCpanel.css" rel="stylesheet">
        
        <title id="titulo">usatiendafacil.com</title>
        
        <!-- Mercado Pago -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://sdk.mercadopago.com/js/v2"></script>
    </head>
    <body style="height: auto !important; background-color: #80c0ff;  justify-content:left !important; align-items: left !important;" >
        <header class="fixed-top" style="padding: 0 !important;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin: 0; width: 100%; height: 70%; background-color:#007bff; padding:0rem">
                <img id="logoUSTF" src="/images/logomtf.jpg" alt="Imagen al 20%" id="logoUTF" style="width: 10%; height: 80%; border-radius: 0.51rem; margin: 0 2rem;">
                <button style="font-size: 1rem; margin: 0 2rem;" id="desaparece5" class="btn btn-success" type="button" onclick="iniciarTienda()"><i class="fas fa-store" style="font-size: 0.71rem; padding: 0.41rem;"> Ver mi tienda</i>
                </button>
                <div style="flex-grow: 1; text-align: center; margin: 0 2rem;">
                    <h4 class="navbar-brand" style="color: white !important; margin: 0;" id="panelTitle">Panel de control</h4>
                </div>
                <button id="desaparece2" class="btn btn-danger" onclick="borrarsessionStorage(true)" style="margin: 0 2rem;"> 
                    <i class="fas fa-sign-out-alt" style="font-size: 0.71rem; padding: 0.41rem;"> Cerrar Sesión</i>
                </button>
                <button class="mobile-logout" onclick="window.location.href='/'" style="margin: 0 2rem;">
                    <i class="fas fa-times"></i>
                </button>
                <div id="aqui-va-el-boton-menu" style="margin: 0 2rem;"></div>
                <img id="desaparece3" src="/images/logoTBSnuevo.jpg" alt="Imagen al 30%" style="width: 7%; height: 60% !important; border-radius: 0.51rem; margin: 0 2rem;">
            </div>
            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    document.getElementById('panelTitle').innerHTML = `
    <h4 class="navbar-brand" style="color: white !important">
        Panel de control <br> ${dataOwner && dataOwner.ecommerceName ? dataOwner.ecommerceName : "Agrega el nombre del comercio"}
    </h4>
`;

                    ecommerceName
                    // Inyectar el botón del menú cuando la página cargue
                    const meterBTN =  document.getElementById('aqui-va-el-boton-menu')
                    if (meterBTN) {
                        meterBTN.innerHTML = `
                            <button id="aparecerMenu" id="btnMenu256" class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#sideMenu" aria-controls="sideMenu" style="font-size:2rem">
                                <i class="fas fa-bars" ></i>
                            </button>
                        `;
                    }

                    // Inyectar el contenido del menú para CELULARES
                    // Inyectar el contenido del menú para CELULARES
                    document.body.insertAdjacentHTML('beforeend', `
                        <div id="sideMenu" style="background-color:white !important; z-index:999999998;" class="offcanvas offcanvas-start d-flex flex-column align-items-center" tabindex="-1" aria-labelledby="offcanvasExampleLabel">
                            <div class="offcanvas-header">
                                <h5 class="offcanvas-title" id="offcanvasExampleLabel"></h5>
                                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close" id="closeMenuButton"></button>
                            </div>
                            <img src="${pathLogo}" alt="Logo" class="rounded-circle mx-auto d-block" style="height: 150px !important; width:150px;">
                            <div id="ecommerceName" class="mt-0 menu-title text-center">${ecommerceName}</div>
                            <ul style="background-color:white !important; border:none !important" class="nav flex-column w-100 text-center">
                                <li class="nav-item">
                                    <button class="btn btn-outline-info w-100" type="button" onclick="iniciarTienda()">Ver mi tienda</button>
                                </li>                                    
                                <li class="nav-item">
                                    <a class="nav-link active" data-bs-toggle="tab" href="#manual">M. O.</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-bs-toggle="tab" href="#home">1 Configuraciones</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-bs-toggle="tab" href="#membresias">Membresías</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-bs-toggle="tab" href="#stock">Control de stock</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-bs-toggle="tab" href="#Marketing">Marketing</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-bs-toggle="tab" href="#envios">Estados envíos</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-bs-toggle="tab" href="#stats">Ventas & Estadísticas</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-bs-toggle="tab" href="#clients">Mis clientes</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-bs-toggle="tab" href="#mess">Mensajería</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-bs-toggle="tab" href="#finans">Tus finanzas</a>
                                </li>
                                <li class="nav-item">
                                    <button class="btn btn-outline-secondary w-100" onclick="borrarsessionStorage(true)">
                                        <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
                                    </button>
                                </li>
                            </ul>
                        </div>
                    `);



                    // Cerrar el menú offcanvas al hacer clic en cualquier enlace
                    document.querySelectorAll('#sideMenu .nav-link').forEach(link => {
                        link.addEventListener('click', () => {
                            const closeButton = document.getElementById('closeMenuButton');
                            if (closeButton) {
                                closeButton.click();
                            }
                        });
                    });

                    // Mostrar el botón del menú en pantallas pequeñas
                    function updateMenuButtonVisibility() {
                        const button = document.getElementById('aparecerMenu');
                        const width = window.innerWidth;
                        if (width <= 700) {
                            button.style.display = 'block';
                        } else {
                            button.style.display = 'none';
                        }
                    }

                    // Inicializar visibilidad del botón del menú
                    updateMenuButtonVisibility();
                    window.addEventListener('resize', updateMenuButtonVisibility);

                });
            </script>
            <!-- Nav Tabs -->
            <ul id="Desaparece4" class="nav nav-tabs w-100 " style="padding:0 !important; width: 100%; margin-bottom:-1rem !important; background-color: #80c0ff; position: relative !important; justify-content: space-between;">
                <li class="nav-item">
                    <a class="nav-link active" data-bs-toggle="tab" href="#manual">M. O.</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link " data-bs-toggle="tab" href="#home">1 Configuraciones</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="tab" href="#membresias">Membresías</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="tab" href="#Marketing">Marketing</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="tab" href="#stock">Control de stock</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="tab" href="#envios" >Estados envíos</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="tab" href="#stats">Ventas & Estadísticas</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="tab" href="#clients">Mis clientes</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="tab" href="#mess">Mensajería</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="tab" href="#finans">Tus finanzas</a>
                </li>
            </ul>
        </header>
        <style>
                /* Contenido desplazable */
                .scrollable-content {
                    margin-top: 60px; /* Ajusta esto a la altura del contenido fijo para evitar que quede cubierto */
                    padding: 10px; /* Espaciado interno (opcional) */
                }
                .tab-content {
                    border-top:  white !important; /* Fondo amarillo claro */
                }
                .nav-tabs {
                    width:1000px;
                    height:54px;
                    border-bottom:  white; /* Fondo amarillo claro */
                }
                .nav-tabs .nav-link {
                    background-color: #007bff; /* Fondo azul */
                    color:  white; /* Fondo amarillo claro */
                    margin: 2px;
                    transition: background-color 0.3s ease, color 0.3s ease;
                }
        
                .nav-tabs .nav-link.active {
                    background-color:  white; /* Fondo amarillo claro */
                    color: #3659f4; /* Color del texto */
                    transform: scale(1.07); /* Aumenta el tamaño en un 10% */
                    font-weight: bold; /* Letra en negrita */
                    margin:0 -5px !important;
                    z-index: 9999;
                    transition: margin, font-weight 05s ease;
                }

                .nav-tabs .nav-link:hover {
                    background-color: #fbf416; /* Fondo amarillo claro */
                    color: #3659f4; /* Color del texto */
                    transform: scale(1.1); /* Aumenta el tamaño en un 10% */
                    transition: background-color 1.5s ease, color 1.5s ease, transform 1.5s ease;
                }

                    /* CSS para el botón del menú */
                    #aparecerMenu {
                        display: none; /* Oculta el botón por defecto */
                    }
                
                    /* CSS para el menú offcanvas */
                    .offcanvas {
                        width: 90% !important;
                        background-color: #fff;
                        overflow-y: auto; /* Habilita el scroll vertical */
                        z-index: 1055555555555555550; /* Asegura que el menú esté por encima de otros elementos */
                    }
                
                    .offcanvas .btn-close {
                        color: black; /* Cambia el color del botón de cerrar a negro */
                    }
                
                    /* Imagen circular en el menú */
                    .offcanvas img {
                        width: 100px; /* Imagen circular de 100x100 px */
                        height: 100px;
                        border-radius: 50%; /* Hace la imagen circular */
                        margin-bottom: 20px;
                    }
                
                    /* Título del menú */
                    .menu-title {
                        margin-bottom: 20px;
                        text-align: center;
                        font-size: 16px;
                        font-weight: bold;
                    }
                
                    /* Estilos para los botones en el menú */
                    .store-button, .logout-button {
                        width: 15%;
                        text-align: center;
                        cursor: pointer;
                    }
                
                    /* Estilos para el menú de navegación */
                    .offcanvas .nav {
                        padding: 0;
                    }
                
                    .offcanvas .nav-item {
                        margin-bottom: 10px;
                    }
                
                    .offcanvas .nav-link {
                        display: block;
                        width: 100%;
                        padding: 10px;
                        text-align: center;
                        text-decoration: none;
                        color: inherit;
                    }
                
            .offcanvas .nav-link:hover,
            .store-button:hover,
            .logout-button:hover {
                background-color: #f1f1f1; /* Color de fondo al hacer hover */
                color: #333; /* Color del texto al hacer hover */
                font-weight: bold; /* Negrita */
                font-size: 110%; /* Incremento del tamaño de la fuente en 10% */
                text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3); /* Sombra para efecto 3D */
                transition: all 0.3s ease-in-out; /* Suaviza la transición */
            }

            .offcanvas .nav-link:active,
            .store-button:active,
            .logout-button:active {
                background-color: orange; /* Color de fondo naranja al hacer clic */
                transform: scale(0.95); /* Reducir tamaño a 95% (achicar 5%) */
                transition: all 0.1s ease-in-out; /* Transición rápida para el clic */
            }

    
        /* Estilo del botón de cerrar sesión */
        .logout-button {
            margin-top: 20px;
            padding: 10px;
            border-radius: 0.51rem;
            border: none;
            background: none;
        }
    

        .card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.card:hover {
    transform: translateY(-5px); /* Mueve la tarjeta ligeramente hacia arriba */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Añade una sombra más prominente */
}

        </style>
        <!-- menu principal -->
        <div class="scrollable-content" style="position: relative !important; padding-top:4rem; ">
            <!-- Tab Content -->
            <div class="tab-content w-100" >
                <script>
                    // busca todas las ventas realizadas
                    let ventas = dataOwner.Ventas.map(v => v.dataCompra);
                    // busca los informes diarios automaticamente
                    (async () => {
                        await RefreshactualizarData();
                        await renderizarInfoDiario(idOwner)
                    })();
                </script>
                <!-- Manual de Operaciones -->
                <div id="manual" class="tab-pane active" align="center">
                    <div align="center">
                        <div align="center" style="display: flex; flex-direction: column; align-items: center;">
                            <img src="/images/logomtf.jpg" class="mb-0 responsive-image" id="logoImage" alt="Logo">
                            <button class="mt-4 mb-6 btn btn-outline-light" onclick="renderizarInfoDiario(idOwner, {mostrarInfo:true})">Ver informe</button>
                            <br>
                            <div id="titMO">
                                <p style="margin-top: -2rem !important;">Manual operativo</p>
                            </div>
                        </div>
                        <style>
                            #titMO {
                                margin: 0rem ;
                                width: 100% ;
                                font-size: 3rem ;
                                font-weight: bold ;
                            }
                            .responsive-image {
                                margin: 1.5rem 0 0 0;
                                width: 100%;
                                max-width: 850px; /* Ajusta el tamaño máximo según tus necesidades */
                                height: auto; /* Mantiene la proporción de la imagen */
                                border-radius: 1rem;
                            }
                        </style>
                        <script>
                            // Asegurarse de que el contenido esté completamente cargado antes de hacer el scroll
                            window.onload = function() {
                                const logoImage = document.getElementById('logoImage');
                                // Scroll al elemento centrado en la pantalla
                                logoImage.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            };
                        </script>
                        <style>
                            .menuA1B2C3 {
                                width: 800px;
                                margin: 0 auto;
                                background-color: transparent;
                                border-radius: 8px;
                                padding: 15px;
                                text-align: center;
                                font-size:2rem
                            }

                            .menuItemA1B2C3 {
                                background-color: transparent;
                                border: 1px solid #ccc;
                                margin-bottom: 10px;
                                border-radius: 5px;
                                cursor: pointer;
                                padding: 10px;
                                transition: background-color 0.3s ease;
                            }

                            .menuItemA1B2C3:hover {
                                background-color: rgba(0, 0, 0, 0.05);
                            }

                            .menuTitleA1B2C3 {
                                font-size: 1.2em;
                                font-weight: bold;
                            }

                            .menuContentA1B2C3 {
                                text-align: left;
                                width: auto;
                                max-height: 0;
                                margin-top: 10px;
                                padding: 0 10px;
                                background-color: transparent;
                                border: none;
                                border-radius: 5px;
                                overflow: hidden;
                                transition: max-height 2s ease, padding 2s ease;
                            }
                        </style>
                        <div class="menuA1B2C3">
                            <div class="menuItemA1B2C3" onclick="toggleContent(this)">
                                <div class="menuTitleA1B2C3">Configuración</div>
                                <div class="menuContentA1B2C3">[Texto aleatorio de 500 palabras]</div>
                            </div>

                            <div class="menuItemA1B2C3" onclick="toggleContent(this)">
                                <div class="menuTitleA1B2C3">Marketing</div>
                                <div class="menuContentA1B2C3">[Texto aleatorio de 500 palabras]</div>
                            </div>

                            <div class="menuItemA1B2C3" onclick="toggleContent(this)">
                                <div class="menuTitleA1B2C3">Estado de Envios</div>
                                <div class="menuContentA1B2C3">[Texto aleatorio de 500 palabras]</div>
                            </div>

                            <div class="menuItemA1B2C3" onclick="toggleContent(this)">
                                <div class="menuTitleA1B2C3">Control de Stock</div>
                                <div class="menuContentA1B2C3">[Texto aleatorio de 500 palabras]</div>
                            </div>

                            <div class="menuItemA1B2C3" onclick="toggleContent(this)">
                                <div class="menuTitleA1B2C3">Venta & Estadística</div>
                                <div class="menuContentA1B2C3">[Texto aleatorio de 500 palabras]</div>
                            </div>

                            <div class="menuItemA1B2C3" onclick="toggleContent(this)">
                                <div class="menuTitleA1B2C3">Mensajería</div>
                                <div class="menuContentA1B2C3">[Texto aleatorio de 500 palabras]</div>
                            </div>

                            <div class="menuItemA1B2C3" onclick="toggleContent(this)">
                                <div class="menuTitleA1B2C3">Mis Finanzas</div>
                                <div class="menuContentA1B2C3">[Texto aleatorio de 500 palabras]</div>
                            </div>
                        </div>
                        <script>
                            function toggleContent(element) {
                                const content = element.querySelector('.menuContentA1B2C3');
                                if (content.style.maxHeight === '0px' || !content.style.maxHeight) {
                                    content.style.maxHeight = content.scrollHeight + 'px';
                                    content.style.padding = '10px';
                                } else {
                                    content.style.maxHeight = '0px';
                                    content.style.padding = '0 10px';
                                }
                            }
                        </script>
                    </div>
                </div>
                <!-- Configuraciones -->
                <div id="home" class="tab-pane container-xxl w-100 m-0 p-1" align="center">
                    <!-- Sub Nav Tabs --><br><br>
                    <h2 id="bajarTituConfig" align="center">Configura tu tienda</h2>
                    <br>
                    <ul id="ulConfig" class="nav nav-tabs container-xxl w-100 m-0 p-0" >
                        <li class="nav-item">
                            <a class="nav-link active" data-bs-toggle="tab" href="#generalSettings">1 Datos generales</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" href="#productos">2 Productos</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" href="#userSettings">3 Diseño</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" href="#quienesSomos">4 Quienes somos</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" href="#advancedSettings">Medios de envíos</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" href="#securitySettings">Redes sociales</a>
                        </li>
                        <li class="nav-item" hidden>
                            <a class="nav-link" data-bs-toggle="tab" href="#notificationSettings">Pasarelas de cobros</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" href="#nosotres">usatiendafacil.com</a>
                        </li>
                    </ul>
                    <!-- Sub Tab Content -->
                    <div id="tabConfig" class=" container-xxl tab-content mx-1 w-100" style="position: relative !important;" align="center">
                        <!-- Datos generales del dataOwner-->
                        <div id="generalSettings" class="container-xxl tab-pane active" align="center">
                            <div id="dataUsuario" class="r">
                                <style>
                                    .card {
                                        background-color: transparent;
                                        width: 100% !important;
                                    }
                            
                                    .image-section {
                                        flex: 1 1 50px;
                                        display: flex;
                                        flex-direction: column;
                                        align-items: center;
                                    }
                            
                                    .image-section img {
                                        margin: 1px;
                                        width: 200px;
                                        height: 200px;
                                        border-radius: 50%;
                                        object-fit: cover;
                                    }
                            
                                    .info-section {
                                        flex: 1 1 150px;
                                    }
                                </style>
                                <div class="container-xxl mt-4">
                                    <div class="header" id="datosDueno22">
                                        <h5 class="modal-title" id="modalActiveLabel">Datos Generales</h5>
                                    </div>
                            
                                    <!-- modal de datos del usuario -->
                                    <div class="row text-left">
                                        <!-- Columna para la información del usuario -->
                                        <div class="col-lg-10 col-md-8 col-sm-12 mx-auto my-2" id="ownerInfo">
                                            <div class="card p-4" id="ownerInfoName">
                                                <h5>Buscando tus datos</h5>
                                                <div class="spinner-border text-info" role="status">
                                                    <span class="visually-hidden">Loading...</span>
                                                </div>
                                            </div>
                                        </div>
                            
                                        <!-- Columna para cambiar contraseña -->
                                        <div class="col-lg-4 col-md-4 col-sm-12 mx-auto my-1" >
                                            <div class="card p-4" style="height: auto !important">
                                                <div id="passwordCpanel">
                                                    <h5>Buscando tu contraseña</h5>
                                                    <div class="spinner-border text-info" role="status">
                                                        <span class="visually-hidden">Loading...</span>
                                                    </div>
                                                </div>
                                                <div>
                                                    <label for="changePassword" class="form-label text-dark">Cambiar Contraseña</label>
                                                    <div class="password-container position-relative" style="width: calc(100% - 24px);">
                                                        <input type="password" class="form-control" id="changePassword" placeholder="Nueva Contraseña" style="color:black !important">
                                                        <span class="toggle-password" onclick="togglePassword('changePassword')" style="position: absolute; top: 50%; right: 10px; transform: translateY(-50%); cursor: pointer;">&#128065;</span>
                                                    </div>
                                                    <label for="confirmPassword" class="form-label text-dark">Confirmar nueva contraseña</label>
                                                    <div class="password-container position-relative" style="width: calc(100% - 24px);">
                                                        <input type="password" class="form-control" id="changeConfirmPassword" placeholder="Confirmar Contraseña" style="color:black !important">
                                                        <span class="toggle-password" onclick="togglePassword('changeConfirmPassword')" style="position: absolute; top: 50%; right: 10px; transform: translateY(-50%); cursor: pointer;">&#128065;</span>
                                                    </div>
                                                    <br>
                                                    <button type="button" class="btn-block btn-primary" id="changePass">Cambiar</button>
                                                </div>
                                            </div>
                                        </div>
                            
                                        <!-- Columna para actualizar número de celular -->
                                        <div class="col-lg-4 col-md-4 col-sm-12 mx-auto my-1">
                                            <div class="card p-4">
                                                <i id="numCeluOwner">
                                                    <h5>Buscando tu número celular</h5>
                                                    <div class="spinner-border text-info" role="status">
                                                        <span class="visually-hidden">Loading...</span>
                                                    </div>
                                                    <label class="form-label text-dark">Elige lo que deseas hacer</label>
                                                </i>
                                                <select class="form-control" id="numerosCelulares" style="color: black !important;">
                                                    <optgroup id="insertaNumCelOwner">
                                                        <option value="">Ver mis números y opciones</option>
                                                        <option value="">Elije el número para modificar/eliminar</option>
                                                    </optgroup>
                                                </select>
                                                <label class="form-label text-dark">Abajo usar para agregar o cambiar</label>
                                                <input type="number" class="form-control" id="confirmCel" placeholder="Agregar o cambiar número" style="margin-top: 0rem;">
                                                <br>
                                                <button type="button" class="btn btn-primary" id="btnUpdateCelus">Agregar/Eliminar/Cambiar</button>
                                                <br>
                                                <a href="#" data-bs-toggle="modal" data-bs-target="#instruccionesUdpated">Instrucciones de uso</a>
                                            </div>
                                        </div>
                            
                                        <!-- Columna para actualizar Email -->
                                        <div class="col-lg-4 col-md-4 col-sm-12 mx-auto my-1 ">
                                            <div class="card p-4">
                                                <i id="emailCli">
                                                    <h5>Buscando tu Email</h5>
                                                    <div class="spinner-border text-info" role="status">
                                                        <span class="visually-hidden">Loading...</span>
                                                    </div>
                                                    <label class="form-label text-dark">Elige lo que deseas hacer</label>
                                                </i>
                                                <select class="form-control" id="Emailsss" style="color: black !important;">
                                                    <optgroup id="insertaEmails">
                                                        <option value="">Ver mis Emails y opciones</option>
                                                        <option><strong>Elije el Email para modificar/eliminar</strong></option>
                                                    </optgroup>
                                                </select>
                                                <label class="form-label text-dark">Abajo usar para agregar o cambiar</label>
                                                <input type="text" class="form-control" id="confirmEmail" placeholder="Agregar o cambiar Email" style="margin-top: 0rem;">
                                                <br>
                                                <button type="button" class="btn btn-primary" id="btnUpdateEmail">Agregar/Eliminar/Cambiar</button>
                                                <a href="#" data-bs-toggle="modal" data-bs-target="#instruccionesUdpated">Instrucciones de uso</a>
                                            </div>
                                        </div>
                                    </div>
                            
                                    <!-- Direcciones registradas -->
                                    <div class="container-fluid text-center">
                                        <button type="button" class="btn-block btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModalToggle">Agrega tus direcciones</button>
                                        <h5>Direcciones Registradas:</h5>
                            
                                        <div id="DireccionesResgistaradas">
                                            <h5>Buscando tus direcciones</h5>
                                            <div class="spinner-border text-info" role="status">
                                                <span class="visually-hidden">Loading...</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Productos -->
                        <div id="productos" class="tab-pane fade container-xxl">
                            <div align="center">
                                <br>
                                <h3 >Configuremos tus productos/servicios</h3>
                                <p id="prodXMen">Tu membresía te permite ingresar un máximo de </p>
                            </div>
                            <!-- Sub Nav Tabs -->
                            <ul class="nav nav-tabs container-xxl ml-0 " align="left">
                                <li class="nav-item">
                                    <a class="nav-link active" data-bs-toggle="tab" href="#tusProductos22369">Mis Productos</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link " data-bs-toggle="tab" href="#agregarProductos">Agregar Productos</a>
                                </li>
                            </ul>
                            <!-- Sub Tab Content -->
                            <div class="tab-content container-xxl w-100" align="center">
                                <!-- // Inicializa el objeto cantImgXMem -->
                                <script>
                                    const cantImgXMem = {};
                                    const dataGrl = JSON.parse(sessionStorage.getItem("datosBasicos"));
                                    const {cantImgXMemBasic, cantImgXMemPremium} = dataGrl.data.ConfigsOne[0]

                                    function actualizarMensajeMembresia(dataOwner) {
                                        const prodXMen = document.getElementById("prodXMen");
                                
                                        if (dataOwner.tipoMembresia === "basic") {
                                            prodXMen.textContent = `Tu membresía te permite ingresar un máximo de ${cantImgXMemBasic} imágenes por producto.`;
                                            cantImgXMem.cantidad = cantImgXMemBasic;
                                        } else if (dataOwner.tipoMembresia === "premium") {
                                            prodXMen.textContent = `Tu membresía te permite ingresar un máximo de ${cantImgXMemPremium} imágenes por producto.`;
                                            cantImgXMem.cantidad = cantImgXMemPremium;
                                        } else {
                                            prodXMen.textContent = "Membresía no reconocida.";
                                            cantImgXMem.cantidad = 0;
                                        }
                                    }                                    
                                    actualizarMensajeMembresia(dataOwner);
                                </script>
                                <!-- aqui se incertan los productos-->
                                <div id="cantProd" style="margin: 0.5rem !important"></div>
                                <div id="tusProductos22369" class="container-xxl w-100 tab-pane active m-0" style="">
                                    <!-- Input y elementos para la búsqueda -->
                                    <div align="center" 
                                        style="display: flex; 
                                        align-items: center; 
                                        justify-content: space-between; 
                                        width: 100%;"
                                    >
                                        <div class="d-flex align-items-center">
                                            <!-- Input de búsqueda -->
                                            <div style="width: 50%; margin-right: 1rem;">
                                                <input 
                                                    placeholder="Buscar producto" 
                                                    type="text" 
                                                    id="buscarProductoInput2" 
                                                    oninput="mostrarProductos()" 
                                                    style="width: 100%; height: 100%;" 
                                                    autocomplete="off"
                                                >
                                            </div>
                                        
                                            <!-- Botón de búsqueda -->
                                            <div style="margin-right: 1rem;">
                                                <a 
                                                    id="buscador544589" 
                                                    class="fas fa-search" 
                                                    onclick="buscarProducto()" 
                                                    style="font-size: 1.5rem; cursor: pointer;"
                                                ></a>
                                            </div>
                                        
                                            <!-- Texto descriptivo -->
                                            <div style="margin-right: 2rem; width: 100% !important">
                                                <p>Busca los productos por nombre o por su código</p>
                                            </div>
                                        
                                            <!-- Select que actuará como un modal para mostrar los productos encontrados -->
                                            <select 
                                                id="productosEncontrados2" 
                                                size="5" 
                                                onchange="seleccionarProducto()" 
                                                style="width: 170px; height: 100px; color: white; display: none; position: absolute; z-index: 9999999999; margin: auto;"
                                            ></select>
                                        </div>
                                    </div>
                                    <!-- función para filtrar los productos desde el buscador -->
                                    <script>
                                        // Obtener el elemento con el ID 'cantProd'
                                        const cantProd56 = document.getElementById('cantProd');
                                        const newText = document.createElement('span');
                                        
                                        // Comprobar si hay productos en ownerProducts
                                        if (ownerProducts.length >= 1) {
                                            newText.innerHTML = `<h5 style="margin: 0 0 0 -2rem">Actualmente tienes ${ownerProducts.length} productos</h5>`;
                                        } else {
                                            newText.innerHTML = `<br><h4>Actualmente NO tienes productos, agrega alguno.</h4>`;
                                        }
                                        
                                        // Insertar el nuevo nodo de texto antes del div 'cantProd'
                                        cantProd56.parentNode.insertBefore(newText, cantProd56);

                                        // Función para mostrar los productos filtrados
                                        function mostrarProductos() {
                                            const inputValor = document.getElementById('buscarProductoInput2').value.toLowerCase();
                                            const selectProductos = document.getElementById('productosEncontrados2');
                                            
                                            // Verificar si hay productos disponibles
                                            if (ownerProducts.length >= 1) {
                                                selectProductos.innerHTML = '';

                                                // Filtrar productos por nombre o código
                                                const productosFiltrados = ownerProducts.filter(producto => 
                                                    (typeof producto.nombreProducto === 'string' && producto.nombreProducto.toLowerCase().includes(inputValor)) ||
                                                    (typeof producto.codProd === 'string' && producto.codProd.toLowerCase().includes(inputValor))
                                                );

                                                // Mostrar productos filtrados en el select
                                                productosFiltrados.forEach(producto => {
                                                    const option = document.createElement('option');
                                                    option.text = producto.nombreProducto;
                                                    option.style.color = 'red'; // Color rojo para las opciones
                                                    selectProductos.add(option);
                                                });

                                                // Mostrar el select solo si hay productos filtrados y si hay texto en el input
                                                if (productosFiltrados.length > 0 && inputValor.length > 0) {
                                                    selectProductos.style.display = 'block';
                                                    selectProductos.style.position = 'absolute';
                                                    
                                                    const inputElement = document.getElementById('buscarProductoInput2');
                                                    selectProductos.style.top = `${inputElement.offsetTop + inputElement.offsetHeight + 10}px`; // Aparece 10px debajo del input
                                                    selectProductos.style.left = `${inputElement.offsetLeft}px`; // Alinear con el input
                                                } else {
                                                    selectProductos.style.display = 'none';
                                                }
                                            } else {
                                                selectProductos.innerHTML = `<h4>Actualmente NO tienes productos.<br><br>Ingresa en la solapa "Agregar Productos" y agrega al menos uno.</h4>`;
                                            }

                                            // Escuchar el evento de teclado para ocultar el select cuando se presiona la tecla Esc
                                            document.addEventListener('keydown', function(event) {
                                                if (event.key === 'Escape') {
                                                    selectProductos.style.display = 'none';
                                                }
                                            });

                                            // Ocultar el select al hacer clic fuera del input o del select
                                            document.addEventListener('click', function(event) {
                                                const inputElement = document.getElementById('buscarProductoInput2');
                                                if (!inputElement.contains(event.target) && !selectProductos.contains(event.target)) {
                                                    selectProductos.style.display = 'none';
                                                }
                                            });
                                        }

                                        // Función para seleccionar un producto del select
                                        function seleccionarProducto() {
                                            const selectedOption = document.getElementById('productosEncontrados2').value;
                                            document.getElementById('buscarProductoInput2').value = selectedOption;
                                            buscarProducto();
                                        }

                                        // Función para buscar y desplazar al producto seleccionado
                                        function buscarProducto() {
                                            const valorInput = document.getElementById('buscarProductoInput2').value;
                                            if (!valorInput) {
                                                mostrarAlerta('Ingrese un producto válido');
                                                return;
                                            }

                                            // Seleccionar todos los elementos que podrían contener el texto
                                            const elementos = document.querySelectorAll('h4');
                                            
                                            // Encontrar el primer elemento cuyo contenido de texto coincide con 'valorInput'
                                            const elementoProducto = Array.from(elementos).find(element => element.textContent.includes(valorInput));

                                            if (elementoProducto) {
                                                // Obtener la posición del elemento y desplazar la ventana suavemente
                                                elementoProducto.scrollIntoView({ behavior: 'smooth', block: 'start' });
                                            } else {
                                                mostrarAlerta('Producto no encontrado');
                                            }

                                            // Ocultar el select después de seleccionar un producto
                                            document.getElementById('productosEncontrados2').style.display = 'none';
                                        }
                                    </script>
                                    <div id="tusProductos" style="border-radius: 2rem;">
                                        <br>
                                        <h4>Mis Productos</h4>
                                        <p>Buscando tus productos.</p>
                                        <div class="spinner-border text-info" role="status">
                                            <span class="visually-hidden">Loading...</span>
                                        </div>
                                    </div>
                                </div>
                                <!-- agrega todos los productos los select de categorías y productos están aquí -->
                                <div id="agregarProductos" class="container-xxl w-100 tab-pane fade w-100 p-0" align="center">
                                    <div class="tab-content mt-3 container-xxl w-100 m-0 p-0" align="center">
                                        <div class="p-0 m-0 container-xxl w-100" id="opcion4" align="center">
                                            <div align="center" class="container-xxl w-100 m-0 p-0">
                                                <style>
                                                    #file-list {
                                                        list-style-type: none;
                                                        padding: 0;
                                                        display: flex;
                                                        flex-wrap: wrap;
                                                        color: black !important;
                                                    }
                        
                                                    .file-item {
                                                        margin: 5px;
                                                        padding: 5px;
                                                        border: 1px solid #ccc;
                                                        position: relative;
                                                        color: black !important;
                                                    }
                        
                                                    .delete-icon {
                                                        position: absolute;
                                                        top: 0;
                                                        right: 0;
                                                        cursor: pointer;
                                                        font-size: 12px;
                                                        color: red;
                                                    }
                        
                                                    #first-file {
                                                        margin-top: 10px;
                                                        color: black !important;
                                                    }
                        
                                                    .form-group {
                                                        display: flex;
                                                        justify-content: space-between;
                                                        align-items: center;
                                                    }
                        
                                                    .quantity,
                                                    .price,
                                                    .currency {
                                                        margin-right: 10px; /* Espacio entre los elementos */
                                                    }
                                                </style>
                                                <form id="file-form" align="center" class="container-xxl w-100 m-2">
                                                    <input type="text" name="id" value="{{userId}}" hidden>
                                                    <style>
                                                        #drop-area {
                                                            height: auto;
                                                            width: auto;
                                                            border: 3px dashed #ccc;
                                                            background-color: #b5b4b4;
                                                            padding: 20px;
                                                            text-align: center;
                                                            cursor: pointer;
                                                            flex-wrap: wrap;
                                                            justify-content: center;
                                                            align-items: center;
                                                            overflow: auto;
                                                        }
                                                        .file-item {
                                                            margin: 10px;
                                                            position: relative;
                                                            flex: 0 0 auto;
                                                        }
                                                        .file-item img {
                                                            max-width: 100%;
                                                            height: auto;
                                                        }
                                                        .delete-icon {
                                                            position: absolute;
                                                            top: 5px;
                                                            right: 5px;
                                                            cursor: pointer;
                                                            background-color: rgba(255, 255, 255, 0.7);
                                                            border-radius: 50%;
                                                            padding: 2px 5px;
                                                        }
                                                        @media (max-width: 768px) {
                                                            .file-item {
                                                                margin: 10px 0;
                                                                width: 100%;
                                                            }
                                                        }
                                                    </style>
                                                    <!-- arrastrar y poner las fotos aquí -->
                                                    <div align="center" class="m-2">
                                                        <div id="drop-area" ondrop="dropHandler(event)" ondragover="dragOverHandler(event)">
                                                            <div>
                                                                <h5>Arrastra y suelta imágenes aquí. <br> (La primera imagen es la portada, solo formatos Gift, JPG, PNG, JPEG, WEBP, max 1mb c/u.)</h5>
                                                                <input type="file" id="file-input" name="archivos" multiple style="display:none;" onchange="handleFiles(this.files)" />
                                                                <div id="file-list"></div>
                                                                <div id="first-file"></div>
                                                                <p>Las imágenes se muestran en tu tienda en el orden tal como se muestran aquí.</p>
                                                            </div>
                                                            <br>
                                                        </div>
                                                        <button class="btn btn-primary"  type="button" onclick="browseFiles()">Seleccionar Archivos</button>
                                                    </div>
                                                    <!-- elije el diseño de las tarjetas de los productos -->
                                                    <div class="container-xxl mt-2 w-100">
                                                        <p class="alert alert-info">
                                                            Elije el formato de tarjeta para mostrar tu producto que más te guste. <br>
                                                            Para que se vean mejor tus productos, elije el mismo formato por categoría.
                                                        </p>
                                                        <div class="row w-100">
                                                            <!-- Tarjeta 1 -->
                                                            <div class="col-lg-4 col-md-4 mb-2">
                                                                <div class="card">
                                                                    <div class="card-header">
                                                                        Tarjeta horizontal Vintage
                                                                    </div>
                                                                    <div class="card-body">
                                                                        <img src="/images/ejemploHorizontal.jpg" class="card-img-top" alt="Imagen del producto 1" style="max-width: 300px; height: 300px;">
                                                                    </div>
                                                                    <div class="card-footer d-flex justify-content-between align-items-center">
                                                                        <label class="form-check-label" for="switch1ABC">On/Off</label>
                                                                        <div class="form-check form-switch">
                                                                            <input class="form-check-input" type="checkbox" role="switch" id="switch1ABC" onchange="handleSwitchABC('cardProdHor', this)">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <!-- Tarjeta 2 -->
                                                            <div class="col-lg-4 col-md-4 mb-2">
                                                                <div class="card">
                                                                    <div class="card-header">
                                                                        Tarjeta Vertical Vintage
                                                                    </div>
                                                                    <div class="card-body">
                                                                        <img src="/images/ejemploVertical.jpg" class="card-img-top" alt="Imagen del producto 2" style="max-width: 300px; height: 300px;">
                                                                    </div>
                                                                    <div class="card-footer d-flex justify-content-between align-items-center">
                                                                        <label class="form-check-label" for="switch2ABC">On/Off</label>
                                                                        <div class="form-check form-switch">
                                                                            <input class="form-check-input" type="checkbox" role="switch" id="switch2ABC" onchange="handleSwitchABC('cardProdVert', this)">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <!-- Tarjeta 3 -->
                                                            <div class="col-lg-4 col-md-4 my-2" style="margin-top:-0.5rem !important">
                                                                <div class="card">
                                                                    <div class="card-header">
                                                                        Tarjeta Cristal Edition
                                                                    </div>
                                                                    <div class="card-body">
                                                                        <img src="/images/ejemploCristal.jpg" class="card-img-top" alt="Imagen del producto 3" style="max-width: 300px; height: 300px;">
                                                                    </div>
                                                                    <div class="card-footer d-flex justify-content-between align-items-center">
                                                                        <label class="form-check-label" for="switch3ABC">On/Off</label>
                                                                        <div class="form-check form-switch">
                                                                            <input class="form-check-input" type="checkbox" role="switch" id="switch3ABC" onchange="handleSwitchABC('cardProdTra', this)">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <script>
                                                        // Objeto que contiene la opción seleccionada
                                                        let tipoTarjeta = {
                                                            cardProdHor: false,
                                                            cardProdVert: false,
                                                            cardProdTra: false
                                                        };
                                                    
                                                        // Función para manejar el switch
                                                        function handleSwitchABC(tipoABC, elementABC) {
                                                            // Apagar todos los switches excepto el seleccionado
                                                            const switchesABC = ['switch1ABC', 'switch2ABC', 'switch3ABC'];
                                                            switchesABC.forEach(switchIdABC => {
                                                                if (switchIdABC !== elementABC.id) {
                                                                    document.getElementById(switchIdABC).checked = false;
                                                                }
                                                            });
                                                    
                                                            // Actualizar el objeto tipoTarjeta
                                                            tipoTarjeta = {
                                                                cardProdHor: false,
                                                                cardProdVert: false,
                                                                cardProdTra: false
                                                            };
                                                    
                                                            // Encender solo el switch seleccionado en el objeto
                                                            tipoTarjeta[tipoABC] = elementABC.checked;
                                                    
                                                            // Mostrar el resultado en la consola
                                                            console.log("Tipo de tarjeta seleccionada:", tipoTarjeta);
                                                        }
                                                    </script>
                                                    <!-- animaciones de cantidad -->
                                                    <div class="container">
                                                        <div class="form-check form-switch">
                                                            <input class="form-check-input" type="checkbox" id="animOK1" name="animOK" value="true" style="transform: scale(2);">
                                                            <br>
                                                            <label class="form-check-label mt-2" id="labelAnimOK" for="animOK1"><strong>Activar animaciones en cantidad de productos. (Solo para tarjetas Vintage)</strong></label>
                                                        </div>
                                                        <script>
                                                            document.getElementById('animOK1').addEventListener('change', function() {
                                                                this.value = this.checked ? "true" : "false"; // Cambiar valor según el estado
                                                                const label = document.getElementById('labelAnimOK');
                                                                label.innerHTML = this.checked ? "<strong>Animaciones activadas</strong>" : "<strong>Animaciones desactivadas</strong>";
                                                                console.log(this.checked ? "Animaciones activadas" : "Animaciones desactivadas");
                                                            });
                                                        </script>
                                                        
                                                    </div>
                                                    <br>
                                                    <!-- agrega la informacion basica del producto -->
                                                    <div class="container-xxl">
                                                        <p>
                                                            Si no encuentras tu categoría o producto puedes agregarla seleccionando "Nueva categoría" y en "Rubro" agregas la nueva.
                                                        </p>
                                                        <!-- datos generales del producto -->
                                                        <div class="row">
                                                            <div class="col-lg-6 col-md-12 mb-3">
                                                                <div class="content-box"> <!-- Añade tu clase o contenido aquí -->
                                                                    <div class="form-floating">
                                                                        <input name="nombreProducto" type="txt" class="form-control" id="floatingPassword" placeholder="Nombre del Prod/Serv" required>
                                                                        <label for="floatingPassword" style="color:black !important">Nombre del Prod/Serv</label>
                                                                    </div>
                                                                </div>
                                                                <div class="content-box"> <!-- Añade tu clase o contenido aquí -->
                                                                    <div class="form-floating">
                                                                        <input type="text" class="form-control" id="searchInput" placeholder="Buscar categoría">
                                                                        <label for="searchInput" style="color:black !important">Primera letra para buscar categoría/producto</label>
                                                                    </div>
                                                                    <div class="form-floating">
                                                                        <select class="form-select" name="categoria" id="floatingSelect" aria-label="Floating label select example">
                                                                            <optgroup label="Buscar categoría">
                                                                                <option value="Promociones con descuentos">Busca la categoría del producto</option>
                                                                            </optgroup>
                                                                            <optgroup label="Agregar categoría">
                                                                                <option value="Nueva categoría">Nueva categoría</option>
                                                                            </optgroup>
                                                                            <optgroup label="Todo tipo de ropa">
                                                                                <option value="Pantalones Mujer">Pantalones Mujer</option>
                                                                                <option value="Pantalones Hombre">Pantalones Hombre</option>
                                                                                <option value="Pantalones Niñes">Pantalones Niñes</option>
                                                                                <option value="Super Tallajes">Super Tallajes</option>
                                                                                <option value="Camisetas Mujer">Camisetas Mujer</option>
                                                                                <option value="Camisetas Hombre">Camisetas Hombre</option>
                                                                                <option value="Camisetas Niñes">Camisetas Niñes</option>
                                                                                <option value="Vestidos">Vestidos</option>
                                                                                <option value="Faldas">Faldas</option>
                                                                                <option value="Trajes Hombre">Trajes Hombre</option>
                                                                                <option value="Trajes Mujer">Trajes Mujer</option>
                                                                                <option value="Abrigos Mujer">Abrigos Mujer</option>
                                                                                <option value="Abrigos Hombre">Abrigos Hombre</option>
                                                                                <option value="Ropa Interior Mujer">Ropa Interior Mujer</option>
                                                                                <option value="Ropa Interior Hombre">Ropa Interior Hombre</option>
                                                                                <option value="Ropa Interior Niñes">Ropa Interior Niñes</option>
                                                                                <option value="Zapatos Mujer">Zapatos Mujer</option>
                                                                                <option value="Zapatos Hombre">Zapatos Hombre</option>
                                                                                <option value="Zapatos Niñes">Zapatos Niñes</option>
                                                                                <option value="Accesorios Mujer">Accesorios Mujer</option>
                                                                                <option value="Accesorios Hombre">Accesorios Hombre</option>
                                                                                <option value="Accesorios Niñes">Accesorios Niñes</option>
                                                                            </optgroup>  
                                                                            <optgroup label="Paramotores & parapentes">
                                                                                <option value="Parapentes">Parapentes</option>
                                                                                <option value="Paramotores">Paramotores</option>
                                                                            </optgroup>
                                                                            <optgroup label="Compras en línea">
                                                                                <option value="Electrónica">Electrónica</option>
                                                                                <option value="Ropa y Moda">Ropa y Moda</option>
                                                                                <option value="Hogar y Jardín">Hogar y Jardín</option>
                                                                                <option value="Deportes">Deportes</option>
                                                                                <option value="Belleza y Cuidado Personal">Belleza y Cuidado Personal</option>
                                                                                <option value="Juguetes y Juegos">Juguetes y Juegos</option>
                                                                                <option value="Libros y Medios">Libros y Medios</option>
                                                                                <option value="Automotriz">Automotriz</option>
                                                                                <option value="Electrodomésticos">Electrodomésticos</option>
                                                                                <option value="Muebles y Decoración">Muebles y Decoración</option>
                                                                                <option value="Salud y Bienestar">Salud y Bienestar</option>
                                                                                <option value="Joyería y Accesorios">Joyería y Accesorios</option>
                                                                            </optgroup>
                                                                            <optgroup label="Productos de veterinaria y accesorios para mascotas">
                                                                                <option value="Alimentos balanceados para perros">Alimentos balanceados para perros</option>
                                                                                <option value="Alimentos balanceados para gatos">Alimentos balanceados para gatos</option>
                                                                                <option value="Snacks y premios para mascotas">Snacks y premios para mascotas</option>
                                                                                <option value="Juguetes para perros">Juguetes para perros</option>
                                                                                <option value="Juguetes para gatos">Juguetes para gatos</option>
                                                                                <option value="Ropa para mascotas">Ropa para mascotas</option>
                                                                                <option value="Camas y colchonetas para mascotas">Camas y colchonetas para mascotas</option>
                                                                                <option value="Collares y correas">Collares y correas</option>
                                                                                <option value="Transportadoras y jaulas">Transportadoras y jaulas</option>
                                                                                <option value="Artículos de higiene y cuidado">Artículos de higiene y cuidado</option>
                                                                                <option value="Productos antipulgas y garrapatas">Productos antipulgas y garrapatas</option>
                                                                                <option value="Champús y acondicionadores">Champús y acondicionadores</option>
                                                                                <option value="Cepillos y peines para mascotas">Cepillos y peines para mascotas</option>
                                                                                <option value="Accesorios para acuarios">Accesorios para acuarios</option>
                                                                                <option value="Comederos y bebederos">Comederos y bebederos</option>
                                                                                <option value="Cajas de arena y accesorios para gatos">Cajas de arena y accesorios para gatos</option>
                                                                                <option value="Herramientas de adiestramiento">Herramientas de adiestramiento</option>
                                                                                <option value="Suplementos y vitaminas para mascotas">Suplementos y vitaminas para mascotas</option>
                                                                                <option value="Artículos de viaje para mascotas">Artículos de viaje para mascotas</option>
                                                                                <!-- Aquí van más opciones -->
                                                                            </optgroup>
                                                                            <optgroup label="Útiles escolares y papelería">
                                                                                <option value="Libretas">Libretas</option>
                                                                                <option value="Cuadernos">Cuadernos</option>
                                                                                <option value="Agendas">Agendas</option>
                                                                                <option value="Bolígrafos">Bolígrafos</option>
                                                                                <option value="Lápices">Lapices</option>
                                                                                <option value="Borradores">Borradores</option>
                                                                                <option value="Marcadores">Marcadores</option>
                                                                                <option value="Reglas">Reglas</option>
                                                                                <option value="Tijeras">Tijeras</option>
                                                                                <option value="Pegamento">Pegamento</option>
                                                                                <option value="Calculadoras">Calculadoras</option>
                                                                                <option value="Mochilas">Mochilas</option>
                                                                                <option value="Estuches">Estuches</option>
                                                                                <option value="Hojas">Hojas</option>
                                                                                <option value="Papel de colores">Papel de colores</option>
                                                                                <option value="Lapices de colores">Lapices de colores</option>
                                                                                <option value="Folios">Folios</option>
                                                                                <option value="Rotuladores">Rotuladores</option>
                                                                                <option value="Cinta adhesiva">Cinta adhesiva</option>
                                                                                <option value="Gomas">Gomas</option>
                                                                                <option value="Clips">Clips</option>
                                                                                <option value="Grapas">Grapas</option>
                                                                                <option value="Fibrones">Fibrones</option>
                                                                                <option value="Carpeta">Carpeta</option>
                                                                                <option value="Archivadores">Archivadores</option>
                                                                                <option value="Portafolios">Portafolios</option>
                                                                                <option value="Papel de regalo">Papel de regalo</option>
                                                                                <option value="Sellos">Sellos</option>
                                                                                <option value="Resaltadores">Resaltadores</option>
                                                                                <option value="Subrayadores">Subrayadores</option>
                                                                                <option value="Corrector líquido">Corrector líquido</option>
                                                                                <option value="Libro de ejercicios">Libro de ejercicios</option>
                                                                                <option value="Pizarra blanca">Pizarra blanca</option>
                                                                                <option value="Borrador de pizarra">Borrador de pizarra</option>
                                                                                <option value="Papel milimetrado">Papel milimetrado</option>
                                                                                <option value="Pegatinas">Pegatinas</option>
                                                                                <option value="Cartulinas">Cartulinas</option>
                                                                                <option value="Plastilina">Plastilina</option>
                                                                                <option value="Papel de seda">Papel de seda</option>
                                                                                <option value="Papel crepé">Papel crepé</option>
                                                                                <option value="Estilógrafos">Estilógrafos</option>
                                                                                <option value="Borrador de tinta">Borrador de tinta</option>
                                                                                <option value="Sobres">Sobres</option>
                                                                                <option value="Portaminas">Portaminas</option>
                                                                                <option value="Estuche de rotuladores">Estuche de rotuladores</option>
                                                                                <option value="Compás">Compás</option>
                                                                                <option value="Set de geometría">Set de geometría</option>
                                                                                <option value="Cinta correctora">Cinta correctora</option>
                                                                                <option value="Pincel">Pincel</option>
                                                                                <option value="Marcadores permanentes">Marcadores permanentes</option>
                                                                                <option value="Papel autocopiativo">Papel autocopiativo</option>
                                                                                <option value="Papel adhesivo">Papel adhesivo</option>
                                                                                <option value="Carpetas clasificadoras">Carpetas clasificadoras</option>
                                                                                <option value="Porta documentos">Porta documentos</option>
                                                                                <option value="Bolígrafos de gel">Bolígrafos de gel</option>
                                                                                <option value="Agenda escolar">Agenda escolar</option>
                                                                                <option value="Lápices de colores acuarelables">Lápices de colores acuarelables</option>
                                                                                <option value="Rotuladores de pizarra">Rotuladores de pizarra</option>
                                                                                <option value="Plumas estilográficas">Plumas estilográficas</option>
                                                                                <option value="Carpeta de anillas">Carpeta de anillas</option>
                                                                                <option value="Bolígrafos de colores">Bolígrafos de colores</option>
                                                                                <option value="Regla flexible">Regla flexible</option>
                                                                                <option value="Clips decorativos">Clips decorativos</option>
                                                                                <option value="Set de dibujo">Set de dibujo</option>
                                                                                <option value="Caja de lápices de grafito">Caja de lápices de grafito</option>
                                                                                <option value="Rotuladores de punta fina">Rotuladores de punta fina</option>
                                                                                <option value="Tijeras de precisión">Tijeras de precisión</option>
                                                                                <option value="Papel para origami">Papel para origami</option>
                                                                                <option value="Caja de lápices de colores">Caja de lápices de colores</option>
                                                                                <option value="Marcadores fluorescentes">Marcadores fluorescentes</option>
                                                                                <option value="Papel para scrapbooking">Papel para scrapbooking</option>
                                                                                <option value="Plumas de gel">Plumas de gel</option>
                                                                                <option value="Papel milimetrado">Papel milimetrado</option>
                                                                                <option value="Caja de lápices de cera">Caja de lápices de cera</option>
                                                                                <option value="Cinta de doble cara">Cinta de doble cara</option>
                                                                                <option value="Plantillas de dibujo">Plantillas de dibujo</option>
                                                                                <option value="Borrador de pizarra">Borrador de pizarra</option>
                                                                                <option value="Rotuladores de tiza líquida">Rotuladores de tiza líquida</option>
                                                                                <option value="Estuche de bolígrafos">Estuche de bolígrafos</option>
                                                                                <option value="Rotuladores para tela">Rotuladores para tela</option>
                                                                                <option value="Cartuchos de tinta">Cartuchos de tinta</option>
                                                                                <option value="Papel pergamino">Papel pergamino</option>
                                                                            </optgroup>
                                                                            <optgroup label="Ropa y Calzado">
                                                                                <option value="Ropa de Hombre">Ropa de Hombre</option>
                                                                                <option value="Ropa de Mujer">Ropa de Mujer</option>
                                                                                <option value="Ropa de Niños">Ropa de Niños</option>
                                                                                <option value="Calzado de Hombre">Calzado de Hombre</option>
                                                                                <option value="Calzado de Mujer">Calzado de Mujer</option>
                                                                                <option value="Calzado de Niños">Calzado de Niños</option>
                                                                            </optgroup>
                                                                            <optgroup label="Accesorios">
                                                                                <option value="Bolsos y Carteras">Bolsos y Carteras</option>
                                                                                <option value="Lentes de Sol">Lentes de Sol</option>
                                                                                <option value="Relojes">Relojes</option>
                                                                                <option value="Cinturones">Cinturones</option>
                                                                                <option value="Bufandas y Pañuelos">Bufandas y Pañuelos</option>
                                                                                <option value="Gorros, Sombreros y Boinas">Gorros, Sombreros y Boinas</option>
                                                                            </optgroup>
                                                                            <optgroup label="Indumentaria Especializada">
                                                                                <option value="Uniformes">Uniformes</option>
                                                                                <option value="Disfraces">Disfraces</option>
                                                                                <option value="Ropa Deportiva">Ropa Deportiva</option>
                                                                                <option value="Trajes y Sacos">Trajes y Sacos</option>
                                                                                <option value="Vestidos de Fiesta">Vestidos de Fiesta</option>
                                                                                <option value="Ropa Íntima y de Dormir">Ropa Íntima y de Dormir</option>
                                                                            </optgroup>
                                                                            <optgroup label="Otros">
                                                                                <option value="Ropa de Maternidad">Ropa de Maternidad</option>
                                                                                <option value="Tallas Grandes">Tallas Grandes</option>
                                                                                <option value="Ropa Vintage">Ropa Vintage</option>
                                                                                <option value="Ropa de Trabajo">Ropa de Trabajo</option>
                                                                                <option value="Accesorios para la Lluvia">Accesorios para la Lluvia</option>
                                                                                <option value="Artículos de Limpieza y Cuidado de Ropa">Artículos de Limpieza y Cuidado de Ropa</option>
                                                                            </optgroup>
                                                                            <optgroup label="Lencería">
                                                                                <option value="Sujetadores">Sujetadores</option>
                                                                                <option value="Brasieres">Brasieres</option>
                                                                                <option value="Panties">Panties</option>
                                                                                <option value="Tangas">Tangas</option>
                                                                                <option value="Culottes">Culottes</option>
                                                                                <option value="Corpiños">Corpiños</option>
                                                                                <option value="Camisones">Camisones</option>
                                                                                <option value="Pijamas">Pijamas</option>
                                                                                <option value="Batolas">Batolas</option>
                                                                                <option value="Medias">Medias</option>
                                                                                <option value="Ligueros">Ligueros</option>
                                                                                <option value="Fajas">Fajas</option>
                                                                                <option value="Conjuntos de lencería">Conjuntos de lencería</option>
                                                                                <option value="Accesorios de lencería">Accesorios de lencería</option>
                                                                            </optgroup>
                                                                            <optgroup label="Trajes de baño y ropa de playa">
                                                                                <option value="Bikinis">Bikinis</option>
                                                                                <option value="Trajes de baño de una pieza">Trajes de baño de una pieza</option>
                                                                                <option value="Trikinis">Trikinis</option>
                                                                                <option value="Tankinis">Tankinis</option>
                                                                                <option value="Bañadores">Bañadores</option>
                                                                                <option value="Shorts de baño">Shorts de baño</option>
                                                                                <option value="Pareos">Pareos</option>
                                                                                <option value="Vestidos de playa">Vestidos de playa</option>
                                                                                <option value="Faldas de playa">Faldas de playa</option>
                                                                                <option value="Camisetas de playa">Camisetas de playa</option>
                                                                                <option value="Sombreros de playa">Sombreros de playa</option>
                                                                                <option value="Gafas de sol">Gafas de sol</option>
                                                                                <option value="Sandalias de playa">Sandalias de playa</option>
                                                                                <option value="Accesorios de playa">Accesorios de playa</option>
                                                                            </optgroup>
                                                                            <optgroup label="Perfumería y cuidado personal">
                                                                                <option value="Perfumes">Perfumes</option>
                                                                                <option value="Colonias">Colonias</option>
                                                                                <option value="Fragancias">Fragancias</option>
                                                                                <option value="Lociones">Lociones</option>
                                                                                <option value="Desodorantes">Desodorantes</option>
                                                                                <option value="Antitranspirantes">Antitranspirantes</option>
                                                                                <option value="Cremas hidratantes">Cremas hidratantes</option>
                                                                                <option value="Cremas antiarrugas">Cremas antiarrugas</option>
                                                                                <option value="Cremas para el cuerpo">Cremas para el cuerpo</option>
                                                                                <option value="Cremas para el rostro">Cremas para el rostro</option>
                                                                                <option value="Cremas para manos y pies">Cremas para manos y pies</option>
                                                                                <option value="Protector solar">Protector solar</option>
                                                                                <option value="Maquillaje">Maquillaje</option>
                                                                                <option value="Brochas y aplicadores de maquillaje">Brochas y aplicadores de maquillaje</option>
                                                                                <option value="Productos para el cuidado del cabello">Productos para el cuidado del cabello</option>
                                                                                <option value="Productos para el cuidado de la barba">Productos para el cuidado de la barba</option>
                                                                                <option value="Productos para el cuidado bucal">Productos para el cuidado bucal</option>
                                                                                <option value="Suplementos vitamínicos">Suplementos vitamínicos</option>
                                                                                <option value="Productos para el cuidado de la piel">Productos para el cuidado de la piel</option>
                                                                            </optgroup>
                                                                            <optgroup label="Farmacia">
                                                                                <option value="Medicamentos sin receta">Medicamentos sin receta</option>
                                                                                <option value="Analgésicos">Analgésicos</option>
                                                                                <option value="Antipiréticos">Antipiréticos</option>
                                                                                <option value="Antisépticos">Antisépticos</option>
                                                                                <option value="Antihistamínicos">Antihistamínicos</option>
                                                                                <option value="Antidiarreicos">Antidiarreicos</option>
                                                                                <option value="Antieméticos">Antieméticos</option>
                                                                                <option value="Antiácidos">Antiácidos</option>
                                                                                <option value="Antiinflamatorios">Antiinflamatorios</option>
                                                                                <option value="Antibióticos">Antibióticos</option>
                                                                                <option value="Antivirales">Antivirales</option>
                                                                                <option value="Antifúngicos">Antifúngicos</option>
                                                                                <option value="Antiparasitarios">Antiparasitarios</option>
                                                                                <option value="Anticoagulantes">Anticoagulantes</option>
                                                                                <option value="Ansiolíticos">Ansiolíticos</option>
                                                                                <option value="Antidepresivos">Antidepresivos</option>
                                                                                <option value="Anticonceptivos">Anticonceptivos</option>
                                                                                <option value="Bronceador">Bronceador</option>
                                                                                <option value="Protector Solar">Protector Solar</option>
                                                                                <option value="Condones">Condones</option>
                                                                                <option value="Hidratador post Solar">Hidratador post Solar</option>
                                                                                <option value="Productos para la salud femenina">Productos para la salud femenina</option>
                                                                                <option value="Productos para la salud masculina">Productos para la salud masculina</option>
                                                                                <option value="Productos para la salud infantil">Productos para la salud infantil</option>
                                                                                <option value="Suplementos alimenticios">Suplementos alimenticios</option>
                                                                                <option value="Productos para el cuidado de la piel">Productos para el cuidado de la piel</option>
                                                                                <option value="Productos para el cuidado del cabello">Productos para el cuidado del cabello</option>
                                                                                <option value="Productos para el cuidado bucal">Productos para el cuidado bucal</option>
                                                                                <option value="Productos para el cuidado de los ojos">Productos para el cuidado de los ojos</option>
                                                                                <option value="Pruebas de diagnóstico">Pruebas de diagnóstico</option>
                                                                                <option value="Material de curación">Material de curación</option>
                                                                                <option value="Vendajes">Vendajes</option>
                                                                                <option value="Insumos médicos">Insumos médicos</option>
                                                                                <option value="Productos para la higiene personal">Productos para la higiene personal</option>
                                                                            </optgroup>
                                                                            <optgroup label="Productos de sex shops">
                                                                                <option value="Vibradores">Vibradores</option>
                                                                                <option value="Consoladores">Consoladores</option>
                                                                                <option value="Dildos">Dildos</option>
                                                                                <option value="Bolas chinas">Bolas chinas</option>
                                                                                <option value="Anillos vibradores">Anillos vibradores</option>
                                                                                <option value="Estimuladores de clítoris">Estimuladores de clítoris</option>
                                                                                <option value="Lubricantes íntimos">Lubricantes íntimos</option>
                                                                                <option value="Aceites de masaje">Aceites de masaje</option>
                                                                                <option value="Juegos eróticos">Juegos eróticos</option>
                                                                                <option value="Lencería erótica">Lencería erótica</option>
                                                                                <option value="Cremas y geles estimulantes">Cremas y geles estimulantes</option>
                                                                                <option value="Fetiches y bondage">Fetiches y bondage</option>
                                                                                <option value="Mascaras y antifaces">Mascaras y antifaces</option>
                                                                                <option value="Esposas y ataduras">Esposas y ataduras</option>
                                                                                <option value="Plumas y látigos">Plumas y látigos</option>
                                                                                <option value="Masturbadores masculinos">Masturbadores masculinos</option>
                                                                                <option value="Muñecas inflables">Muñecas inflables</option>
                                                                                <option value="Estimuladores prostáticos">Estimuladores prostáticos</option>
                                                                                <option value="Bombas de vacío">Bombas de vacío</option>
                                                                                <option value="Juguetes anales">Juguetes anales</option>
                                                                                <!-- Aquí van más opciones -->
                                                                            </optgroup>
                                                                            <optgroup label="Productos de tatuajes">
                                                                                <option value="Tintas para tatuajes">Tintas para tatuajes</option>
                                                                                <option value="Agujas para tatuajes">Agujas para tatuajes</option>
                                                                                <option value="Máquinas para tatuar">Máquinas para tatuar</option>
                                                                                <option value="Kits de tatuaje">Kits de tatuaje</option>
                                                                                <option value="Pedales y fuentes de alimentación">Pedales y fuentes de alimentación</option>
                                                                                <option value="Grips y tubos para tatuajes">Grips y tubos para tatuajes</option>
                                                                                <option value="Papel transfer para tatuajes">Papel transfer para tatuajes</option>
                                                                                <option value="Cremas para el cuidado de tatuajes">Cremas para el cuidado de tatuajes</option>
                                                                                <option value="Stencil para tatuajes">Stencil para tatuajes</option>
                                                                                <option value="Accesorios para tatuadores">Accesorios para tatuadores</option>
                                                                                <option value="Libros y revistas de tatuajes">Libros y revistas de tatuajes</option>
                                                                                <option value="Agendas y cuadernos de diseños">Agendas y cuadernos de diseños</option>
                                                                                <option value="Productos de higiene para tatuadores">Productos de higiene para tatuadores</option>
                                                                                <option value="Guantes y protectores">Guantes y protectores</option>
                                                                                <option value="Máscaras y gafas de protección">Máscaras y gafas de protección</option>
                                                                                <option value="Mobiliario para estudios de tatuaje">Mobiliario para estudios de tatuaje</option>
                                                                                <option value="Organización de eventos de tatuajes">Organización de eventos de tatuajes</option>
                                                                                <option value="Maquillaje para cubrir tatuajes">Maquillaje para cubrir tatuajes</option>
                                                                                <option value="Piercing y joyería corporal">Piercing y joyería corporal</option>
                                                                                <option value="Productos para el cuidado de la piel">Productos para el cuidado de la piel</option>
                                                                                <option value="Material de aprendizaje de tatuajes">Material de aprendizaje de tatuajes</option>
                                                                                <option value="Vestimenta para tatuadores">Vestimenta para tatuadores</option>
                                                                                <option value="Estuches y fundas para equipos de tatuaje">Estuches y fundas para equipos de tatuaje</option>
                                                                                <option value="Láminas de diseños de tatuajes">Láminas de diseños de tatuajes</option>
                                                                                <option value="Productos de iluminación para estudios">Productos de iluminación para estudios</option>
                                                                                <option value="Cubiertas para sillas y camillas">Cubiertas para sillas y camillas</option>
                                                                                <option value="Batas y delantales para tatuadores">Batas y delantales para tatuadores</option>
                                                                                <option value="Bandejas y soportes para tatuajes">Bandejas y soportes para tatuajes</option>
                                                                                <option value="Packs de limpieza e higiene">Packs de limpieza e higiene</option>
                                                                                <option value="Protectores solares para tatuajes">Protectores solares para tatuajes</option>
                                                                                <option value="Productos de cicatrización para tatuajes">Productos de cicatrización para tatuajes</option>
                                                                                <option value="Piercing y tatuajes temporales">Piercing y tatuajes temporales</option>
                                                                                <option value="Productos de limpieza de materiales">Productos de limpieza de materiales</option>
                                                                                <option value="Pegatinas y decoraciones para tatuajes">Pegatinas y decoraciones para tatuajes</option>
                                                                                <option value="Productos para el cuidado del equipo de tatuaje">Productos para el cuidado del equipo de tatuaje</option>
                                                                                <option value="Láminas de calcomanías para tatuajes">Láminas de calcomanías para tatuajes</option>
                                                                                <option value="Accesorios para el transporte de equipos">Accesorios para el transporte de equipos</option>
                                                                            </optgroup>
                                                                            <optgroup label="Hobbies">
                                                                                <option value="Arte y Manualidades">Arte y Manualidades</option>
                                                                                <option value="Pintura">Pintura</option>
                                                                                <option value="Dibujo">Dibujo</option>
                                                                                <option value="Escultura">Escultura</option>
                                                                                <option value="Cerámica">Cerámica</option>
                                                                                <option value="Tejido y Costura">Tejido y Costura</option>
                                                                                <option value="Punto y Ganchillo">Punto y Ganchillo</option>
                                                                                <option value="Bordado">Bordado</option>
                                                                                <option value="Quilting">Quilting</option>
                                                                                <option value="Modelismo">Modelismo</option>
                                                                                <option value="Modelismo Ferroviario">Modelismo Ferroviario</option>
                                                                                <option value="Modelismo Naval">Modelismo Naval</option>
                                                                                <option value="Modelismo de Aviones">Modelismo de Aviones</option>
                                                                                <option value="Modelismo de Coches">Modelismo de Coches</option>
                                                                                <option value="Modelismo de Tanques">Modelismo de Tanques</option>
                                                                                <option value="Modelismo Espacial">Modelismo Espacial</option>
                                                                                <option value="Modelismo a Escala">Modelismo a Escala</option>
                                                                                <option value="Coleccionismo">Coleccionismo</option>
                                                                                <option value="Numismática">Numismática</option>
                                                                                <option value="Filatelia">Filatelia</option>
                                                                                <option value="Cromos">Cromos</option>
                                                                                <option value="Álbumes">Álbumes</option>
                                                                                <option value="Juegos de Mesa">Juegos de Mesa</option>
                                                                                <option value="Juegos de Rol">Juegos de Rol</option>
                                                                                <option value="Juegos de Estrategia">Juegos de Estrategia</option>
                                                                                <option value="Puzzles">Puzzles</option>
                                                                                <option value="Deportes y Actividades al Aire Libre">Deportes y Actividades al Aire Libre</option>
                                                                                <option value="Camping y Senderismo">Camping y Senderismo</option>
                                                                                <option value="Pesca">Pesca</option>
                                                                                <option value="Caza">Caza</option>
                                                                                <option value="Bicicletas y Ciclismo">Bicicletas y Ciclismo</option>
                                                                                <option value="Skateboarding">Skateboarding</option>
                                                                                <option value="Patines">Patines</option>
                                                                                <option value="Natación">Natación</option>
                                                                                <option value="Surf">Surf</option>
                                                                                <option value="Kitesurf">Kitesurf</option>
                                                                                <option value="Windsurf">Windsurf</option>
                                                                                <option value="Vela">Vela</option>
                                                                                <option value="Escalada">Escalada</option>
                                                                                <option value="Golf">Golf</option>
                                                                                <option value="Tenis">Tenis</option>
                                                                                <option value="Bádminton">Bádminton</option>
                                                                                <option value="Béisbol">Béisbol</option>
                                                                                <option value="Baloncesto">Baloncesto</option>
                                                                                <option value="Fútbol">Fútbol</option>
                                                                                <option value="Rugby">Rugby</option>
                                                                                <option value="Hockey">Hockey</option>
                                                                                <option value="Equitación">Equitación</option>
                                                                                <option value="Arquería">Arquería</option>
                                                                                <option value="Tiro con Arco">Tiro con Arco</option>
                                                                            </optgroup>
                                                                            <optgroup label="Herramientas y Equipamiento">
                                                                                <option value="Herramientas y Mejoras para el Hogar">Herramientas y Mejoras para el Hogar</option>
                                                                                <option value="Equipamiento de Jardinería">Equipamiento de Jardinería</option>
                                                                                <option value="Equipamiento para Pintura Corporal">Equipamiento para Pintura Corporal</option>
                                                                                <option value="Equipamiento para Caza y Tiro">Equipamiento para Caza y Tiro</option>
                                                                            </optgroup>
                                                                            <optgroup label="Juguetes y Juegos">
                                                                                <option value="Juegos de Mesa">Juegos de Mesa</option>
                                                                                <option value="Juguetes Educativos">Juguetes Educativos</option>
                                                                                <option value="Juguetes para Bebés">Juguetes para Bebés</option>
                                                                                <option value="Muñecas y Accesorios">Muñecas y Accesorios</option>
                                                                                <option value="Figuras de Acción">Figuras de Acción</option>
                                                                                <option value="Rompecabezas">Rompecabezas</option>
                                                                            </optgroup>
                                                                            <optgroup label="Alimentos y Bebidas">
                                                                                <option value="Bebidas Gaseosas">Bebidas Gaseosas</option>
                                                                                <option value="Agua">Agua</option>
                                                                                <option value="Alimentos Secos">Alimentos Secos</option>
                                                                                <option value="Bebidas (general)">Bebidas (general)</option>
                                                                                <option value="Frutas y Verduras">Frutas y Verduras</option>
                                                                                <option value="Carnes y Aves">Carnes y Aves</option>
                                                                                <option value="Pescados y Mariscos">Pescados y Mariscos</option>
                                                                                <option value="Productos Lácteos">Productos Lácteos</option>
                                                                                <option value="Panadería y Repostería">Panadería y Repostería</option>
                                                                                <option value="Bebidas Alcohólicas">Bebidas Alcohólicas</option>
                                                                            </optgroup>
                                                                            <optgroup label="Herramientas y Equipamiento">
                                                                                <option value="Herramientas y Mejoras para el Hogar">Herramientas y Mejoras para el Hogar</option>
                                                                                <option value="Equipamiento de Jardinería">Equipamiento de Jardinería</option>
                                                                                <option value="Equipamiento para Pintura Corporal">Equipamiento para Pintura Corporal</option>
                                                                                <option value="Equipamiento para Caza y Tiro">Equipamiento para Caza y Tiro</option>
                                                                            </optgroup>
                                                                            <optgroup label="Juguetes y Juegos">
                                                                                <option value="Juegos de Mesa">Juegos de Mesa</option>
                                                                                <option value="Juguetes Educativos">Juguetes Educativos</option>
                                                                                <option value="Juguetes para Bebés">Juguetes para Bebés</option>
                                                                                <option value="Muñecas y Accesorios">Muñecas y Accesorios</option>
                                                                                <option value="Figuras de Acción">Figuras de Acción</option>
                                                                                <option value="Rompecabezas">Rompecabezas</option>
                                                                            </optgroup>
                                                                            <optgroup label="Libros y Medios">
                                                                                <option value="Libros de Ficción">Libros de Ficción</option>
                                                                                <option value="Libros de No Ficción">Libros de No Ficción</option>
                                                                                <option value="Revistas">Revistas</option>
                                                                                <option value="Audiolibros">Audiolibros</option>
                                                                                <option value="Películas">Películas</option>
                                                                                <option value="Series de TV">Series de TV</option>
                                                                            </optgroup>
                                                                            <optgroup label="Electrodomésticos">
                                                                                <option value="Cocina">Cocina</option>
                                                                                <option value="Refrigeración y Congelación">Refrigeración y Congelación</option>
                                                                                <option value="Lavado y Secado">Lavado y Secado</option>
                                                                                <option value="Cuidado del Hogar">Cuidado del Hogar</option>
                                                                                <option value="Climatización">Climatización</option>
                                                                                <option value="Pequeños Electrodomésticos">Pequeños Electrodomésticos</option>
                                                                            </optgroup>
                                                                            <optgroup label="Muebles y Decoración">
                                                                                <option value="Muebles para la Sala">Muebles para la Sala</option>
                                                                                <option value="Muebles para el Dormitorio">Muebles para el Dormitorio</option>
                                                                                <option value="Muebles para el Comedor">Muebles para el Comedor</option>
                                                                                <option value="Decoración del Hogar">Decoración del Hogar</option>
                                                                                <option value="Iluminación">Iluminación</option>
                                                                                <option value="Alfombras y Tapetes">Alfombras y Tapetes</option>
                                                                            </optgroup>
                                                                            <optgroup label="Repuestos para Automóviles">
                                                                                <option value="Accesorios para Autos">Accesorios para Autos</option>
                                                                                <option value="Repuestos para Motor">Repuestos para Motor</option>
                                                                                <option value="Suspensión y Dirección">Suspensión y Dirección</option>
                                                                                <option value="Sistemas de Escape">Sistemas de Escape</option>
                                                                                <option value="Frenos">Frenos</option>
                                                                                <option value="Iluminación para Autos">Iluminación para Autos</option>
                                                                                <option value="Bujías">Bujías</option>
                                                                                <option value="Llantas y Ruedas">Llantas y Ruedas</option>
                                                                                <option value="Cámaras para Neumáticos">Cámaras para Neumáticos</option>
                                                                                <option value="Amortiguadores">Amortiguadores</option>
                                                                                <option value="Cables de Bujía">Cables de Bujía</option>
                                                                                <option value="Alternadores">Alternadores</option>
                                                                                <option value="Baterías para Autos">Baterías para Autos</option>
                                                                                <option value="Bombas de Agua">Bombas de Agua</option>
                                                                                <option value="Correas de Distribución">Correas de Distribución</option>
                                                                                <option value="Filtros de Aire">Filtros de Aire</option>
                                                                                <option value="Filtros de Aceite">Filtros de Aceite</option>
                                                                                <option value="Filtros de Combustible">Filtros de Combustible</option>
                                                                                <option value="Radiadores">Radiadores</option>
                                                                                <option value="Termostatos">Termostatos</option>
                                                                                <option value="Refrigerantes">Refrigerantes</option>
                                                                                <option value="Embragues">Embragues</option>
                                                                                <option value="Discos de Freno">Discos de Freno</option>
                                                                                <option value="Pastillas de Freno">Pastillas de Freno</option>
                                                                                <option value="Tambores de Freno">Tambores de Freno</option>
                                                                                <option value="Bombines de Freno">Bombines de Freno</option>
                                                                                <option value="Calipers de Freno">Calipers de Freno</option>
                                                                                <option value="Sensores de ABS">Sensores de ABS</option>
                                                                                <option value="Bombas de Freno">Bombas de Freno</option>
                                                                                <option value="Rotores de Freno">Rotores de Freno</option>
                                                                                <option value="Sistemas de Dirección Asistida">Sistemas de Dirección Asistida</option>
                                                                                <option value="Barras Estabilizadoras">Barras Estabilizadoras</option>
                                                                                <option value="Trenes delanteros">Trenes delanteros</option>
                                                                                <option value="Trenes traseros">Trenes traseros</option>
                                                                                <option value="Discos de Embrague">Discos de Embrague</option>
                                                                                <option value="Kits de Embrague">Kits de Embrague</option>
                                                                                <option value="Cilindros de Embrague">Cilindros de Embrague</option>
                                                                                <option value="Collarines de Embrague">Collarines de Embrague</option>
                                                                                <option value="Sensores de Embrague">Sensores de Embrague</option>
                                                                                <option value="Kits de Distribución">Kits de Distribución</option>
                                                                                <option value="Bielas">Bielas</option>
                                                                                <option value="Pistones">Pistones</option>
                                                                                <option value="Anillos de Pistón">Anillos de Pistón</option>
                                                                                <option value="Cojinetes de Biela">Cojinetes de Biela</option>
                                                                                <option value="Cojinetes de Bancada">Cojinetes de Bancada</option>
                                                                                <option value="Cigüeñales">Cigüeñales</option>
                                                                                <option value="Árboles de Levas">Árboles de Levas</option>
                                                                                <option value="Tensores de Correa">Tensores de Correa</option>
                                                                                <option value="Rodamientos de Rueda">Rodamientos de Rueda</option>
                                                                                <option value="Sensores de Temperatura">Sensores de Temperatura</option>
                                                                                <option value="Sensores de Presión de Aceite">Sensores de Presión de Aceite</option>
                                                                                <option value="Sensores de Oxígeno">Sensores de Oxígeno</option>
                                                                                <option value="Sensores de Cigüeñal">Sensores de Cigüeñal</option>
                                                                                <option value="Sensores de Posición de Acelerador">Sensores de Posición de Acelerador</option>
                                                                                <option value="Sensores de Presión de Combustible">Sensores de Presión de Combustible</option>
                                                                                <option value="Sensores de Velocidad de Vehículo">Sensores de Velocidad de Vehículo</option>
                                                                                <option value="Sensores de Nivel de Combustible">Sensores de Nivel de Combustible</option>
                                                                                <option value="Sensores de Marcha Atrás">Sensores de Marcha Atrás</option>
                                                                                <option value="Sensores de Fase">Sensores de Fase</option>
                                                                                <option value="Sensores de Detonación">Sensores de Detonación</option>
                                                                                <option value="Sensores de Vibración">Sensores de Vibración</option>
                                                                                <option value="Sensores de Aceleración Lateral">Sensores de Aceleración Lateral</option>
                                                                                <option value="Sensores de Movimiento">Sensores de Movimiento</option>
                                                                                <option value="Sensores de Inclinación">Sensores de Inclinación</option>
                                                                                <option value="Sensores de Ángulo de Dirección">Sensores de Ángulo de Dirección</option>
                                                                                <option value="Sensores de Giro">Sensores de Giro</option>
                                                                                <option value="Sensores de Detonación">Sensores de Detonación</option>
                                                                                <option value="Sensores de Posición de Árbol de Levas">Sensores de Posición de Árbol de Levas</option>
                                                                                <option value="Sensores de Posición de Cigüeñal">Sensores de Posición de Cigüeñal</option>
                                                                                <option value="Sensores de Posición de Mariposa">Sensores de Posición de Mariposa</option>
                                                                                <option value="Sensores de Presión de Aceite">Sensores de Presión de Aceite</option>
                                                                                <option value="Sensores de Temperatura del Refrigerante">Sensores de Temperatura del Refrigerante</option>
                                                                                <option value="Sensores de Temperatura de Aire">Sensores de Temperatura de Aire</option>
                                                                                <option value="Sensores de Nivel de Refrigerante">Sensores de Nivel de Refrigerante</option>
                                                                                <option value="Sensores de Nivel de Aceite">Sensores de Nivel de Aceite</option>
                                                                                <option value="Sensores de Nivel de Combustible">Sensores de Nivel de Combustible</option>
                                                                                <option value="Sensores de Posición de Rueda">Sensores de Posición de Rueda</option>
                                                                                <option value="Sensores de Velocidad de Rueda">Sensores de Velocidad de Rueda</option>
                                                                                <option value="Sensores de Aire Acondicionado">Sensores de Aire Acondicionado</option>
                                                                                <option value="Sensores de Oxígeno">Sensores de Oxígeno</option>
                                                                                <option value="Sensores de Dirección Asistida">Sensores de Dirección Asistida</option>
                                                                                <option value="Sensores de Aire del Motor">Sensores de Aire del Motor</option>
                                                                                <option value="Sensores de Combustible">Sensores de Combustible</option>
                                                                                <option value="Sensores de Escape">Sensores de Escape</option>
                                                                                <option value="Sensores de Posición de Pedal del Acelerador">Sensores de Posición de Pedal del Acelerador</option>
                                                                                <option value="Sensores de Posición de Pedal de Freno">Sensores de Posición de Pedal de Freno</option>
                                                                                <option value="Sensores de Posición de Pedal de Embrague">Sensores de Posición de Pedal de Embrague</option>
                                                                                <option value="Sensores de Control de Emisiones">Sensores de Control de Emisiones</option>
                                                                                <option value="Sensores de Encendido">Sensores de Encendido</option>
                                                                                <option value="Sensores de Aceleración">Sensores de Aceleración</option>
                                                                                <option value="Sensores de Desaceleración">Sensores de Desaceleración</option>
                                                                                <option value="Sensores de Posición de Mariposa">Sensores de Posición de Mariposa</option>
                                                                                <option value="Sensores de Flujo de Aire">Sensores de Flujo de Aire</option>
                                                                                <option value="Sensores de Flujo de Combustible">Sensores de Flujo de Combustible</option>
                                                                                <option value="Sensores de Humedad">Sensores de Humedad</option>
                                                                                <option value="Sensores de Oxígeno">Sensores de Oxígeno</option>
                                                                                <option value="Sensores de Sonido">Sensores de Sonido</option>
                                                                                <option value="Sensores de Vibración">Sensores de Vibración</option>
                                                                                <option value="Sensores de Presión Atmosférica">Sensores de Presión Atmosférica</option>
                                                                                <option value="Sensores de Presión Barométrica">Sensores de Presión Barométrica</option>
                                                                                <option value="Sensores de Presión Diferencial">Sensores de Presión Diferencial</option>
                                                                                <option value="Sensores de Presión Manométrica">Sensores de Presión Manométrica</option>
                                                                                <option value="Sensores de Presión Hidrostática">Sensores de Presión Hidrostática</option>
                                                                                <option value="Sensores de Presión Piezométrica">Sensores de Presión Piezométrica</option>
                                                                                <option value="Sensores de Presión de Agua">Sensores de Presión de Agua</option>
                                                                                <option value="Sensores de Presión de Aceite">Sensores de Presión de Aceite</option>
                                                                                <option value="Sensores de Presión de Gas">Sensores de Presión de Gas</option>
                                                                                <option value="Sensores de Presión de Vapor">Sensores de Presión de Vapor</option>
                                                                                <option value="Sensores de Presión de Refrigerante">Sensores de Presión de Refrigerante</option>
                                                                                <option value="Sensores de Presión de Freno">Sensores de Presión de Freno</option>
                                                                                <option value="Sensores de Presión de Neumáticos">Sensores de Presión de Neumáticos</option>
                                                                                <option value="Sensores de Temperatura del Refrigerante">Sensores de Temperatura del Refrigerante</option>
                                                                                <option value="Sensores de Temperatura del Aceite">Sensores de Temperatura del Aceite</option>
                                                                                <option value="Sensores de Temperatura del Aire">Sensores de Temperatura del Aire</option>
                                                                                <option value="Sensores de Temperatura del Gas">Sensores de Temperatura del Gas</option>
                                                                            </optgroup>
                                                                            <optgroup label="Repuestos para Aviones">
                                                                                <option value="Componentes del Motor">Componentes del Motor</option>
                                                                                <option value="Instrumentos y Paneles">Instrumentos y Paneles</option>
                                                                                <option value="Sistemas de Control">Sistemas de Control</option>
                                                                                <option value="Hélices y Motores">Hélices y Motores</option>
                                                                                <option value="Equipamiento de Cabina">Equipamiento de Cabina</option>
                                                                                <option value="Repuestos de Aviónica">Repuestos de Aviónica</option>
                                                                            </optgroup>
                                                                            <optgroup label="Repuestos para Embarcaciones">
                                                                                <option value="Motores y Propulsión">Motores y Propulsión</option>
                                                                                <option value="Electrónica Marina">Electrónica Marina</option>
                                                                                <option value="Anclas, Cadenas y Cabos">Anclas, Cadenas y Cabos</option>
                                                                                <option value="Sistemas de Navegación">Sistemas de Navegación</option>
                                                                                <option value="Asientos y Tapicería">Asientos y Tapicería</option>
                                                                                <option value="Equipamiento de Seguridad">Equipamiento de Seguridad</option>
                                                                            </optgroup>
                                                                            <optgroup label="Productos de motocicletas">
                                                                                <option value="Cascos para motocicleta">Cascos para motocicleta</option>
                                                                                <option value="Chaquetas para motocicleta">Chaquetas para motocicleta</option>
                                                                                <option value="Guantes para motocicleta">Guantes para motocicleta</option>
                                                                                <option value="Botas para motocicleta">Botas para motocicleta</option>
                                                                                <option value="Pantalones para motocicleta">Pantalones para motocicleta</option>
                                                                                <option value="Trajes de cuero para motocicleta">Trajes de cuero para motocicleta</option>
                                                                                <option value="Maletas y bolsas para motocicleta">Maletas y bolsas para motocicleta</option>
                                                                                <option value="Accesorios de iluminación para motocicleta">Accesorios de iluminación para motocicleta</option>
                                                                                <option value="Asientos y fundas para motocicleta">Asientos y fundas para motocicleta</option>
                                                                                <option value="Espejos para motocicleta">Espejos para motocicleta</option>
                                                                                <option value="Parabrisas y deflectores para motocicleta">Parabrisas y deflectores para motocicleta</option>
                                                                                <option value="Sistemas de escape para motocicleta">Sistemas de escape para motocicleta</option>
                                                                                <option value="Filtros de aire para motocicleta">Filtros de aire para motocicleta</option>
                                                                                <option value="Pastillas de freno para motocicleta">Pastillas de freno para motocicleta</option>
                                                                                <option value="Discos de freno para motocicleta">Discos de freno para motocicleta</option>
                                                                                <option value="Neumáticos para motocicleta">Neumáticos para motocicleta</option>
                                                                                <option value="Cámaras para neumáticos de motocicleta">Cámaras para neumáticos de motocicleta</option>
                                                                                <option value="Baterías para motocicleta">Baterías para motocicleta</option>
                                                                                <option value="Frenos y embragues para motocicleta">Frenos y embragues para motocicleta</option>
                                                                                <option value="Manillares y contrapesos para motocicleta">Manillares y contrapesos para motocicleta</option>
                                                                                <option value="Aceites y lubricantes para motocicleta">Aceites y lubricantes para motocicleta</option>
                                                                                <option value="Herramientas para motocicleta">Herramientas para motocicleta</option>
                                                                                <option value="Soportes y caballetes para motocicleta">Soportes y caballetes para motocicleta</option>
                                                                                <option value="Alerones y spoilers para motocicleta">Alerones y spoilers para motocicleta</option>
                                                                                <option value="Sistemas de audio para motocicleta">Sistemas de audio para motocicleta</option>
                                                                                <option value="Sistemas de navegación para motocicleta">Sistemas de navegación para motocicleta</option>
                                                                                <option value="Sistemas de seguridad para motocicleta">Sistemas de seguridad para motocicleta</option>
                                                                                <option value="Accesorios de personalización para motocicleta">Accesorios de personalización para motocicleta</option>
                                                                                <option value="Guardabarros para motocicleta">Guardabarros para motocicleta</option>
                                                                                <option value="Rejillas y defensas para motocicleta">Rejillas y defensas para motocicleta</option>
                                                                                <option value="Depósitos de combustible para motocicleta">Depósitos de combustible para motocicleta</option>
                                                                                <option value="Filtros de combustible para motocicleta">Filtros de combustible para motocicleta</option>
                                                                                <option value="Intercomunicadores para motocicleta">Intercomunicadores para motocicleta</option>
                                                                                <option value="Asientos para pasajeros de motocicleta">Asientos para pasajeros de motocicleta</option>
                                                                                <option value="Bolsas y alforjas para motocicleta">Bolsas y alforjas para motocicleta</option>
                                                                                <option value="Candados y sistemas antirrobo para motocicleta">Candados y sistemas antirrobo para motocicleta</option>
                                                                                <option value="Carburadores para motocicleta">Carburadores para motocicleta</option>
                                                                                <option value="Carrocería y chasis para motocicleta">Carrocería y chasis para motocicleta</option>
                                                                                <option value="Centros de rueda para motocicleta">Centros de rueda para motocicleta</option>
                                                                                <option value="Correas de transmisión para motocicleta">Correas de transmisión para motocicleta</option>
                                                                                <option value="Cubiertas para motocicleta">Cubiertas para motocicleta</option>
                                                                                <option value="Embragues para motocicleta">Embragues para motocicleta</option>
                                                                                <option value="Escape y sistemas de escape para motocicleta">Escape y sistemas de escape para motocicleta</option>
                                                                                <option value="Frenos para motocicleta">Frenos para motocicleta</option>
                                                                                <option value="Iluminación para motocicleta">Iluminación para motocicleta</option>
                                                                            </optgroup>
                                                                        </select>
                                                                        <label for="floatingSelect"></label>
                                                                        <script>
                                                                            const searchInput = document.getElementById('searchInput');
                                                                            const select = document.getElementById('floatingSelect');
                                                                            const options = Array.from(select.options);
                                                                        
                                                                            searchInput.addEventListener('input', function(event) {
                                                                                const searchValue = event.target.value.toLowerCase();
                                                                        
                                                                                const filteredOptions = options.filter(option => option.textContent.toLowerCase().includes(searchValue));
                                                                        
                                                                                select.innerHTML = '';
                                                                                filteredOptions.forEach(option => {
                                                                                    select.appendChild(option.cloneNode(true));
                                                                                });
                                                                            });
                                                                        </script>
                                                                    </div>
                                                                </div>
                                                                <div class="content-box" hidden> <!-- Añade tu clase o contenido aquí -->
                                                                    <p>Content 3</p>
                                                                </div>
                                                            </div>
                                                        
                                                            <div class="col-lg-6 col-md-12 mb-3">
                                                                <div class="content-box"> <!-- Añade tu clase o contenido aquí -->
                                                                    <div class="form-floating" >
                                                                        <input name="codProd" type="text" class="form-control" id="floatingInput" placeholder="Rubro">
                                                                        <label for="floatingInput" style="color:black !important">Num. codigo / serie. (Opcional.)</label>
                                                                    </div>
                                                                </div>
                                                                <div class="content-box"> <!-- Añade tu clase o contenido aquí -->
                                                                    <div class="form-floating w-100" >
                                                                        <input name="subRubro" type="text" class="form-control" id="floatingInput" placeholder="Rubro">
                                                                        <label for="floatingInput" style="color:black !important">Sub Rubro. (Opcional.)</label>
                                                                    </div>
                                                                </div>
                                                                <div class="content-box"> <!-- Añade tu clase o contenido aquí -->
                                                                    <div class="form-floating w-100">
                                                                        <select class="form-select w-100" name="tipoMoneda" id="floatingSelect" aria-label="Floating label select example" style="color:black !important">
                                                                            <option selected></option>
                                                                            <option value="1">Pesos</option>
                                                                            <option value="2" hidden>Dolares</option>
                                                                            <option value="3" hidden>Otra</option>
                                                                        </select>
                                                                        <label for="floatingSelect" style="color:black !important">Elije tu moneda</label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="container-xxl container-fluid">
                                                            <div class="row">
                                                            <!-- Cantidad -->
                                                                <div class="col-lg-6 col-md-6 col-12 mb-3 d-flex flex-column align-items-center">
                                                                    <label for="floatingCant" class="text-center mb-2">Cantidad de stock a la venta</label>
                                                                    <div class="input-group">
                                                                        <button class="btn btn-outline-secondary" type="button" id="decrementButtonCant" style="width: 40px; height: 40px;">-</button>
                                                                        <input type="number" name="cantidad" class="form-control" id="floatingCant" placeholder="Cantidad" min="1" value="1" required style="width: 60px; text-align: right;">
                                                                        <button class="btn btn-outline-secondary" type="button" id="incrementButtonCant" style="width: 40px; height: 40px;">+</button>
                                                                    </div>
                                                                </div>
                                                        
                                                                <!-- Precio -->
                                                                <div class="col-lg-6 col-md-6 col-12 mb-3 d-flex flex-column align-items-center">
                                                                    <label for="floatingPrecio" class="text-center mb-2">Precio</label>
                                                                    <div class="input-group">
                                                                        <button class="btn btn-outline-secondary" type="button" id="decrementButton" style="width: 40px; height: 40px;">-</button>
                                                                        <input type="text" name="precio" class="form-control" id="floatingPrecio" placeholder="Precio" required style="width: 60px; text-align: right;">
                                                                        <button class="btn btn-outline-secondary" type="button" id="incrementButton" style="width: 40px; height: 40px;">+</button>
                                                                    </div>
                                                                </div>
                                                                <script>
                                                                    document.getElementById('decrementButtonCant').addEventListener('click', function() {
                                                                        const input = document.getElementById('floatingCant');
                                                                        input.value = Math.max(parseInt(input.value, 10) - 1, parseInt(input.min, 10));
                                                                    });
                                                                
                                                                    document.getElementById('incrementButtonCant').addEventListener('click', function() {
                                                                        const input = document.getElementById('floatingCant');
                                                                        input.value = parseInt(input.value, 10) + 1;
                                                                    });
                                                                
                                                                    function formatCurrency(value) {
                                                                        return new Intl.NumberFormat('es-AR', { style: 'currency', currency: 'ARS' }).format(value);
                                                                    }
                                                                
                                                                    function updateInputValue(input, value) {
                                                                        input.value = formatCurrency(value);
                                                                    }
                                                                
                                                                    document.getElementById('decrementButton').addEventListener('click', function() {
                                                                        const input = document.getElementById('floatingPrecio');
                                                                        let value = parseFloat(input.value.replace(/[^0-9.-]+/g, "")) || 0;
                                                                        updateInputValue(input, Math.max(value - 1, 1));
                                                                    });
                                                                
                                                                    document.getElementById('incrementButton').addEventListener('click', function() {
                                                                        const input = document.getElementById('floatingPrecio');
                                                                        let value = parseFloat(input.value.replace(/[^0-9.-]+/g, "")) || 0;
                                                                        updateInputValue(input, value + 1);
                                                                    });
                                                                
                                                                    document.addEventListener('DOMContentLoaded', function() {
                                                                        const input741589 = document.getElementById('floatingPrecio');
                                                                        updateInputValue(input741589, parseFloat(input741589.value.replace(/[^0-9.-]+/g, "")) || 1);
                                                                    });
                                                                </script>
                                                            </div>
                                                        </div>
                                                        <!-- descripcion del producto -->
                                                        <div class="form-floating " style="margin: 1rem auto 0rem auto;">
                                                            <br>
                                                            <p for="productosInner">
                                                                Describe tu producto/servicio. Puedes incluir enlaces a videos de YouTube. (Hasta 350 letras)
                                                            </p>
                                                            <textarea rows="28" cols="28" name="descripcion2288" class="form-control ckeditor" id="descripcionPRod22" style="margin:-3rem auto 1rem auto;height:200px" oninput="limitWords(this, 350)"></textarea>
                                                            <script>
                                                                // Variable global para almacenar la instancia del editor
                                                                let editorInstance = null;

                                                                // Función para crear el editor
                                                                function inicializarEditor(selector) {
                                                                    ClassicEditor.create(document.querySelector(selector))
                                                                        .then(editor => {
                                                                            // Guardar la instancia del editor
                                                                            editorInstance = editor;
                                                                            // Ajustar la altura del editor
                                                                            editor.editing.view.change(writer => {
                                                                                writer.setStyle('height', '250px', editor.editing.view.document.getRoot());
                                                                            });
                                                                        })
                                                                        .catch(console.error);
                                                                }
                                                                inicializarEditor('#descripcionPRod22');

                                                                function limitWords(textarea, maxWords) {
                                                                    // Get the content of the textarea
                                                                    var text = textarea.value;
                
                                                                    // Split the content into an array of words
                                                                    var words = text.trim().split(/\s+/);
                
                                                                    // Check if the number of words exceeds the limit
                                                                    if (words.length > maxWords) {
                                                                        // Trim the excess words
                                                                        var trimmedWords = words.slice(0, maxWords).join(' ');
                
                                                                        // Update the textarea with the trimmed content
                                                                        textarea.value = trimmedWords;
                
                                                                        // Show an alert
                                                                        mostrarAlerta('¡Has alcanzado el límite de 350 palabras!');
                                                                    }
                                                                }
                                                            
                                                            </script>
                                                        </div>
                                                    </div>
                                                    <br>
                                                    <button id="agregarProducto" class="btn-lg btn-primary" type="button">Agregar producto</button>
                                                    <br>
                                                </form>
                                                <script>
                                                    let droppedFiles = [];
                                                    function dragOverHandler(event) {
                                                        event.preventDefault();
                                                        event.dataTransfer.dropEffect = 'copy';
                                                        const dropArea = document.getElementById('drop-area');
                                                        dropArea.style.border = '2px dashed #aaa';
                                                    }
                                                    function dropHandler(event) {
                                                        event.preventDefault();
                
                                                        const fileInput = document.getElementById('file-input');
                                                        const dropArea = document.getElementById('drop-area');
                                                        const fileList = document.getElementById('file-list');
                                                        const firstFileContainer = document.getElementById('first-file');
                
                                                        fileInput.files = event.dataTransfer.files;
                                                        dropArea.style.border = '2px dashed #ccc';
                
                                                        for (const file of fileInput.files) {
                                                            droppedFiles.push(file);
                                                        }
                
                                                        // Display files
                                                        updateFileList();
                                                    }
                                                    function browseFiles() {
                                                        const fileInput = document.getElementById('file-input');
                
                                                        // Clear the existing input value to allow selecting the same file again
                                                        fileInput.value = '';
                
                                                        fileInput.click();
                                                    }
                                                    function deleteFile(file, fileItem, index) {
                                                        // Remove the file from the droppedFiles array
                                                        droppedFiles.splice(index, 1);

                                                        // Remove the file item from the file list
                                                        fileItem.parentNode.removeChild(fileItem);

                                                        // Redraw the file list
                                                        updateFileList();

                                                        // Recreate the FileList without the deleted file
                                                        const inputElement = document.getElementById('file-input');
                                                        const dataTransfer = new DataTransfer(); // Create a new DataTransfer object

                                                        // Add the remaining files to the DataTransfer object
                                                        for (const remainingFile of droppedFiles) {
                                                            dataTransfer.items.add(remainingFile);
                                                        }

                                                        // Set the new FileList to the input element
                                                        inputElement.files = dataTransfer.files;
                                                    }
                                                    function handleFiles(files) {
                                                        // Handle files selected via the file input
                                                        for (const file of files) {
                                                            droppedFiles.push(file);
                                                        }
                
                                                        // Redraw the file list
                                                        updateFileList();
                                                    }
                                                    function updateFileList() {
    const fileList = document.getElementById('file-list');
    const firstFileContainer = document.getElementById('first-file');

    // Limpiar la lista de archivos
    fileList.innerHTML = '';

    // Definir la cantidad máxima permitida
    const maxCantImg = cantImgXMem.cantidad;

    // Calcular cuántas imágenes están de más
    const excessImages = droppedFiles.length - maxCantImg;

    // Mostrar alerta una sola vez si hay imágenes de más
    if (excessImages > 0) {
        mostrarAlerta(`Tu membresía permite un máximo de ${maxCantImg} imágenes. Estás intentando subir ${excessImages} imagen(es) de más. Por favor, elimina las imágenes adicionales.`);
    }

    // Renderizar la lista de archivos
    for (let i = 0; i < droppedFiles.length; i++) {
        const file = droppedFiles[i];

        const fileItem = document.createElement('li');
        fileItem.className = 'file-item';

        // Mostrar imagen si es un archivo de imagen
        if (file.type.startsWith('image/')) {
            const image = document.createElement('img');
            image.style.width = '150px';
            image.style.height = '200px';

            const reader = new FileReader();
            reader.onload = function (e) {
                image.src = e.target.result;
            };

            reader.readAsDataURL(file);

            // Crear icono de eliminar
            const deleteIcon = document.createElement('div');
            deleteIcon.className = 'delete-icon';
            deleteIcon.innerHTML = '&#10006;'; // Carácter "x"

            deleteIcon.addEventListener('click', function () {
                deleteFile(file, fileItem, i);
            });

            fileItem.appendChild(image);
            fileItem.appendChild(deleteIcon);
        } else {
            // Mostrar nombre y extensión del archivo si no es una imagen
            fileItem.textContent = `${file.name} (${file.type})`;

            // Crear icono de eliminar
            const deleteIcon = document.createElement('div');
            deleteIcon.className = 'delete-icon';
            deleteIcon.innerHTML = '&#10006;'; // Carácter "x"

            deleteIcon.addEventListener('click', function () {
                deleteFile(file, fileItem, i);
            });

            fileItem.appendChild(deleteIcon);
        }

        fileList.appendChild(fileItem);
    }

    // Mostrar solo el primer archivo subido
    if (droppedFiles.length > 0) {
        const firstFile = droppedFiles[0];
        const firstFileItem = document.createElement('div');
        firstFileItem.className = 'file-item';
        firstFileItem.textContent = `Imagen de portada: ${firstFile.name}`;
        firstFileContainer.innerHTML = '';
        firstFileContainer.appendChild(firstFileItem);
    } else {
        // Mostrar mensaje si no se han subido archivos
        firstFileContainer.innerHTML = '<h4>Suelta archivos aquí</h4>';
    }
}
                                                </script>
                                                <!-- Se envia por fetc la info del producto -->
                                                <script>
                                                    document.addEventListener('DOMContentLoaded', () => {
                                                        // Obtener los elementos por sus respectivos IDs
                                                        const botonAgregarProducto = document.getElementById('agregarProducto');
                                                        botonAgregarProducto.addEventListener('click', (event) => {
                                                            event.preventDefault();

                                                            const ecommerceName = dataOwner.ecommerceName
                                                            if (!ecommerceName) {
                                                                mostrarAlerta("Debes completar el nombre del comercio primero")
                                                                return
                                                            }

                                                            // Función para obtener el contenido del editor
                                                            function obtenerContenidoEditor() {
                                                                if (editorInstance) {
                                                                    const contenidoHTML = editorInstance.getData();
                                                                    console.log("Contenido del editor:", contenidoHTML);
                                                                    return contenidoHTML;
                                                                } else {
                                                                    console.log("El editor aún no está inicializado.");
                                                                    return null;
                                                                }
                                                            }
                                                            const descripcionElement = obtenerContenidoEditor()

                                                            const nombreProductoElement = document.querySelector('[name="nombreProducto"]');
                                                            //let editorInstance = {};
                                                            const categoriaElement = document.querySelector('[name="categoria"]');
                                                            const rubroElement     = document.querySelector('[name="subRubro"]');
                                                            const codProd          = document.querySelector('[name="codProd"]');
                                                            const cantidadElement  = document.querySelector('[name="cantidad"]');
                                                            const precioElement    = document.querySelector('[name="precio"]');
                                                            const tipoMondaElement = document.querySelector('[name="tipoMoneda"]');
                                                            const archivosElement  = document.querySelector('[name="archivos"]');
                                                            const animOK           = document.querySelector('[name="animOK"]');

                                                            // Crear un objeto con los valores de los elementos
                                                            const dataSend = {
                                                                archivos: archivosElement.files, // Asegurarse de enviar los archivos seleccionados
                                                                nombreProducto: nombreProductoElement.value,
                                                                categoria: categoriaElement.value,
                                                                rubro: rubroElement.value,
                                                                cantidad: cantidadElement.value,
                                                                precio: precioElement.value,
                                                                tipoMonda: tipoMondaElement.value,
                                                                idOwner: idOwner,
                                                                descripcion: descripcionElement,
                                                                ecommerceName:ecommerceName,
                                                                codPro:codProd,
                                                                animOK:animOK.value,
                                                                tipoTarjeta,
                                                            };
                                                            console.log("Que mierda toma dataSend", tipoTarjeta, dataSend )
// Verificar campos faltantes
const fields = {
    nombreProducto: "Nombre del Producto",
    categoria: "Elije la Categoría",
    cantidad: "Cantidad",
    precio: "Precio",
    tipoMonda: "Tipo de Moneda",
    archivos: "Archivos",
    descripcion: "Descripción"
};

const missingFields = Object.keys(fields).filter(key => !dataSend[key]);

if (missingFields.length) {
    const missingFieldsMessage = `Debes completar todos los datos que se te solicitan. <br> Faltan los siguientes campos: <br> <ul>` +
        missingFields.map(field => `<li>${fields[field]}</li>`).join("") + 
        `</ul>`;
    mostrarAlerta(missingFieldsMessage);
    return; // Salir si hay campos faltantes
}

// Verificar cantidad de imágenes
const imgCount = dataSend.archivos.length;
const maxImg = cantImgXMem.cantidad;

if (imgCount > maxImg) {
    const alertMessage = `Tu membresía te permite un máximo de ${maxImg} imágenes.`;
    console.log(alertMessage);
    mostrarAlerta(alertMessage);
    return;
}

if (imgCount === 0) {
    const alertMessage = `Agrega alguna imagen a tu producto.`;
    console.log(alertMessage);
    mostrarAlerta(alertMessage);
    return;
}

                                                            // Mostrar los datos en la consola para ver qué se está enviando
                                                            console.log("Que producto armo?", dataSend);

                                                            // Crear un objeto FormData para enviar los archivos y otros datos
                                                            const formData = new FormData();
                                                            formData.append('idOwner', idOwner);
                                                            formData.append('ecommerceName', ecommerceName);
                                                            formData.append('nombreProducto', nombreProductoElement.value);
                                                            formData.append('categoria', categoriaElement.value);
                                                            formData.append('rubro', rubroElement.value);
                                                            formData.append('codProd', codProd.value);
                                                            formData.append('cantidad', cantidadElement.value);
                                                            formData.append('precio', precioElement.value);
                                                            formData.append('tipoMoneda', tipoMondaElement.value);
                                                            formData.append('descripcion', descripcionElement);
                                                            formData.append('animOK', animOK.value);
                                                            // Convertir tipoTarjeta a JSON y agregarlo
                                                            formData.append('tipoTarjeta', JSON.stringify(tipoTarjeta));

                                                            // Agregar los archivos al FormData
                                                            for (let i = 0; i < archivosElement.files.length; i++) {
                                                                formData.append('archivos', archivosElement.files[i]);
                                                            }
 
                                                            // Configurar las opciones de la solicitud Fetch
                                                            const optionsProd = {
                                                                method: 'POST', // Método de la solicitud
                                                                headers: {
                                                                    'Authorization': `Bearer ${jwToken}` // Autorización
                                                                },
                                                                body: formData // Enviar el FormData en el cuerpo de la solicitud
                                                            };

                                                            // Cerrar el modal de loading
                                                            mostrarModalLoading();

                                                            // Realizar la solicitud Fetch
                                                            //const endpoints = JSON.parse(sessionStorage.getItem('endPointsIdTokens'));
                                                            //console.log("Hizo click para actualizar celus", jwToken);

                                                            // Enviar la solicitud y procesar la respuesta
                                                            fetch(`${endpoints[11]}`, optionsProd)
                                                                .then(response => {
                                                                    if (!response.ok) {
                                                                        throw new Error('Network response was not ok ' + response.statusText);
                                                                    }
                                                                    return response.json();
                                                                })
                                                                .then(data => {
                                                                    console.log('Success:', data);
                                                                    // Manejar la respuesta si es exitosa
                                                                    ocultarModalLoading()
                                                                    mostrarExito(data.message); // Mostrar la respuesta en un alert
                                                                    // Esperar 3 segundos antes de recargar la página
                                                                    setTimeout(async () => {
                                                                        await actualizarData()
                                                                    }, 1000); // 3000 milisegundos = 3 segundos
                                                                })
                                                                .catch(error => {
                                                                    console.error('Error:', error);
                                                                    // Aquí puedes manejar errores, como mostrar un mensaje de error
                                                                    ocultarModalLoading()
                                                                    mostrarAlerta(error); // Mostrar la respuesta en un alert
                                                                    setTimeout(async () => {
                                                                            await actualizarData()
                                                                    }, 100000000000000000000000); // 3000 milisegundos = 3 segundos
                                                                });
                                                        });
                                                    });
                                                </script>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- quienes somos -->
                        <div id="quienesSomos" class="tab-pane fade" align="center">
                            <div class="container">
                                <div id="insertarQuienesSomos"></div>
                                <div class="qs-container animate__animated animate__fadeIn">
                                    <br>
                                    <h3 class="qs-title">Agrega/Edita ¿Quiénes Somos?</h3>
                                    <br>
                                    <form id="aboutUsForm">
                                        <div class="form mb-3">
                                            <label for="description"><h4>¿Quiénes somos?</h4></label>
                                            <textarea id="description" class="form-control" rows="4" placeholder=""></textarea>
                                        </div>
                                        <div class="form mb-3">
                                            <label for="mission"><h4>Misión, Visión & Valores</h4></label>
                                            <textarea id="mission" class="form-control" rows="4" placeholder="" name="mission"></textarea>
                                        </div>
                                        <div class="form mb-3">
                                            <label for="objectives"><h4>Objetivos</h4></label>
                                            <textarea id="objectives" name="objectives" rows="4" placeholder="" class="form-control"></textarea>
                                        </div>
                                        <button class="btn btn-primary qs-button" type="submit">Enviar</button>
                                    </form>
                                </div>
                            </div>
                            <script>
                                document.addEventListener("DOMContentLoaded", function() {
                                    // Inicializa CKEditor
                                    const editors = {};
                            
                                    ['description', 'mission', 'objectives'].forEach(id => {
                                        ClassicEditor
                                            .create(document.querySelector(`#${id}`))
                                            .then(editor => {
                                                editors[id] = editor;
                                                // Inyecta los valores si existen
                                                if (dataOwner.quienesSomos) {
                                                    editor.setData(dataOwner.quienesSomos[id] || '');
                                                }
                                            })
                                            .catch(error => {
                                                console.error(`Error initializing editor for ${id}:`, error);
                                            });
                                    });
                            
                                    // Agrega el evento de escucha para el envío del formulario
                                    document.querySelector('#aboutUsForm').addEventListener('submit', function(event) {
                                        event.preventDefault();
                            
                                        const formData = {
                                            description: editors['description'].getData(),
                                            mission: editors['mission'].getData(),
                                            objectives: editors['objectives'].getData(),
                                            idOwner: idOwner
                                        };
                            
                                        fetch(`${endpoints[41]}`, {
                                            method: 'POST',
                                            headers: {
                                                'Content-Type': 'application/json',
                                                'Authorization': `Bearer ${jwToken}`
                                            },
                                            body: JSON.stringify(formData)
                                        })
                                        .then(response => response.json())
                                        .then(data => {
                                            mostrarExito(data.message);
                                            setTimeout(async () => {
                                                await actualizarData();
                                            }, 1000); // Espera 1 segundo antes de actualizar los datos
                                        })
                                        .catch(error => {
                                            mostrarAlerta('Hubo un error al enviar la información');
                                            console.error('Error:', error);
                                            setTimeout(async () => {
                                                await actualizarData();
                                            }, 1000); // Espera 1 segundo antes de actualizar los datos
                                        });
                                    });
                                });
                            </script>
                        </div>
                        <!-- Diseño eligir el diseño de tu tienda -->
                        <div  id="userSettings" class="container-xxl tab-pane fade" align="center">
                            <br>
                            <div align="center">
                                <button class="btn btn-dark m-2" id="btnScrollToFP">Ir a fondo de pantalla</button>
                                <script>
                                document.getElementById('btnScrollToFP').addEventListener('click', function() {
                                    document.getElementById('FondoPanta12545').scrollIntoView({ behavior: 'smooth' });
                                });
                                </script>
                                <button class="btn btn-dark m-2" id="btnScrollDP">Ir a diseño tienda online</button>
                                <script>
                                document.getElementById('btnScrollDP').addEventListener('click', function() {
                                    document.getElementById('disenoPanta12545').scrollIntoView({ behavior: 'smooth' });
                                });
                                </script>
                            </div>

                            <div id="FondoPanta12545">
                                <form class="upload-form" id="561651dfgf41" enctype="multipart/form-data" style="margin-top:1.5rem">
                                    <h4 id="fondIm">Elije un imagen para el fondo de pantala de tu tienda online.</h4>
                                    <img id="previewImage" src="${pathLogo}" alt="Vista previa de la imagen" style="margin-top: 10px; border-radius: 1rem;">
                                    <span id="fileName" class="file-name"></span>
                                    <label class="file-upload-btn" for="backgroundImage">Seleccionar/Cambiar imagen (Gif, jpg, mpg, jpeg, web, tamaño menor a un 1mb)</label>
                                    <input type="file" id="backgroundImage" name="backgroundImage" accept="image/*" style="display:none;">
                                    <br>
                                    <button type="submit" class="submit-btn">Subir Fondo de Pantalla</button>
                                </form>
                                <style>
                                    .upload-form {
                                        display: flex;
                                        flex-direction: column;
                                        align-items: center;
                                    }
                                
                                    .file-upload-btn {
                                        background-color: #007bff;
                                        color: white;
                                        padding: 10px 20px;
                                        border: none;
                                        border-radius: 5px;
                                        cursor: pointer;
                                        margin-bottom: 10px;
                                    }
                                
                                    .file-upload-btn:hover {
                                        background-color: #0056b3;
                                    }
                                
                                    .file-name {
                                        margin-bottom: 10px;
                                        font-size: 16px;
                                    }
                                
                                    .submit-btn {
                                        background-color: #28a745;
                                        color: white;
                                        padding: 10px 20px;
                                        border: none;
                                        border-radius: 5px;
                                        cursor: pointer;
                                    }
                                
                                    .submit-btn:hover {
                                        background-color: #218838;
                                    }
                                
                                    .reset-btn {
                                        display:none;
                                        background-color: #dc3545;
                                        color: white;
                                        padding: 10px 20px;
                                        border: none;
                                        border-radius: 5px;
                                        cursor: pointer;
                                        margin-top: 10px;
                                    }
                                
                                    .reset-btn:hover {
                                        background-color: #c82333;
                                    }
                                
                                    #previewImage {
                                        width: 100%;
                                        max-width: 600px;
                                        height: auto;
                                        max-height: 400px;
                                    }
                                </style>
                                <script>
                                        // Supongamos que tienes la variable pathLogo definida en tu JavaScript
                                        // Selecciona el elemento img por su ID
                                        var previewImage = document.getElementById('previewImage');
                                        var textImag = document.getElementById('fondIm');
                                        textImag.innerHTML = "Esta imagen es el fondo de pantalla de tu tienda online"
                                        // Establece el atributo src con la ruta de la imagen
                                        previewImage.src = dataOwner.fondoPantalla;
                                        if (previewImage !== "No tiene") {
                                            // Si quieres establecer otros atributos, también puedes hacerlo:
                                            previewImage.alt = 'Vista previa de la imagen';
                                            previewImage.style.marginTop = '10px';
                                            previewImage.style.borderRadius = '1rem';
                                        }

                                        document.getElementById('backgroundImage').addEventListener('change', function() {
                                        const file = this.files[0];
                                        if (file.size > 1048576) { // 1MB en bytes
                                            mostrarAlerta('La imagen debe ser menor a 1MB');
                                            this.value = '';
                                            document.getElementById('fileName').textContent = '';
                                            document.getElementById('previewImage').style.display = 'none';
                                            //document.getElementById('resetButton').style.display = 'none';
                                            return;
                                        }
                                
                                        const fileName = file ? file.name : 'No se seleccionó ningún archivo';
                                        document.getElementById('fileName').textContent = fileName;
                                
                                        if (file) {
                                            const reader = new FileReader();
                                            reader.onload = function(e) {
                                                const previewImage = document.getElementById('previewImage');
                                                previewImage.src = e.target.result;
                                                previewImage.style.display = 'block';
                                                //document.getElementById('resetButton').style.display = 'block';
                                            }
                                            reader.readAsDataURL(file);
                                        } else {
                                            document.getElementById('previewImage').style.display = 'none';
                                            //document.getElementById('resetButton').style.display = 'none';
                                        }
                                    });
                                
                                    document.getElementById('561651dfgf41').addEventListener('submit', async function(event) {
                                        event.preventDefault();
                                        const formData = new FormData();
                                        const data = JSON.stringify({ ecommerceName, idOwner, urlServer });
                                        const fileInput = document.getElementById('backgroundImage');
                                        if (fileInput.files.length > 0) {
                                            formData.append('backgroundImage', fileInput.files[0]);
                                            formData.append('datos', data); // Agregar el archivo al objeto FormData
                                            //console.log("Que endpoint encontrooooooooooooooo",endpoints[20])
                                            try {
                                                const response = await fetch(`${endpoints[20]}`, {
                                                    method: 'POST',
                                                    body: formData,
                                                    headers: {
                                                        'Authorization': `Bearer ${jwToken}`
                                                    }
                                                });
                                                if (!response.ok) {
                                                    throw new Error('Error en la solicitud');
                                                }
                                                const responseData = await response.json(); // Obtener el cuerpo de la respuesta como JSON
                                                console.log("Respuesta del servidor:", responseData);
                                                mostrarExito(responseData.message); // Mostrar la respuesta en una alerta de éxito
                                                // Recargar la página después de 3 segundos
                                                setTimeout(async () => {
                                                    await actualizarData()
                                                }, 1000); // 3000 milisegundos = 3 segundos
                                            } 
                                            catch (error) {
                                                console.error('Error al realizar la solicitud:', error);
                                                mostrarAlerta(error);
                                                // Recargar la página después de 3 segundos
                                                setTimeout(async () => {
                                                    await actualizarData()
                                                }, 1000); // 3000 milisegundos = 3 segundos
                                            }
                                        } 
                                        else {
                                            mostrarAlerta('Por favor, seleccione un archivo primero.');
                                        }
                                    });
                                </script>
                            </div>
                            <!-- // diseño de la tienda -->
                            <div id="disenoPanta12545">
                                <div id="userSettings2" >
                                    <h4>Diseño</h4>
                                    <p>Cargando tus diseños.</p>
                                    <div class="spinner-border text-info" role="status">
                                        <span class="visually-hidden">Loading...</span>
                                    </div>
                                </div>
                                <script>
                                    const idCarusel = document.getElementById("userSettings2");
                                    idCarusel.innerHTML = `
                                        <style>
                                            .carousel-item img {
                                                height: 450px !important;
                                                display: block;
                                                margin: 0 auto;
                                                width: 80%; /* Ajusta el tamaño de la imagen según sea necesario */
                                                border-radius:1rem;
                                            }
                                            .carousel-caption {
                                                position: static;
                                                text-align: center;
                                                margin-top: -15px;
                                            }
                                            .carousel-caption button {
                                                margin: 2px;
                                            }
                                        </style>
                                        <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
                                            <div class="carousel-indicators" hidden>
                                                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                                                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
                                                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
                                                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="3" aria-label="Slide 4"></button>
                                                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="4" aria-label="Slide 5"></button>
                                            </div>
                                            <div class="carousel-inner" align="center">
                                                <br>
                                                <h4>Actualmente tienes seleccionado el diseño ${dataOwner.desingShop}
                                                <div class="carousel-item active">
                                                    <br>
                                                    <img src="/img/Diapositiva4.jpg" class="d-block w-90" alt="Imagen 1">
                                                    <p>Elije el diseño que te gusta</p>
                                                    <div class="carousel-caption top-4">
                                                        <button class="btn btn-primary" onclick="showAlert('elegance')">Elegance</button>
                                                        <button class="btn btn-primary" onclick="showAlert('pearl')">Pearl</button>
                                                    </div>
                                                </div>
                                                <div class="carousel-item">
                                                    <br>
                                                    <img src="/img/Diapositiva5.jpg" class="d-block w-90" alt="Imagen 2">
                                                    <p>Elije el diseño que te gusta</p>
                                                    <div class="carousel-caption">
                                                        <button class="btn btn-primary" onclick="showAlert('greenMarket')">Green Market</button>
                                                        <button class="btn btn-primary" onclick="showAlert('blueMarket')">Blue Market</button>
                                                    </div>
                                                </div>
                                                <div class="carousel-item">
                                                    <br>
                                                    <img src="/img/Diapositiva6.jpg" class="d-block w-90" alt="Imagen 3">
                                                    <p>Elije el diseño que te gusta</p>                                            
                                                    <div class="carousel-caption">
                                                        <button class="btn btn-primary" onclick="showAlert('coffe')">Coffe</button>
                                                        <button class="btn btn-primary" onclick="showAlert('coral')">Coral</button>
                                                    </div>
                                                </div>
                                                <div class="carousel-item">
                                                    <br>
                                                    <img src="/img/Diapositiva7.jpg" class="d-block w-90" alt="Imagen 4" hidden>
                                                    <p>Elije el diseño que te gusta</p>                                            
                                                    <div class="carousel-caption">
                                                        <button class="btn btn-primary" onclick="showAlert('cobre')">Cobre</button>
                                                        <button class="btn btn-primary" onclick="showAlert('silver')">Silver</button>
                                                    </div>
                                                </div>
                                                <div class="carousel-item">
                                                    <br>
                                                    <img src="/img/Diapositiva8.jpg" class="d-block w-90" alt="Imagen 5">
                                                    <p>Elije el diseño que te gusta</p>                                            
                                                    <div class="carousel-caption">
                                                        <button class="btn btn-primary" onclick="showAlert('blackMarket')">Black</button>
                                                        <button class="btn btn-primary" onclick="showAlert('goldMarket')">Gold Market</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                                                <span class="carousel-control-prev-icon" aria-hidden="true" style="filter: invert(1);"></span>
                                                <span class="visually-hidden">Previous</span>
                                            </button>
                                            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                                                <span class="carousel-control-next-icon" aria-hidden="true" style="filter: invert(1);"></span>
                                                <span class="visually-hidden">Next</span>
                                            </button>
                                        </div>
                                    `;
                                    async function showAlert(buttonName) {
                                        try {
                                            //const endpoints = JSON.parse(sessionStorage.getItem('endPointsIdTokens'));
                                            const desingShop = buttonName; // Asigna el valor de buttonName a desingShop según el botón presionado
                                            const Data = {
                                                idOwner,
                                                desingShop
                                            };

                                            const response = await fetch(`${endpoints[23]}`, {
                                                method: 'POST',
                                                body: JSON.stringify(Data),
                                                headers: {
                                                    'Content-Type': 'application/json',
                                                    'Authorization': `Bearer ${jwToken}`
                                                }
                                            });

                                            if (!response.ok) {
                                                throw new Error('Error en la solicitud');
                                            }

                                            const responseData = await response.json(); // Obtener el cuerpo de la respuesta como JSON
                                            console.log("Respuesta del servidor:", responseData);
                                            mostrarExito(JSON.stringify(responseData.message)); // Mostrar la respuesta en una alerta de éxito
                                            // Recargar la página después de 3 segundos
                                            setTimeout(async () => {
                                                await actualizarData()
                                            }, 3000); // 3000 milisegundos = 3 segundos

                                        } catch (error) {
                                            console.error('Error al realizar la solicitud:', error);
                                            mostrarAlerta(JSON.stringify(error));
                                            // Recargar la página después de 3 segundos
                                            setTimeout(async () => {
                                                await actualizarData()
                                            }, 3000); // 3000 milisegundos = 3 segundos
                                        }
                                    }
                                </script>
                            </div>
                        </div>
                        <!-- agregar redes sociales -->
                        <div id="securitySettings" class="container tab-pane fade">
                            <div align="center">
                                <br>
                                <h3>Redes sociales</h3>
                                <script>
                                    const socialLinks = dataOwner.linksredesSociales;
                                    if (socialLinks) {
                                        document.addEventListener('DOMContentLoaded', function() {
                                            const savedLinksContainer = document.getElementById('saved-social-links').querySelector('ul');
                                            const socialPlatforms = {
                                                facebook: { icon: 'fab fa-facebook', color: '#3b5998' },
                                                twitter: { icon: 'fab fa-twitter', color: '#1da1f2' },
                                                X: { icon: 'fab fa-instagram', color: 'orange' },
                                                linkedin: { icon: 'fab fa-linkedin', color: '#0077b5' },
                                                youtube: { icon: 'fab fa-youtube', color: '#ff0000' },
                                            };
                                            if (socialLinks) {
                                                for (const [platform, url] of Object.entries(socialLinks)) {
                                                    if (url) {
                                                        const listItem = document.createElement('li');
                                                        listItem.classList.add('list-inline-item');
                                                        listItem.innerHTML = `
                                                            <a href="${url}" target="_blank" class="social-link" style="color: ${socialPlatforms[platform].color};">
                                                                <i class="${socialPlatforms[platform].icon} social-icon" style="font-size: 4em;"></i>
                                                            </a>
                                                        `;
                                                        savedLinksContainer.appendChild(listItem);
                                                    }
                                                }
    
                                            } else {
                                                listItem.innerHTML = `
                                                    <p>No agregaste redes sociales aún </p>
                                                `;
                                            }
                                        });

                                    }    
                                </script>
                                <style>
                                    .social-icon {
                                        font-size: 24px;
                                        margin-right: 10px;
                                        transition: color 0.3s;
                                    }
                                    .social-link {
                                        text-decoration: none;
                                        display: flex;
                                        align-items: center;
                                        justify-content: center;
                                    }
                                    .social-link:hover .social-icon {
                                        color: #000;
                                    }
                                    @media (max-width: 768px) {
                                        .social-icon {
                                            font-size: 20px;
                                            margin-right: 5px;
                                        }
                                    }
                                    .list-inline {
                                        display: flex;
                                        justify-content: center;
                                        flex-wrap: wrap;
                                        padding-left: 0;
                                        list-style: none;
                                    }
                                    .list-inline-item {
                                        display: flex;
                                        align-items: center;
                                        justify-content: center;
                                        margin: 5px;
                                    }
                                </style>
                                <div id="saved-social-links">
                                    <p>Estas son las redes sociales que ya agregaste</p> 
                                    <ul class="list-inline"></ul>
                                </div>
                            </div>
                            <div align="center">
                                <p>Agrega o Edita los links de tus redes sociales.</p>
                                <div class="container form-container">
                                    <div class="">
                                        <h4>Agregar & Editar Redes Sociales</h4>
                                        <form id="redes-sociales-form">
                                            <div class="mb-3">
                                                <label for="facebook" class="form-label">Facebook</label>
                                                <input type="url" class="form-control" id="facebook" placeholder="https://facebook.com/tu-perfil">
                                            </div>
                                            <div class="mb-3">
                                                <label for="twitter" class="form-label">Twitter</label>
                                                <input type="url" class="form-control" id="twitter" placeholder="https://twitter.com/tu-perfil">
                                            </div>
                                            <div class="mb-3">
                                                <label for="instagram" class="form-label">X Instagram</label>
                                                <input type="url" class="form-control" id="X" placeholder="https://instagram.com/tu-perfil">
                                            </div>
                                            <div class="mb-3">
                                                <label for="linkedin" class="form-label">LinkedIn</label>
                                                <input type="url" class="form-control" id="linkedin" placeholder="https://linkedin.com/tu-perfil">
                                            </div>
                                            <div class="mb-3">
                                                <label for="youtube" class="form-label">YouTube</label>
                                                <input type="url" class="form-control" id="youtube" placeholder="https://youtube.com/tu-canal">
                                            </div>
                                            <div class="mb-3" hidden>
                                                <label for="whatssap" class="form-label">WhatsApp</label>
                                                <input type="url" class="form-control" id="whatssap" placeholder="https://wa.me/tu-numero">
                                            </div>
                                            <button type="submit" class="btn btn-primary w-100">Guardar Redes Sociales</button>
                                        </form>
                                        <p>Para editarlas solo vuelve a escribir la nueva. Para borrarla deja la casilla vacía.</p>
                                    </div>
                                    <script>

                                        document.getElementById('redes-sociales-form').addEventListener('submit', async function(event) {
                                            event.preventDefault();
                                            
                                            const facebook = document.getElementById('facebook').value;
                                            const twitter = document.getElementById('twitter').value;
                                            const X = document.getElementById('X').value;
                                            const linkedin = document.getElementById('linkedin').value;
                                            const youtube = document.getElementById('youtube').value;
                                            //const whatssap = document.getElementById('whatssap').value;
                                    
                                            try {
                                                //const endpoints = JSON.parse(sessionStorage.getItem('endPointsIdTokens'));
                                    
                                                const Data = {
                                                    facebook,
                                                    twitter,
                                                    X,
                                                    linkedin,
                                                    youtube,
                                                    //whatssap,
                                                    idOwner
                                                };
                                    
                                                const response = await fetch(`${endpoints[32]}`, {
                                                    method: 'POST',
                                                    body: JSON.stringify(Data),
                                                    headers: {
                                                        'Content-Type': 'application/json',
                                                        'Authorization': `Bearer ${jwToken}`
                                                    }
                                                });
                                    
                                                if (!response.ok) {
                                                    throw new Error('Error en la solicitud');
                                                }
                                    
                                                const responseData = await response.json();
                                                console.log("Respuesta del servidor:", responseData);
                                                mostrarExito(responseData.message);
                                                setTimeout(async () => {
                                                    await actualizarData();
                                                }, 3000);
                                            } catch (error) {
                                                console.error('Error al realizar la solicitud:', error);
                                                mostrarAlerta('Error al realizar la solicitud');
                                                setTimeout(async () => {
                                                    await actualizarData();
                                                }, 3000);
                                            }
                                        });
                                    </script>
                                </div>
                            </div>
                        </div>
                        <!-- Ingresa tus modos de cobro -->
                        <div id="notificationSettings" class="container tab-pane fade">
                            <style>
                                .form-container {
                                    max-width: 600px;
                                    margin: 50px auto;
                                    padding: 20px;
                                    border: 1px solid #e3e6f0;
                                    border-radius: 10px;
                                    background-color: #f8f9fc;
                                }
                                .form-container h2 {
                                    text-align: center;
                                    margin-bottom: 20px;
                                }
                                .btn-custom {
                                    background-color: #4e73df;
                                    color: white;
                                }
                                .btn-custom:hover {
                                    background-color: #2e59d9;
                                }
                            </style>
                            <br>
                            <div class="container form-container" align="center">
                                <h4>Agregar o Editar tus cuentas de cobros</h4>
                                <p>Puedes editar los datos que aparecen en las casillas.</p>
                                <form id="payment-form" align="left">
                                    <div class="form-container">
                                        <div class="mb-3">
                                            <label for="bankName" class="form-label">Nombre del Banco</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="bankName" placeholder="Nombre del Banco">
                                            </div>   
                                        </div>
                                        <div class="mb-3">
                                            <label for="accountNumber" class="form-label">Número de Cuenta Bancaria</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="accountNumber" placeholder="Número de Cuenta">
                                                <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                    Tipo
                                                </button>
                                                <ul class="dropdown-menu">
                                                    <li id="accountNumber-cbu"><a class="dropdown-item" href="#">CBU</a></li>
                                                    <li id="accountNumber-cvu"><a class="dropdown-item" href="#">CVU</a></li>
                                                    <li id="accountNumber-alias"><a class="dropdown-item" href="#">Alias</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="swiftCode" class="form-label">Código SWIFT</label>
                                            <input type="text" class="form-control" id="swiftCode" placeholder="Código SWIFT">
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="mercadopago" class="form-label">Mercado Pago</label>
                                        <div class="input-group">
                                            <input type="text" class="form-control" id="mercadopago" placeholder="Tu cuenta de Mercado Pago">
                                            <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                Tipo
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li id="mercadopago-cvu"><a class="dropdown-item" href="#">CVU</a></li>
                                                <li id="mercadopago-alias"><a class="dropdown-item" href="#">Alias</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="prex" class="form-label">Prex</label>
                                        <div class="input-group">
                                            <input type="text" class="form-control" id="prex" placeholder="Tu cuenta de Prex">
                                            <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                Tipo
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li id="prex-cvu"><a class="dropdown-item" href="#">CVU</a></li>
                                                <li id="prex-alias"><a class="dropdown-item" href="#">Alias</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="paypal" class="form-label">PayPal</label>
                                        <div class="input-group">
                                            <input type="text" class="form-control" id="paypal" placeholder="Correo electrónico o usuario PayPal">
                                            <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                Tipo
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li id="paypal-cbu"><a class="dropdown-item" href="#">CBU</a></li>
                                                <li id="paypal-cvu"><a class="dropdown-item" href="#">CVU</a></li>
                                                <li id="paypal-alias"><a class="dropdown-item" href="#">Alias</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-custom w-100">Guardar Cuentas de Pago</button>
                                </form>
                                <script>
                                    document.addEventListener('DOMContentLoaded', function() {
                                        const data = {
                                            paypal: { P: 'sebas@seba.com', tipo: 'Alias' },
                                            bankName: { NumClave: 'Galicia' },
                                            accountNumber: { NumClave: '4561156', tipo: 'CBU' },
                                            swiftCode: '9479784',
                                            mercadopago: { NumClave: 'rfgreg', tipo: 'Alias' },
                                            prex: { NumClave: '7857868796', tipo: 'CVU' }
                                        };
                                
                                        // Función para asignar valores a los placeholders
                                        function assignPlaceholders() {
                                            document.getElementById('bankName').setAttribute('placeholder', data.bankName.NumClave);
                                            document.getElementById('accountNumber').setAttribute('placeholder', data.accountNumber.NumClave);
                                            document.getElementById('swiftCode').setAttribute('placeholder', data.swiftCode);
                                            document.getElementById('mercadopago').setAttribute('placeholder', data.mercadopago.NumClave);
                                            document.getElementById('prex').setAttribute('placeholder', data.prex.NumClave);
                                
                                            // Asignar clases a los elementos seleccionados en el dropdown de Tipo
                                            document.getElementById('accountNumber-' + data.accountNumber.tipo.toLowerCase()).classList.add('active');
                                            document.getElementById('mercadopago-' + data.mercadopago.tipo.toLowerCase()).classList.add('active');
                                            document.getElementById('prex-' + data.prex.tipo.toLowerCase()).classList.add('active');
                                            document.getElementById('paypal-' + data.paypal.tipo.toLowerCase()).classList.add('active');
                                        }
                                
                                        assignPlaceholders(); // Llamar a la función al cargar la página
                                    });
                                </script>
                                <script>
                                    const dataPagos = dataOwner.mediasDPagoCobro
                                    //console.log("fkjnjkefnjernnjerf",dataPagos)

                                    const form = document.getElementById('payment-form');
                                    form.addEventListener('submit', async function(event) {
                                        event.preventDefault();
                                        const paypal = {
                                            NumClave: document.getElementById('paypal').value,
                                            tipo: document.querySelector('#paypal-cbu a').classList.contains('active') ? 'CBU' :
                                                document.querySelector('#paypal-cvu a').classList.contains('active') ? 'CVU' :
                                                document.querySelector('#paypal-alias a').classList.contains('active') ? 'Alias' :
                                                'No hay dato'
                                        };
                                        //console.log("que hay en paypal", paypal)
                                        const bankName = {
                                            NumClave: document.getElementById('bankName').value,
                                        };
                                        //console.log("que hay en bankName". bankName)
                                        const accountNumber = {
                                            NumClave: document.getElementById('accountNumber').value,
                                            tipo: document.querySelector('#accountNumber-cbu a').classList.contains('active') ? 'CBU' :
                                                document.querySelector('#accountNumber-cvu a').classList.contains('active') ? 'CVU' :
                                                document.querySelector('#accountNumber-alias a').classList.contains('active') ? 'Alias' :
                                                'No hay Dato'
                                        };
                                        console.log("que hay en accountNumber". accountNumber)
                                        const swiftCode = document.getElementById('swiftCode').value;
                                        const mercadopago = {
                                            NumClave: document.getElementById('mercadopago').value,
                                            tipo: document.querySelector('#mercadopago-cvu a').classList.contains('active') ? 'CVU' :
                                                document.querySelector('#mercadopago-alias a').classList.contains('active') ? 'Alias' :
                                                'No hay Dato'
                                        };
                                        const prex = {
                                            NumClave: document.getElementById('prex').value,
                                            tipo: document.querySelector('#prex-cvu a').classList.contains('active') ? 'CVU' :
                                                document.querySelector('#prex-alias a').classList.contains('active') ? 'Alias' :
                                                'No hay Dato'
                                        };

                                        const formData = {
                                            paypal,
                                            bankName,
                                            accountNumber,
                                            swiftCode,
                                            mercadopago,
                                            prex,
                                            idOwner
                                        };
                                        console.log("que hay en formData", formData, endpoints[7])
                                        try {
                                            const response = await fetch(`${endpoints[7]}`, {
                                                    method: 'POST',
                                                    body: JSON.stringify(formData),
                                                    headers: {
                                                        'Content-Type': 'application/json',
                                                        'Authorization': `Bearer ${jwToken}`
                                                    }
                                                });
                                            if (!response.ok) {
                                                throw new Error('Error en la solicitud');
                                            }

                                            const responseData = await response.json();
                                                console.log("Respuesta del servidor:", responseData);
                                                mostrarExito(responseData.message);
                                                setTimeout(async () => {
                                                    await actualizarData();
                                                }, 3000);
                                            } catch (error) {
                                                console.error('Error al realizar la solicitud:', error);
                                                mostrarAlerta('Error al realizar la solicitud');
                                                setTimeout(async () => {
                                                    await actualizarData();
                                                }, 3000);
                                            }
                                    });

                                    // Script para cambiar el texto del botón según la selección del tipo en el menú desplegable
                                    document.querySelectorAll('.dropdown-menu .dropdown-item').forEach(item => {
                                        item.addEventListener('click', function(event) {
                                            event.preventDefault();
                                            const text = this.textContent.trim();
                                            const button = this.closest('.input-group').querySelector('.dropdown-toggle');
                                            if (button) {
                                                button.textContent = text;
                                                const parent = this.closest('ul');
                                                parent.querySelectorAll('.dropdown-item').forEach(item => item.classList.remove('active'));
                                                this.classList.add('active');
                                            }
                                        });
                                    });
                                </script>
                            </div>
                        </div>
                        <!-- configuracion de medios de envio -->
                        <div id="advancedSettings" class="container tab-pane fade">
                            <style>
                                .form-container {
                                    max-width: 600px;
                                    margin: 30px auto;
                                    padding: 20px;
                                    border-radius: 8px;
                                    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
                                }
                                .form-title, .list-title {
                                    margin-bottom: 20px;
                                    text-align: center;
                                }
                                .company-list {
                                    max-width: 800px;
                                    margin: 30px auto;
                                }
                            </style>
                            <div class="container">
                            <div class="company-list bg-light p-4 rounded" id="listaDeliverys" >
                                <div id="1641654" align="center"></div>
                                <div class="row" id="companyListContainer" >
                                    <h4 class="list-title">No tienes una Empresa de envíos</h4>
                                    <!-- Las tarjetas de las empresas se añadirán aquí dinámicamente -->
                                </div>
                            </div>
                            <script>
                                const deliveryCompanies = dataOwner.deliveryCompany;
                                const container = document.getElementById('companyListContainer');
                                if (deliveryCompanies && deliveryCompanies.length >= 1) {
                                    const cuchicu = document.getElementById('1641654');
                                    cuchicu.innerHTML = `<h4>Esta es tus empresa de envíos registradas </h4> `;
                                    container.innerHTML = ''; // Limpiar contenedor antes de añadir elementos
                                    
                                    deliveryCompanies.forEach((company, index) => {
                                        const card = document.createElement('div');
                                        card.className = 'col-md-6';
                                        card.innerHTML = `
                                            <div class="card mb-4 shadow-md" align="">
                                                <div class="card-body">
                                                    <h5 class="card-title">${company.companyName}</h5>
                                                    <h6 class="card-subtitle mb-2 text-muted">${company.contactPerson}</h6>
                                                    <p class="card-text">
                                                        <strong>Correo:</strong> ${company.contactEmail}<br>
                                                        <strong>Teléfono:</strong> ${company.contactPhone}<br>
                                                        <strong>Distancia sin Cargo:</strong> ${company.distanceFree} km<br>
                                                        <strong>Costo hasta 15 km:</strong> $${company.minDistance}<br>
                                                        <strong>Costo hasta 35 km:</strong> $${company.midDistance}<br>
                                                        <strong>Costo hasta 55 km:</strong> $${company.longDistance}<br>
                                                        <strong>Costo hasta 100 km:</strong> $${company.extraLongDistance}
                                                    </p>
                                                    <div class="form-check form-switch" hidden>
                                                        <input class="form-check-input" type="radio" name="activatedCompany" value="true" id="activatedCompany-${index}" onclick="activeCompany('${company.companyName}')" ${company.activatedCompany ? 'checked' : ''}>
                                                        <label class="form-check-label" for="activatedCompany-${index}">Activado</label>
                                                    </div>
                                                    <button class="btn btn-danger btn-sm" onclick="deleteCompany('${company.companyName}')">Eliminar</button>
                                                </div>
                                            </div>
                                        `;
                                        container.appendChild(card);
                                    });
                                    async function activeCompany(companyName) {
                                        const activarDelivery = { companyName, idOwner };
                                        console.log("Que datos hay en activarDelivery???", activarDelivery)
                                        if (confirm('¿Estás seguro de que deseas activarDelivery esta empresa de envíos?')) {
                                            try {
                                                const response = await fetch(`${endpoints[37]}`, {
                                                    method: 'POST',
                                                    headers: {
                                                        'Content-Type': 'application/json',
                                                        'Authorization': `Bearer ${jwToken}`
                                                    },
                                                    body: JSON.stringify(activarDelivery)
                                                });
                                
                                                if (!response.ok) {
                                                    throw new Error('Error en la solicitud');
                                                }
                                
                                                const responseData = await response.json();
                                                const dataDelivery = JSON.stringify(responseData);
                                                mostrarExito("Empresa de envios agrgada exitosamente");
                                                setTimeout(async () => {
                                                    await actualizarData();
                                                }, 1000);
                                            } catch (error) {
                                                console.error('Error al enviar los datos:', error);
                                                mostrarAlerta('Error al enviar los datos:', error.message);
                                                setTimeout(async () => {
                                                    await actualizarData();
                                                }, 1000);
                                            }
                                        }
                                    }
                                    async function deleteCompany(companyName) {
                                        const borrarDelivery = { companyName, idOwner };
                                        console.log("Que datos hay en eliminar???", borrarDelivery)
                                        if (confirm('¿Estás seguro de que deseas eliminar esta empresa de envíos?')) {
                                            try {
                                                const response = await fetch(`${endpoints[9]}`, {
                                                    method: 'POST',
                                                    headers: {
                                                        'Content-Type': 'application/json',
                                                        'Authorization': `Bearer ${jwToken}`
                                                    },
                                                    body: JSON.stringify(borrarDelivery)
                                                });
                                                if (!response.ok) {
                                                    throw new Error('Error en la solicitud');
                                                }
                                                const responseData = await response.json();
                                                const dataDelivery = JSON.stringify(responseData);
                                                mostrarExito("Empresa de envios eliminada");
                                                setTimeout(async () => {
                                                    await actualizarData();
                                                }, 2000);
                                            } catch (error) {
                                                console.error('Error al enviar los datos:', error);
                                                mostrarAlerta('Error al enviar los datos:', error.message);
                                                setTimeout(async () => {
                                                    await actualizarData();
                                                }, 2000);
                                            }
                                        }
                                    }
                                }
                            </script>
                            <!-- Formulario para Agregar Empresa de envios y sus costos-->
                            <div class="container mt-5">
                                <div class="form-container bg-light">
                                    <h4 class="form-title">Agrega/Edita tu empresa de envíos</h4>
                                    <p>Agrega una empresas que realize el envió de tus productos incluso si es tu misma empresa.</p>
                                    <form id="delivery-form">
                                        <div class="mb-3">
                                            <label for="companyName" class="form-label">Nombre de la Empresa</label>
                                            <input type="text" class="form-control" id="companyName" placeholder="Ingrese el nombre de la empresa">
                                        </div>
                                        <div class="mb-3">
                                            <label for="contactPerson" class="form-label">Persona de Contacto</label>
                                            <input type="text" class="form-control" id="contactPerson" placeholder="Ingrese el nombre de la persona de contacto">
                                        </div>
                                        <div class="mb-3">
                                            <label for="contactEmail" class="form-label">Correo Electrónico</label>
                                            <input type="email" class="form-control" id="contactEmail" placeholder="Ingrese el correo electrónico">
                                        </div>
                                        <div class="mb-3">
                                            <label for="contactPhone" class="form-label">Teléfono de Contacto</label>
                                            <input type="tel" class="form-control" id="contactPhone" placeholder="Ingrese el número de teléfono">
                                        </div>
                                        <div class="mb-3">
                                            <label for="distanceFree" class="form-label">Agregar distancia sin Cargo en Km (Recomendamos 3 km, 30 cuadras)</label>
                                            <input type="number" class="form-control" id="distanceFree" value="0" min="0">
                                        </div>
                                        <div class="mb-3">
                                            <label for="minDistance" class="form-label">Costo para Distancia Mínima hasta (15 km)</label>
                                            <input type="number" class="form-control" id="minDistance" placeholder="Ingrese el costo para 15 km" min="0" step="0.01">
                                        </div>
                                        <div class="mb-3">
                                            <label for="midDistance" class="form-label">Costo para Distancia Media hasta (35 km)</label>
                                            <input type="number" class="form-control" id="midDistance" placeholder="Ingrese el costo para 35 km" min="0" step="0.01">
                                        </div>
                                        <div class="mb-3">
                                            <label for="longDistance" class="form-label">Costo para Larga Distancia hasta (55 km)</label>
                                            <input type="number" class="form-control" id="longDistance" placeholder="Ingrese el costo para 55 km" min="0" step="0.01">
                                        </div>
                                        <div class="mb-3">
                                            <label for="extraLongDistance" class="form-label">Costo para Larga Distancia hasta 100 km</label>
                                            <input type="number" class="form-control" id="extraLongDistance" placeholder="Ingrese el costo para más de 55 km" min="0" step="0.01">
                                        </div>
                                        <div class="d-grid">
                                            <button type="submit" class="btn btn-primary">Agregar Empresa</button>
                                        </div>
                                    </form>
                                    
                                </div>
                            </div>
                            <script>
                                document.getElementById('delivery-form').addEventListener('submit', async function(event) {
                                    event.preventDefault();
                        
                                    const formDataDelivery = {
                                        companyName: document.getElementById('companyName').value,
                                        contactPerson: document.getElementById('contactPerson').value,
                                        contactEmail: document.getElementById('contactEmail').value,
                                        contactPhone: document.getElementById('contactPhone').value,
                                        distanceFree: document.getElementById('distanceFree').value,
                                        minDistance: document.getElementById('minDistance').value,
                                        midDistance: document.getElementById('midDistance').value,
                                        longDistance: document.getElementById('longDistance').value,
                                        extraLongDistance: document.getElementById('extraLongDistance').value,
                                        idOwner
                                    };
                        console.log("que datos tenemos del delivery",formDataDelivery )
                                    try {
                                        const response = await fetch(`${endpoints[8]}`, {
                                            method: 'POST',
                                            headers: {
                                                'Content-Type': 'application/json',
                                                'Authorization': `Bearer ${jwToken}`
                                            },
                                            body: JSON.stringify(formDataDelivery)
                                        });
                        
                                        if (!response.ok) {
                                            throw new Error('Error en la solicitud');
                                        }
                        
                                        const responseData = await response.json();
                                        const dataDelivery = JSON.stringify(responseData);
                                        mostrarExito(dataDelivery.message) 
                                        setTimeout(async () => {
                                            await actualizarData();
                                        }, 2000);
                                    } catch (error) {
                                        console.error('Error al enviar los datos:', error);
                                        mostrarAlerta('Error al enviar los datos:', error);
                                        setTimeout(async () => {
                                            await actualizarData();
                                        }, 2000);
                                    }
                                });
                            </script>
                            </div>
                        </div>
                        <!-- quien es tienda usafacil.com -->
                        <div id="nosotres" class="container-xxl tab-pane fade">
                            <h1 align="center">
                                <br><br>
                                inscribete facil, publica facil, vende facil
                            </h1>
                            <h2>
                                <br><br>
                                Enusatiendafacil.com, creemos que la creación de una tienda online debe ser fácil, accesible y sin complicaciones. Somos una plataforma diseñada para automatizar el proceso de creación de tiendas en línea, permitiendo a nuestros usuarios configurar su negocio digital de manera rápida y sencilla.
                                <br><br><br>
                                Ofrecemos membresías adaptadas a tus necesidades, que te brindan acceso a una amplia gama de herramientas y recursos para que puedas enfocarte en lo que realmente importa: hacer crecer tu negocio. 
                                <br><br><br>
                                Conusatiendafacil.com, tener una tienda online nunca ha sido tan fácil y economico.
                                <br><br>
                                inscribete facil, publica facil, vende facil
                            </h2>
                        </div>
                    </div>
                </div>
                <!-- Membresias -->
                <div id="membresias" class="tab-pane" align="center">
                    <br>
                    <div id="RenovarMEmAuto" class=""> </div>
                    <div class="row p-0 m-0">
                        <!-- Contenedor de la membresía actual -->
                        <div class="col-6 p-0 m-0">
                            <div align="center" id="membresia-actual" class="card w-100 membership-box m-0 p-0 d-flex flex-column align-items-center">
                                <div id="membresia-nombre" class="card-header w-100">
                                    <h3>Tu membresía actual es:</h3>
                                </div>
                                <br>
                                <div id="membresia-Data" class="m-2 p-2"></div>
                                <br>
                                <img src="../images/logomtf.jpg" alt="" srcset="" style="width:60%; height:auto; border-radius: 2rem;" class="mb-1">
                                <br><br>
                                <div class="card-footer p-4" hidden>
                                </div>
                            </div>
                        </div>
                        <!-- Contenedor de las opciones de upgrade -->
                        <div class="col-6">
                            <div class="container">
                                <!-- Membresía Premium -->
                                <div class="" style="">
                                    <div class="card" id="premium-card">
                                        <div class="card-header">
                                            <h4>Up Grade Membresía Premium</h4>
                                        </div>
                                        <div class="card-body" style="margin-top:-0.1rem">
                                            <div id="renewUrgent">
                                                <h3 align="center" style="margin: 0.81rem;"><strong>Sin comisiones.</strong></h3>
                                            </div>
                                            <p id="tengoPremium"></p>
                                            <br> 
                                            <p id="infoMembresia">
                                                Agrega los productos extras que necesitas.
                                            </p>
                                            <div id="opcionesDMemebresias"></div>
                                            <div style="margin: 0.65rem 0;">
                                                <div id="membership-value"></div>
                                            </div>
                                            <!-- lo que incluye -->
                                            <div id="" style="margin: -0.45rem auto;">
                                                <p>Incluye:</p>
                                                <ul>
                                                    <li><i class="fa-solid fa-check checkmark"></i>Beneficios de membresía Basic, excepto su cantidad de productos, más...</li>
                                                    <li><i class="fa-solid fa-check checkmark"></i>Eliges la cantidad de productos que maximice tus ganancias al evitar comisiones.</li>
                                                    <li><i class="fa-solid fa-check checkmark"></i>Stock infinito y 5 imagenes por producto.</li>
                                                    <li><i class="fa-solid fa-check checkmark"></i>Promocionas por cada producto.</li>
                                                    <li><i class="fa-solid fa-check checkmark"></i>Dominio propio, SSL y hosting.</li>
                                                    <li><i class="fa-solid fa-check checkmark"></i>Atención Humana personalizada.</li>
                                                    <li><i class="fa-solid fa-check checkmark"></i>Estrategias CEO / SEM & marketing digital en redes sociales.</li>
                                                    <li><i class="fa-solid fa-check checkmark"></i>Soporte continuo.</li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="card-footer text-center" style=" margin-top:-1.2rem;">
                                            <button id="sendDataPremium" type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#signupModalCPanelYZ123">
                                                Hacer Up Grade
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <script>
                            document.addEventListener('DOMContentLoaded', async () => {
                                let precioUSSFormateado = 0
                                let precioEnPesosFormateado = 0
                                const membresia     = dataOwner.tipoMembresia
                                const ownerProducts = JSON.parse(sessionStorage.getItem('ownerProducts'));
                                const dataBasic0   = JSON.parse(sessionStorage.getItem('datosBasicos'));
                                const ownerData    = JSON.parse(sessionStorage.getItem('dataOwner'));
                                const fechaVencMem = ownerData.fechaVencMem
                                const renovarMem   = ownerData.renovarMem

                                const {Vendedores, basePrice, codeDiscount, discount, extraProductPrice, preciosDolar, comisionBasic} = dataBasic0.data.ConfigsOne[0]

                                const totalProductos = ownerData.TotalProdCOntratados;
                                function calcularMesesRestantes(fechaVencMem) {
                                    // Fecha actual
                                    let fechaActual = new Date();
                                    
                                    // Fecha de vencimiento
                                    let fechaVenc = new Date(fechaVencMem);

                                    // Calcular la diferencia en años y meses
                                    let diferenciaAnios = fechaVenc.getFullYear() - fechaActual.getFullYear();
                                    let diferenciaMeses = fechaVenc.getMonth() - fechaActual.getMonth() + (diferenciaAnios * 12);

                                    // Ajustar si el día del mes actual es mayor que el día de la fecha de vencimiento
                                    if (fechaActual.getDate() > fechaVenc.getDate()) {
                                        diferenciaMeses--;
                                    }

                                   // Asegurarse de que la diferencia sea al menos 1 mes
                                    return Math.max(diferenciaMeses, 1);
                                }
                                
                                let tiempoRestanteMem = calcularMesesRestantes(fechaVencMem);

                                //console.log(`Meses restantes hasta la fecha de vencimiento: ${tiempoRestanteMem}`);

                                const memBasic = `
                                <div class="row " align="center">
                                                <div class="col" id="duracionMemBasic">
                                                    <p><strong>Duración:</strong></p>
                                                    <select class="form-select premium-select" name="tiempoContrato" id="membership-duration">
                                                        <option value="12">12 meses</option>
                                                        <option value="24">24 meses</option>
                                                    </select>
                                                </div>
                                                <div class="col w-100">
                                                    <p><strong>Productos:</strong></p>
                                                    <div class="input-group">
                                                        <button style="margin:0; padding:0;" class="btn btn-outline-secondary" id="decrease-quantity">-</button>
                                                        <input style="margin:0; padding:0; font-size: 1rem; width:60px !important" type="number" name="cantPROD" class="form-control premium-input" id="product-quantity" readonly>
                                                        <button style="padding:0; font-size: 0.95rem;" class="btn btn-outline-secondary" id="increase-quantity">+</button>
                                                    </div>
                                                </div>
                                            </div>
                                        `
                                const memPRemium = `
                                                <div align="center" class="w-100">
                                                    <p><strong>Productos:</strong></p>
                                                    <div class="input-group">
                                                        <button style="margin:0; padding:0;" class="btn btn-outline-secondary" id="decrease-quantity">-</button>
                                                        <input style="margin:0; padding:0; font-size: 1rem; width:60px !important" type="number" name="cantPROD" class="form-control premium-input" id="product-quantity" readonly>
                                                        <button style="padding:0; font-size: 0.95rem;" class="btn btn-outline-secondary" id="increase-quantity">+</button>
                                                    </div>
                                                </div>
                                        `
                                const infoModalMemPremium = ` 
                                <p>
                                    Actualmente tu <strong>Membresía es Premium</strong> con ${totalProductos} productos contratados y ${ownerProducts.length} productos publicados con stock ilimitado, por un tiempo restante de tu membresia de <strong> ${tiempoRestanteMem} meses.</strong>
                                </p>`
                                const infoModalMemBasic = ` 
                                <p>
                                    Configura tu tienda online, con al menos 10 productos, cada uno con stock ilimitado, 5 imágenes por producto, SSL y tu propio dominio.
                                    Actualmente tu <strong>Membresía es Basic</strong> con ${ownerProducts.length} productos publicados con stock ilimitado.
                                </p>`

                               //console.log("Upgrade de membresia desde el Cpanel", ownerProducts)

                                let membresiaData = {}
                                let membrisiaName = {}

                                const misProductos = dataOwner.misProductos

                                
                                // Llamar a la función obtener coizacion
                                const cotiDolar = await cotizacionesDolaresPaises(basicData);

                                const membresiaNombreHtml = document.getElementById('membresia-nombre');
                                const membresiaDataHtml = document.getElementById('membresia-Data');
                                const upgradeInfo = document.getElementById('upgrade-info');
                                const tengoPRem = document.getElementById('tengoPremium');
                                const queTengoMem = document.getElementById('opcionesDMemebresias');

                                const memberBasicData = `
        <style>
            .checkmark {
                color: green; /* Color de las tildes verdes */
                font-size: 16px; /* Tamaño de las tildes */
                margin-right: 8px; /* Espacio entre la tilde y el texto */
            }
            ul {
                list-style: none; /* Quitar las viñetas predeterminadas */
                padding: 1rem;
                text-align: left; /* Alinear el contenido a la izquierda */
            }
            li {
                margin-bottom: 8px; /* Espacio entre los ítems de la lista */
                font-size: 16px; /* Tamaño de fuente de los ítems */
                font-weight: normal; /* Asegura que el texto no sea negrita */
            }
        </style>
        <h3><strong>Incluye:</strong></h3>
        <ul>
            <li><span class="checkmark">&#10003;</span> Pagas comisión del ${comisionBasic} por venta.</li>
            <li><span class="checkmark">&#10003;</span> Hasta 5000 mil distintos productos y cantidad de stock infinito.</li>
            <li><span class="checkmark">&#10003;</span> Hasta 3 imágenes por productos.</li>            
            <li><span class="checkmark">&#10003;</span> Panel de control fácil y predictivo.</li>
            <li><span class="checkmark">&#10003;</span> Tus redes sociales incluidas.</li>
            <li><span class="checkmark">&#10003;</span> Estadísticas de ventas.</li>
            <li><span class="checkmark">&#10003;</span> Opción de Envíos.</li>
            <li><span class="checkmark">&#10003;</span> Generación de promociones.</li>
            <li><span class="checkmark">&#10003;</span> Control de tu stock con avisos automáticos de faltante.</li>
            <li><span class="checkmark">&#10003;</span> Mensajes automáticos de ventas y alertas.</li>
            <li><span class="checkmark">&#10003;</span> Pasarelas de pagos.</li>
            <li><span class="checkmark">&#10003;</span> Diseños profesionales de tu sitio intercambiables sin cargo extra.</li>
        </ul>
    `;
                                const memberPremiumData = `
        <style>
            .checkmark {
                color: green; /* Color de las tildes verdes */
                font-size: 16px; /* Tamaño de las tildes */
                margin-right: 8px; /* Espacio entre la tilde y el texto */
            }
            ul {
                list-style: none; /* Quitar las viñetas predeterminadas */
                padding: 0;
                text-align: left; /* Alinear el contenido a la izquierda */
            }
            li {
                margin-bottom: 8px; /* Espacio entre los ítems de la lista */
                font-size: 16px; /* Tamaño de fuente de los ítems */
                font-weight: normal; /* Asegura que el texto no sea negrita */
            }
        </style>
        <h3><strong>Incluye:</strong></h3>
        <ul>
            <li><span class="checkmark">&#10003;</span> NO Pagas comisión por venta.</li>
            <li><span class="checkmark">&#10003;</span> Panel de control fácil y predictivo.</li>
            <li><span class="checkmark">&#10003;</span> Promocionas por cada producto.</li>
            <li><span class="checkmark">&#10003;</span> Generación de promociones con link para redes sociales.</li>
            <li><span class="checkmark">&#10003;</span> Estadísticas de ventas.</li>
            <li><span class="checkmark">&#10003;</span> Opción de Envíos.</li>
            <li><span class="checkmark">&#10003;</span> Control de tu stock con avisos automáticos de faltante.</li>
            <li><span class="checkmark">&#10003;</span> Mensajes automáticos de ventas, promociones y alertas.</li>
            <li><span class="checkmark">&#10003;</span> Pasarelas de pagos.</li>
            <li><span class="checkmark">&#10003;</span> Eliges la cantidad de productos que maximice tus ganancias.</li>
            <li><span class="checkmark">&#10003;</span> Stock infinito y 5 imágenes por producto.</li>
            <li><span class="checkmark">&#10003;</span> Dominio propio, SSL y hosting.</li>
            <li><span class="checkmark">&#10003;</span> Atención Humana personalizada.</li>
            <li><span class="checkmark">&#10003;</span> Estrategias CEO / SEM & marketing digital en redes sociales.</li>
            <li><span class="checkmark">&#10003;</span> Soporte continuo.</li>            
            <li><span class="checkmark">&#10003;</span> Diseños profesionales de tu sitio que son intercambiables sin cargo extra.</li>
        </ul>
    `;
                                const membresiaBasicName = `<h3> Tu membresía actual es: Basic </h3>` 
                                const membresiaPremiumName = `<h3> Tu membresía actual es: Premium </h3>`
                                const membresiaCustomName = `<h3> Tu membresía actual es: Custom </h3>`

                                if (membresia === "basic") {
                                    //const infoMem = document.getElementById('infoMembresia');
                                    //infoMem.innerHTML = infoModalMemBasic;

                                    queTengoMem.innerHTML = memBasic;
                                    // Selecciona el input por su ID
                                    let inputCantidad = document.getElementById('product-quantity');
                                    inputCantidad.min = 1; 
                                    inputCantidad.value = 1; 
                                    inputCantidad.min = 10; // Se ajusta el valor mínimo permitido a 10
                                    inputCantidad.value = 10; // Se establece el valor actual en 10
                                    membresiaData = memberBasicData
                                    membrisiaName = membresiaBasicName
                                } 

                                if (membresia === "premium") {
                                    const infoMem = document.getElementById('infoMembresia');
                                    infoMem.innerHTML = infoModalMemPremium;

                                    queTengoMem.innerHTML = memPRemium;
                                    // Selecciona el input por su ID
                                    let inputCantidad = document.getElementById('product-quantity');
                                    inputCantidad.min = 1; 
                                    inputCantidad.value = 1; 
                                    membresiaData = memberPremiumData;
                                    membrisiaName = membresiaPremiumName;
                                }    

                                if (membresia === "custom") {
                                    inputCantidad.min = 1; // Se ajusta el valor mínimo permitido a 1
                                    inputCantidad.value = 1; // Se establece el valor actual en 1
                                    tengoPRem.innerHTML = tengoP                                    
                                    membresiaData = memberPremiumData
                                    membrisiaName = membresiaCustomName
                                } 

                                // Actualizar el nombre de la membresía
                                membresiaDataHtml.innerHTML = membresiaData;
                                membresiaNombreHtml.innerHTML = membrisiaName;

                                // Inicializar los eventos de la membresía Premium
                                let applyAdditionalDiscount = false;
                                let duration = 0

                                document.getElementById('product-quantity').addEventListener('input', calculateMembership);
                                document.getElementById('decrease-quantity').addEventListener('click', () => adjustQuantity(-1));
                                document.getElementById('increase-quantity').addEventListener('click', () => adjustQuantity(1));

                                function calculateMembership() {
                                    // Verificar si memberDuration no es un número
                                    let memberDuration = document.getElementById('membership-duration') || tiempoRestanteMem
                                    //console.log("LE entroooooocalculateMembershipooooooooo44444444memberDuration", memberDuration)
                                    if (typeof memberDuration !== 'number') {
                                        //console.log("LE entrooooooooooooooo44444444memberDuration", memberDuration)
                                        memberDuration.addEventListener('change', calculateMembership);
                                        duration = memberDuration.value
                                    }else{
                                        duration = memberDuration
                                    }

                                    let quantity = parseInt(document.getElementById('product-quantity').value) || 10;

                                    // pone la info a pagar en el modal de proceso del pago
                                    if (membresia === "premium") {
                                        const infoAPAgar = document.getElementById('infoAPagar')
                                        infoAPAgar.innerHTML = `
                                            <div align="left">
                                                <h4> 
                                                    ${infoModalMemPremium}
                                                    <br>
                                                    Añadirás ${quantity} productos durante los ${tiempoRestanteMem} meses que resta de tu membresia por un precio proporcinal:
                                                </h4>
                                            </div>
                                        `;
                                        if (renovarMem) {
                                            const infoAPAgar = document.getElementById('infoAPagar')
                                            infoAPAgar.innerHTML = `
                                            <div align="left">
                                                <h4> 
                                                    ${infoModalMemPremium}
                                                    <br>
                                                    Renovaras ${quantity} productos por un nuevo periodo de ${duration} meses.
                                                    <br>
                                                    por un precio de:
                                                </h4>
                                            </div>
                                        `;
                                            // si la memepresia es remium se aciva el boton de renovarla automaticamente
                                            const formatDateToDDMMYYYY = dateString => new Date(dateString).toLocaleDateString('es-ES');
                                            const formattedDate = formatDateToDDMMYYYY(fechaVencMem);
                                            const renovacionAutoBtn = document.getElementById('RenovarMEmAuto');
                                            const btnMemAuto = `
                                            <div id="RenovarMEmAuto" class="RenMemCont">
                                                <p class="message">
                                                    Tu membresía vence en <strong>${tiempoRestanteMem}</strong> mes/es, el <strong>${formattedDate}</strong>.
                                                </p>
                                                    <button id="sendDataPremium2" type="button" class="btn btn-danger"> 
                                                        Renovar Membresia Urgente
                                                    </button>
                                            </div>
                                            `
                                            renovacionAutoBtn.innerHTML = btnMemAuto
                                            const inputMemCant = document.getElementById('sendDataPremium2')
                                            inputMemCant.addEventListener("click", () => {
                                                const renewUrgent  = document.getElementById('renewUrgent')
                                                // Aquí va el código que se ejecutará al hacer clic
                                                console.log('Se hizo clic en el input de renovar membresía');
                                                renovacionAutoBtn.innerHTML = btnMemAuto
                                                memBasic
                                                queTengoMem.innerHTML = memBasic
                                                renewUrgent.innerHTML = `<h2 style="color:red">Renovacion Membresia Premium</h2>`
                                                const cantidad = document.getElementById('product-quantity')
                                                cantidad.value = totalProductos
                                                quantity = totalProductos
                                                // boton memebresia
                                                const sendDataPremium = document.getElementById('sendDataPremium');
                                                sendDataPremium.innerHTML = ""
                                                sendDataPremium.innerText = 'Renovar Membresía';
                                                sendDataPremium.style.color = 'white';
                                                sendDataPremium.style.fontWeight = 'bold';

                                                let applyAdditionalDiscount = false;

                                                calculateMembership()
                                                document.getElementById('product-quantity').addEventListener('input', calculateMembership);
                                                document.getElementById('decrease-quantity').addEventListener('click', () => adjustQuantity(-1));
                                                document.getElementById('increase-quantity').addEventListener('click', () => adjustQuantity(1));
                                            });                                           
                                        }
                                    }
                                    if (membresia === "basic") {
                                        // esto es del modal
                                        tengoPRem.innerHTML = infoModalMemBasic;
                                        // pone la info a pagar en el modal de proceso del pago
                                        const infoAPAgar = document.getElementById('infoAPagar')
                                        infoAPAgar.innerHTML = `
                                            <div align="left">
                                                <h4> 
                                                    <br>
                                                    Te actualizas a membresia premium con ${quantity} productos diferentes con stock ilimitado, por un periodo de validez de ${duration} meses a partir del pago y con un precio:
                                                </h4>
                                            </div>
                                        `;  
                                    } 

                                    const discountedProductPrice = extraProductPrice * discount;

                                    //console.log("que datos obtengooooooooo de duration", duration)
                                    const finalPrice = (quantity * discountedProductPrice / 12 * duration);

                                    //console.log("cual es el precio postaaaa", quantity, extraProductPrice, duration, finalPrice)

                                    const precioUSS = finalPrice.toFixed(2);
                                    const precioEnPesos = (parseFloat(precioUSS) * parseFloat(cotiDolar)).toFixed(2);

                                    const precioPEsos = precioUSS * cotiDolar 

                                    // Formateo de los precios para que tengan puntos como separadores de miles y comas como separadores decimales
                                    const precioUSSFormateado = parseFloat(precioUSS).toLocaleString('es-AR', {
                                        minimumFractionDigits: 2,
                                        maximumFractionDigits: 2,
                                        useGrouping: true
                                    });

                                    const precioEnPesosFormateado = parseFloat(precioEnPesos).toLocaleString('es-AR', {
                                        minimumFractionDigits: 2,
                                        maximumFractionDigits: 2,
                                        useGrouping: true
                                    });
                                    //  datos que van directo al Cpanlhtml
                                    const dataPRecios = `
                                        <div align="left">
                                            <h6 style="color:red"><strong>Precio sin descuento c/prod: $${extraProductPrice} dólares</strong></h6>
                                            <h6 style="color:red"><strong>Descuento del: ${discount * 100}% </strong></h6>
                                            <h6 style="color:red"><strong>Precio con descuento c/prod: $${discountedProductPrice} dólares</strong></h6>
                                        </div>
                                        <div align="center">    
                                            <br>
                                            <h3 style="color:green"><strong>Precio: $${precioUSSFormateado} dólares</strong></h3>
                                            <h3 style="color:green"><strong>Precio: $${precioEnPesosFormateado} Pesos</strong></h3>
                                            <p>Precio en moneda local</p>
                                        </div>
                                    `;
                                    const meteElPRecio = document.getElementById('membership-value')
                                    meteElPRecio.innerHTML = dataPRecios

                                    // sube esta data para procesala en el modal de pagos de MP
                                    dataPayO = { precioPEsos, quantity, duration };
                                    sessionStorage.setItem('dataPayOSes', JSON.stringify(dataPayO));


                                    const precioDolaresidos = precioUSS * 1
                                    const precioPecificades = precioEnPesos * 1
                                    const precioDolaresidos23 = parseFloat(precioDolaresidos).toLocaleString('es-AR', {
                                        minimumFractionDigits: 2,
                                        maximumFractionDigits: 2,
                                        useGrouping: true
                                    });

                                    // membresia Premium va al modal
                                    const precioPecificades32 = parseFloat(precioPecificades).toLocaleString('es-AR', {
                                        minimumFractionDigits: 2,
                                        maximumFractionDigits: 2,
                                        useGrouping: true
                                    });
                                    const dataPRecioModal = `
                                        <br>
                                        <h3 style="color:green"><strong>Precio: $${precioDolaresidos23} dólares</strong></h3>
                                        <h3 style="color:green"><strong>Precio: $${precioPecificades32} Pesos</strong></h3>
                                        <p>Precio en moneda local</p>
                                        <br>
                                    `;
                                    const meteElPRecioEnModal = document.getElementById('preciosModalCpanel')
                                    meteElPRecioEnModal.innerHTML = dataPRecioModal
                                }
                                function toggleIncludes() {
                                    const includesElement = document.getElementById('includes');
                                    includesElement.classList.toggle('includes-hidden');
                                    includesElement.classList.toggle('includes-active');
                                }
                                function applyDiscount() {
                                    const discountCode = document.getElementById('discount-code').value;
                                    const statusElement = document.getElementById('discount-status');
                                    if (discountCode === 'DESCUENTO10') {
                                        statusElement.innerText = 'Código de descuento aplicado.';
                                        applyAdditionalDiscount = true;
                                    } else {
                                        statusElement.innerText = 'Código de descuento inválido.';
                                        applyAdditionalDiscount = false;
                                    }
                    
                                    calculateMembership();
                                }
                                function adjustQuantity(amount) {
                                    const quantityInput = document.getElementById('product-quantity');
                                    quantity = parseInt(quantityInput.value);
                                    if (membresia === "basic") {
                                        //console.log("Que es cuantity Basic", quantity)
                                        quantity = Math.max(10, quantity + amount);
                                        quantityInput.value = quantity;
                                        calculateMembership();
                                    } else {
                                        if (renovarMem) {
                                            //console.log("Que es cuantity Premium renovar",amount, quantity)
                                            quantity = Math.max(1, (quantity + amount));
                                            quantityInput.value = quantity;
                                            calculateMembership();
                                        }
                                        else {
                                            //console.log("Que es cuantity Premium", quantity)
                                            quantity = Math.max(1, (quantity + amount));
                                            quantityInput.value = quantity;
                                            calculateMembership();
                                        }
                                    }
                                }
                                calculateMembership()
                            });
                        </script>
                    </div>
                </div>                
                <!-- Marketing --> 
                <div id="Marketing" class="container-xxl tab-pane fade" align="center" style="padding-top: 2rem;">
                    <h2 id="ponerDomURl">Planifica tus campañas de marketing & comunicación.</h2>
                    <script>
                        if (dataOwner) {
                            // Función asíncrona para obtener el dominio
        //re envia al dominio del cliente o al de UTF Cpanel
        async function dominioURLCpanelFront() {
            const dataOwner = JSON.parse(sessionStorage.getItem('dataOwner')) || null;
            const dataBasic = JSON.parse(sessionStorage.getItem('basicData')) || null;
            //console.log("Entro a buscar el domioURL",dataBasic.urlServer)
            let dominioUrls
            let cheqDom = dataOwner?.dominio || false;
            if (cheqDom) {
                dominioUrls = `${dataOwner.urlOwner}/indexEcomm.html`;
                // Si necesitas redirigir a la URL almacenada en 'dominio' después de recargar, puedes hacer lo siguiente:
                //console.log("********Entro por tiene dominio", dominioUrls)
                return dominioUrls;
            } else {
                dominioUrls = dataBasic.urlServer + dataOwner.urlOwner;
                // Si necesitas redirigir a la URL almacenada en 'dominio' después de recargar, puedes hacer lo siguiente:
                //console.log("Entro por NO tiene dominio desde el index ecommerce linea 3274", dominioUrls)
                return dominioUrls;
            }
        }                             
                            // Función asíncrona que llama a dominioURLCpanel
                            async function inicializar258() {
                                const ponerla = document.getElementById("ponerDomURl");
                                let urlDominion12 = await dominioURLCpanelFront();

                                ponerla.innerHTML = `
                                <h2 id="ponerDomURl">Planifica tus campañas de marketing & comunicación.</h2>
                                <br>
                                    <div class="alert alert-light" role="alert">
                                        <h5 class="">
                                            Este es el link de tu tienda online: <br> 
                                            <a href="${urlDominion12}">${urlDominion12}</a>; <br> 
                                            Cópialo y pégalo diariamente en tus redes sociales.
                                        </h5>
                                    </div>
                                `;
                            }
                            // Llamar a la función inicializar
                            inicializar258();
                        }
                    </script>
                    <!-- Sub Nav Tabs -->
                    <ul id="ulMark" class="container-xxl nav nav-tabs w-100" style="background:transparent; margin-top:0rem">
                        <li class="nav-item">
                            <a class="nav-link active" data-bs-toggle="tab" href="#promos">Promociones & Descuentos</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" href="#statusPromos" >Estados de las promos</a>
                        </li>
                        <li class="nav-item" hidden>
                            <a class="nav-link" data-bs-toggle="tab" href="#linkiRedes" >Link´s a redes sociales</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" href="#news">Agregar Noticias</a>
                        </li>
                    </ul> 
                    <!-- Sub Tab Content -->
                    <div class="container-xxl tab-content m-3" style="position: relative !important;">
                        <!-- tus productos para promocionar -->
                        <div id="promos" class="container-xxl tab-pane active mt-2">
                            <div align="center">
                                <h4>Promociones & Descuentos</h4>
                                <p id="promoXmem"></p>
                                <p id="">
                                    Puedes crear combos o kits combinando varios productos en un combo subiendolo como un producto. Hazlo desde la sección "1 Configuración / 2 Productos / Agregar Productos". Luego promociona estos combos.
                                </p>
                            </div>
                            <script>
                                //const tipoMembresia = dataOwner.tipoMembresia;
                                const promoXmem = document.getElementById('promoXmem');
                                promoXmem.textContent = dataOwner.tipoMembresia === 'basic'
                                    ? 'Tu Membresía Basic te permite poner en promoción hasta 5 productos.'
                                    : 'Tu Membresía Premium te permite poner en promoción todos tus productos.';
                            </script>
                            <div id="busquedaMarke" class="container-xxl tab-pane active" >
                                <!-- Input y elementos para la búsqueda -->
                                <div style="display: flex; align-items: center; justify-content: center; width: 100%;">
                                    <!-- Input y elementos para la búsqueda -->
                                    <div align="center" 
                                        style="display: flex; 
                                        align-items: center; 
                                        justify-content: space-between; 
                                        width: 100%;"
                                        >
                                        <div class="d-flex align-items-center">
                                            <!-- Input de búsqueda -->
                                            <div style="width: 50%; margin-right: 1rem;">
                                                <input 
                                                    placeholder="Buscar producto" 
                                                    type="text" 
                                                    id="searchProductInputXYZ" 
                                                    oninput="displayFilteredProducts()" 
                                                    style="width: 100%; height: 100%;" 
                                                    autocomplete="off"
                                                >
                                            </div>
                                        
                                            <!-- Botón de búsqueda -->
                                            <div style="margin-right: 1rem;">
                                                <a 
                                                    id="searchButton1234" 
                                                    class="fas fa-search" 
                                                    onclick="searchProduct()" 
                                                    style="font-size: 1.5rem; cursor: pointer;"
                                                ></a>
                                            </div>
                                        
                                            <!-- Texto descriptivo -->
                                            <div style="margin-right: 2rem; width: 100% !important">
                                                <p>Busca los productos por nombre o por su código</p>
                                            </div>
                                        
                                            <!-- Select que actuará como un modal para mostrar los productos encontrados -->
                                            <select 
                                                id="foundProductsSelect456" 
                                                size="5" 
                                                onchange="selectProduct()" 
                                                style="width: 170px; height: 100px; color: white; display: none; position: absolute; z-index: 9999999999; margin: auto;"
                                            ></select>
                                        </div>
                                    </div>
                                    <!-- Función para filtrar los productos desde el buscador -->
                                    <script>
                                        // Función para mostrar los productos filtrados
                                        function displayFilteredProducts() {
                                            const inputValue = document.getElementById('searchProductInputXYZ').value.toLowerCase();
                                            const selectProducts = document.getElementById('foundProductsSelect456');
                                            if (ownerPromos.length >= 1) {
                                                selectProducts.innerHTML = '';
                                                // Filtrar productos que contienen el texto ingresado
                                                const filteredProducts = ownerPromos.filter(product => {
                                                    const searchValue = inputValue.toLowerCase();
                                                    return (typeof product.nombreProducto === 'string' && product.nombreProducto.toLowerCase().includes(searchValue)) 
                                                });

                                                // Mostrar productos en el select
                                                filteredProducts.forEach(product => {
                                                    const option = document.createElement('option');
                                                    option.text = product.nombreProducto;
                                                    option.style.color = 'red'; // Color rojo al texto de la opción
                                                    selectProducts.add(option);
                                                });

                                    // Mostrar el select solo si hay productos filtrados y hay al menos una letra en el input
                                    if (filteredProducts.length > 0 && inputValue.length > 0) {
                                        selectProducts.style.display = 'block';
                                        selectProducts.style.position = 'absolute';
                                        const inputElement = document.getElementById('searchProductInputXYZ');
                                        selectProducts.style.top = `${inputElement.offsetTop + inputElement.offsetHeight + 10}px`; // Aparecer 5px debajo del input
                                        selectProducts.style.left = `${inputElement.offsetLeft}px`; // Alinearlo con el input
                                    } else {
                                        selectProducts.style.display = 'none';
                                    }

                                    // Escuchar evento de teclado para ocultar el select cuando se presione la tecla Esc
                                    document.addEventListener('keydown', function(event) {
                                        if (event.key === 'Escape') {
                                            selectProducts.style.display = 'none';
                                        }
                                    });

                                    // Ocultar el select al hacer clic fuera del input o del select
                                    document.addEventListener('click', function(event) {
                                        const inputElement = document.getElementById('searchProductInputXYZ');
                                        const selectProducts = document.getElementById('productResultsXYZ');
                                        
                                        if (!inputElement.contains(event.target) && !selectProducts.contains(event.target)) {
                                            selectProducts.style.display = 'none';
                                        }
                                    });
                                        } 
                                            else {
                                                selectProducts.innerHTML = `<h4>
                                                        Actualmente NO tienes productos.
                                                        <br><br>
                                                        Ingresa en la solapa "Agregar Productos" y agrega al menos uno.
                                                        </h4>
                                                    `;
                                            }
                                        }
                                        
                                        // Función para seleccionar un producto del select
                                        function selectProduct() {
                                            const selectedOption = document.getElementById('foundProductsSelect456').value;
                                            document.getElementById('searchProductInputXYZ').value = selectedOption;
                                            searchProduct();
                                        }
                                        
                                        // Función para buscar y desplazar al producto seleccionado
                                        function searchProduct() {
                                            const inputValue = document.getElementById('searchProductInputXYZ').value;
                                            if (!inputValue) {
                                                mostrarAlerta('Ingrese un producto válido');
                                                return;
                                            }
                                            //console.log("Que inputValue encontro?????????" , inputValue )
                                    // Seleccionar todos los elementos en la página
                                    // Buscar en todos los elementos, seleccionando aquellos que tengan un id
                                    const elementsWithId = Array.from(document.querySelectorAll('h4'));
                                    // Encontrar el primer elemento cuyo id coincide con el valor del input
                                    const productElement = elementsWithId.find(element => element.id.includes(inputValue));
                                            if (productElement) {
                                                // Obtener la posición del elemento y desplazar la ventana suavemente
                                                productElement.scrollIntoView({ behavior: 'smooth', block: 'start' });

                                                // Desplazar todas las capas que puedan tener scroll
                                                const scrollableParents = getScrollableParents(productElement);
                                                scrollableParents.forEach(parent => {
                                                    parent.scrollTop = productElement.getBoundingClientRect().top + parent.scrollTop - parent.getBoundingClientRect().top;
                                                });
                                            } else {
                                                mostrarAlerta('Producto no encontrado');
                                            }

                                            // Ocultar el select después de seleccionar un producto
                                            document.getElementById('foundProductsSelect456').style.display = 'none';
                                        }
                                        
                                        // Función para obtener todos los padres con scroll
                                        function getScrollableParents(element) {
                                            const parents = [];
                                            let parent = element.parentElement;

                                            while (parent) {
                                                const overflowY = window.getComputedStyle(parent).overflowY;
                                                if (overflowY === 'scroll' || overflowY === 'auto') {
                                                    // Obtener la posición del elemento dentro del contenedor
                                                    const rect = element.getBoundingClientRect();
                                                    const parentRect = parent.getBoundingClientRect();
                                                    const scrollTop = parent.scrollTop + rect.top - parentRect.top;

                                                    // Desplazar suavemente el contenedor
                                                    parent.scrollTo({ top: scrollTop, behavior: 'smooth' });
                                                }
                                                parent = parent.parentElement;
                                            }

                                            // Desplazar suavemente la ventana principal
                                            window.scrollTo({ top: element.getBoundingClientRect().top + window.scrollY - 300, behavior: 'smooth' });
                                        }
                                        
                                    </script>
                                    <div id="cantProd23" style="margin: auto !important"></div>
                                </div>
                                <div id="tusProductosEnMarketing" style="border-radius: 2rem !important;">
                                    <h4>Mis Productos</h4>
                                    <p>Buscando tus productos.</p>
                                    <div class="spinner-border text-info" role="status">
                                        <span class="visually-hidden">Loading...</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- estado de las promos -->
                        <div id="statusPromos" class="container-xxl w-100 tab-pane fade p-0">
                            <div class="mt-3">
                                <h4>Estado de tus promociones</h4>
                            </div>
                            <!-- informacion grl de las porrmos -->
                            <div id="infoPromociones" class="container-xxl w-100 m-0 p-0"></div>
                            <!-- todo lo del suitch -->
                            <div class="form-check form-switch btn-sm btn-success p-4 rounded-4" style="width:550px">
                                <label id="changeBLa" class="form-check-label mr-3" for="promoSwitch"></label>
                                <input class="form-check-input ml-3" type="checkbox" id="promoSwitch" style="transform: scale(2);">
                            </div>
                            <!-- es para activar o no el switch  -->
                            <script>
                                const promoSwitch = document.getElementById('promoSwitch');
                                const label = document.getElementById('changeBLa');
                                const activeText = "Tus promociones se ven en la pantalla principal de tu tienda.";
                                const inactiveText = "Agregar las promos a la pantalla principal de tu tienda.";
                            
                                // Inicializar el switch
                                const initSwitch = () => {
                                    promoSwitch.checked = dataOwner.mostrarPromoPPrin;
                                    label.textContent = promoSwitch.checked ? activeText : inactiveText;
                                };
                            
                                // Enviar estado al servidor
                                const sendSwitchState = async () => {
                                    try {
                                        const res = await fetch(`${endpoints[104]}`, {
                                            method: 'POST',
                                            headers: {
                                                'Content-Type': 'application/json',
                                                'Authorization': `Bearer ${jwToken}`
                                            },
                                            body: JSON.stringify({ switchActivo: promoSwitch.checked, userId: idOwner })
                                        });
                                        const data = await res.json();
                                        if (data.success) mostrarExito(data.message);
                                        else mostrarAlerta(data.message);
                                    } catch (error) {
                                        console.error('Error:', error);
                                        mostrarAlerta('Error al enviar los datos al servidor.');
                                    }
                                };
                            
                                // Inicializar el switch y manejar cambios
                                initSwitch();
                                promoSwitch.addEventListener('change', () => {
                                    label.textContent = promoSwitch.checked ? activeText : inactiveText;
                                    sendSwitchState();
                                });
                            </script>
                            <script>
                                function mostrarPromociones() {
                                    const totalPromos = ownerPromos.length;
                                    const promocionesVencidas = ownerPromos.filter(promo => promo.promoVencida).length;
                                    const mensaje = `
                                        <h4 style="color: #4a90e2; font-weight: bold;">
                                            Actualmente cuentas con <span style="color: #27ae60;">${totalPromos}</span> promociones activas.
                                        </h4>
                                        <p style="font-size: 1.1rem; color: #333;">
                                            De ellas, <span style="color: #e74c3c;">${promocionesVencidas}</span> han vencido.
                                            Revisa las vencidas para mantener tus ofertas actualizadas.
                                        </p>`;
                                    document.getElementById('infoPromociones').innerHTML = mensaje;
                                }
                                
                                if (Object.keys(ownerPromos).length !== 0) {
                                    mostrarPromociones();
                                }
                            </script>
                            <style>
                                .alerta-vencida {
                                    position: absolute;
                                    top: 0;
                                    left: 0;
                                    width: 100%;
                                    height: 95%;
                                    background-color: rgba(236, 122, 122, 0.7); /* Color de fondo con opacidad */
                                    color: white;
                                    display: flex;
                                    justify-content: center;
                                    align-items: center;
                                    font-size: 1.5rem;
                                    font-weight: bold;
                                    border-radius: 0.25rem; /* Ajustar según el diseño de la tarjeta */
                                    z-index: 10; /* Asegúrate de que esté por encima del contenido de la tarjeta */
                                }
                            </style>
                            <br>
                            <div id="estadosPromos23" align="center" class="container-xxl w-100 m-0 p-0" style="">
                                <h4>
                                    <br>
                                    Actualmente no tienes ningún producto en promoción. 
                                    <br> 
                                    Ve a la solapa "Promociones & Descuentos" y promociona un producto. 
                                </h4>
                            </div>
                        </div>
                        <!-- agregar y enviar noticias -->
                        <div id="news" class="container-xxl tab-pane fade"><br>
                            <div>
                                <style>
                                    .container {
                                        max-width: 800px;
                                        margin: 0 auto;
                                    }
                                    .news-form, .news-item {
                                        background-color: #f9f9f9;
                                        padding: 20px;
                                        border: 1px solid #ddd;
                                        border-radius: 5px;
                                        margin-bottom: 20px;
                                    }
                                    .news-form h2, .news-item h2 {
                                        margin-top: 0;
                                    }
                                    .news-form input, .news-form textarea {
                                        width: 100%;
                                        padding: 10px;
                                        margin-bottom: 10px;
                                        border: 1px solid #ddd;
                                        border-radius: 5px;
                                    }
                                    .news-form button {
                                        padding: 10px 20px;
                                        border: none;
                                        border-radius: 5px;
                                        background-color: #28a745;
                                        color: #fff;
                                        cursor: pointer;
                                    }
                                    .news-item {
                                        position: relative;
                                        margin: 10px;
                                        flex: 1 0 calc(33.333% - 20px); /* Tres columnas */
                                        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                                        transition: transform 0.2s;
                                    }
                                    .news-item:hover {
                                        transform: scale(1.02);
                                    }
                                    .news-item h3 {
                                        margin: 0;
                                    }
                                    .news-item p {
                                        margin: 10px 0 0;
                                    }
                                    .news-item img {
                                        max-width: 100%;
                                        margin-top: 10px;
                                    }
                                    .news-item .actions {
                                        position: absolute;
                                        top: 20px;
                                        right: 20px;
                                    }
                                    .news-item .actions i {
                                        cursor: pointer;
                                        margin-left: 10px;
                                    }
                                    .news-container {
                                        display: flex;
                                        flex-wrap: wrap;
                                        justify-content: space-between;
                                    }
                                    @media (max-width: 768px) {
                                        .news-item {
                                            flex: 1 0 100%; /* Una columna */
                                        }
                                    }
                                </style>
                                <div class="container">
                                    <div id="resumenNews"></div>
                                    <div class="news-form">
                                        <h2>Agregar Noticia</h2>
                                        <input type="text" id="newsTitle" placeholder="Título de la noticia">
                                        <textarea id="newsBody" class="ckeditor" name="newsBody" rows="5" placeholder="Cuerpo de la noticia"></textarea>
                                        <input type="file" id="newsImage" accept="image/jpeg, image/jpg, image/png, image/bmp, image/webp">
                                        <button onclick="addNews()">Agregar</button>
                                    </div>
                                    <div id="newsContainer" class="news-container"></div>
                                </div>
                                <script>
                                    // Inicializar CKEditor en el textarea con id "newsBody"
                                    let editorInstancesNews = {};
                                    let ownerMensajess = []
                                    if (Object.keys(ownerMensajes).length !== 0) {
                                        ownerMensajess = ownerMensajes.filter(mensaje => mensaje.nweNoticias === true) || []; // Filtramos solo los mensajes 
                                        // El objeto no está vacío
                                    }
                                    ClassicEditor
                                        .create(document.querySelector('#newsBody'))
                                        .then(editor => {
                                            editorInstancesNews['newsBody'] = editor;
                                            //console.log('CKEditor inicializado para newsBody');
                                        })
                                        .catch(error => {
                                            console.error('Error al inicializar CKEditor:', error);
                                        });
                                    //console.log("Que tiene mensajes ownerMensajes", ownerMensajes);
                                    try {
                                        if (ownerMensajes.length >= 1) {
                                            renderNews(ownerMensajes);
                                        }
                                    } catch (error) {
                                        console.error('Error al obtener noticias:', error);
                                    }

                                    function renderNews(newsList) {
                                        //console.log("Noticias para renderizar: ", newsList);
                                        const newsContainer = document.getElementById('newsContainer');
                                        newsContainer.innerHTML = '';
                                        newsList.forEach((news) => {
                                            if (news.nweNoticias) {
                                                const id9874 = news._id;
                                                newsContainer.innerHTML += `
                                                    <div class="news-item">
                                                        <h3>${news.subjectCliente}</h3>
                                                        <p>${news.messageCliente}</p>
                                                        ${news.urlImg ? `<img src="${news.urlImg}" alt="Noticia Imagen">` : ''}
                                                        <div class="actions">
                                                            <i class="fas fa-trash" onclick="confirmDeleteNews('${id9874}')"></i>
                                                        </div>
                                                    </div>
                                                `;
                                            }
                                        });
                                    }

                                    async function addNews() {
                                        // Obtener la fecha de hoy en el formato adecuado
const hoy = new Date();
const hoyStr = hoy.toISOString().split('T')[0]; // Formato YYYY-MM-DD

// Verificar si hay alguna fecha en ownerMensajess que coincida con hoy
const existeMensajeHoy = ownerMensajess.some(mensaje => {
    const fechaMensaje = new Date(mensaje.date).toISOString().split('T')[0];
    return fechaMensaje === hoyStr; // Compara solo la parte de la fecha
});

if (existeMensajeHoy && dataOwner.tipoMembresia == "basic") {
    mostrarAlerta("Ya has enviado una noticia a tus clientes hoy. <br> Evita saturarlos con información.");
    return
}

                                        if (ownerMensajess.length >= 10 ) {
                                            mostrarAlerta("Ya tiene 10 noticias activas, elimina una para enviar una nueva.")
                                        }
                                        else{
                                        mostrarModalLoading()
                                        let title = document.getElementById('newsTitle').value;
                                        let imageFile = document.getElementById('newsImage').files[0];
                                        let body = "";

                                        const newsEditor = editorInstancesNews['newsBody'];
                                        if (newsEditor) {
                                            body = newsEditor.getData();
                                            console.log('Contenido del editor:', body);
                                        } else {
                                            console.error('CKEditor no está inicializado');
                                        }

                                        console.log('Título:', title);
                                        console.log('Cuerpo:', body);
                                        console.log('Archivo de imagen:', imageFile);

                                        if (!title || !body) {
                                            mostrarAlerta('Debes incluir un Título y un Mensaje');
                                            return;
                                        }

                                        if (imageFile && imageFile.size > 1024 * 1024) {
                                            mostrarAlerta('La imagen debe ser menor a 1MB');
                                            return;
                                        }

                                        if (imageFile && !['image/jpeg', 'image/jpg', 'image/png', 'image/bmp', 'image/webp'].includes(imageFile.type)) {
                                            mostrarAlerta('Solo se permiten imágenes JPG, JPEG, PNG, BMP y WEBP');
                                            return;
                                        }

                                        const formData = new FormData();
                                        formData.append('title', title);
                                        formData.append('body', body);
                                        formData.append('image', imageFile);
                                        formData.append('idOwner', idOwner);
                                        formData.append('nombreEmrpesa', ecommerceName);
                                        formData.append('urlServer', urlServer);
                                        formData.append('tipoMembresia', tipoMembresia);
                                        formData.append('clientes', JSON.stringify(clientes)); // Convertir a JSON
                                        formData.append('flagNews', true );

                                        try {
                                            // agrega el flag en sessionSt
                                            // sessionStorage.setItem("flagNews", JSON.stringify({ flagNews: true }));

                                            console.log("Llego hasta aqui")
                                            const response = await fetch(`${endpoints[29]}`, {
                                                method: 'POST',
                                                headers: {
                                                    'Authorization': `Bearer ${jwToken}`
                                                },
                                                body: formData
                                            });

                                            const data = await response.json();
                                            console.log('Respuesta del servidor:', data);
                                            ocultarModalLoading()
                                            if (data.success) {
                                                mostrarExito(data.message);
                                                setTimeout(async () => {
                                                    await actualizarData();
                                                }, 1000);
                                            } else {
                                                mostrarAlerta('Error al agregar noticia: ' + data.message);
                                                setTimeout(async () => {
                                                    await actualizarData();
                                                }, 1000);
                                            }
                                        } catch (error) {
                                            console.error('Error al agregar noticia:', error);
                                            mostrarAlerta('Error al agregar noticia: ' + error);
                                            setTimeout(async () => {
                                                await actualizarData();
                                            }, 1000);
                                        }
                                    }
                                    }

                                    function confirmDeleteNews(id) {
                                        if (confirm('¿Estás seguro de que deseas eliminar esta noticia?')) {
                                            deleteNews(id);
                                        }
                                    }

                                    async function deleteNews(id) {
                                        console.log("Eliminar noticia: ", id);
                                        try {
                                            const response = await fetch(`${endpoints[30]}`, {
                                                method: 'POST',
                                                headers: {
                                                    'Authorization': `Bearer ${jwToken}`
                                                },
                                                body: JSON.stringify({ id })
                                            });
                                            const data = await response.json();
                                            console.log('Respuesta del servidor al eliminar noticia:', data);

                                            if (data.success) {
                                                mostrarExito(data.message);
                                                setTimeout(async () => {
                                                    await actualizarData();
                                                }, 1000);
                                            } else {
                                                mostrarAlerta('Error al eliminar noticia: ' + data.message);
                                                setTimeout(async () => {
                                                    await actualizarData();
                                                }, 1000);
                                            }
                                        } catch (error) {
                                            console.error('Error al eliminar noticia:', error);
                                            mostrarAlerta('Error al eliminar noticia: ' + error);
                                            setTimeout(async () => {
                                                await actualizarData();
                                            }, 1000);
                                        }
                                    }

                                //debe enocntrar solo lso que tienen en true nweNoticias
                                    // Función para calcular la diferencia en días entre dos fechas
                                    function calcularDiasDiferencia(fecha) {
                                        const hoy = new Date();
                                        const fechaMensaje = new Date(fecha);
                                        const diferenciaTiempo = hoy - fechaMensaje;
                                        const diferenciaDias = diferenciaTiempo / (1000 * 60 * 60 * 24); // Convertimos de milisegundos a días
                                        return Math.floor(diferenciaDias);
                                    }

                                    // Función para mostrar un mensaje de alerta al usuario
                                    function mostrarAlerta(mensaje) {
                                        mostrarAlerta(mensaje); // Aquí puedes cambiar esta función para usar tu sistema de alertas personalizado
                                    }

                                    // Función principal para gestionar los mensajes
                                    async function gestionarMensajes() {
                                        const maxMensajes = 10; // Máximo de 10 mensajes
                                        const vidaUtilDias = 10; // Vida útil de 10 días
                                        let mensajesValidos = 0;

                                        if (ownerMensajess.length > 0) {
                                            //console.log("vffvfbvfdbvfdbfgd")
                                            // Iteramos sobre los mensajes
                                            ownerMensajess.forEach(mensaje => {
                                                const diasPasados = calcularDiasDiferencia(mensaje.fecha);
                                                if (diasPasados > vidaUtilDias) {
                                                    // Si el mensaje tiene más de 10 días, se borra
                                                    //console.log("vffvfbvfdbvfdbfgd00000000000000000000000", mensaje._id)
                                                    deleteNews(mensaje._id);
                                                } else {
                                                    mensajesValidos++; // Contamos solo los mensajes válidos (menos de 10 días)
                                                }
                                            });

                                            // Mensaje para mostrar en el DOM
                                            let mensajeHTML = '';

                                            if (mensajesValidos > 0) {
                                                mensajeHTML = `
                                                    <p>
                                                        ¡Tienes <strong>${mensajesValidos}</strong> mensajes en tu bandeja! 
                                                        <br> 
                                                        Recuerda que solo puedes almacenar un máximo de <strong>10 mensajes</strong> a la vez.
                                                    </p>
                                                    <p>
                                                        Cada mensaje tiene una vida útil de <strong>10 días</strong>. Los mensajes que superen este tiempo serán eliminados automáticamente.
                                                    </p>
                                                `;
                                            } else {
                                                mensajeHTML = `<p>No tienes mensajes nuevos.</p>`;
                                            }

                                            // Actualizamos el contenido del resumen
                                            document.getElementById('resumenNews').innerHTML = mensajeHTML;
                                        } else {
                                            // No hay mensajes
                                            document.getElementById('resumenNews').innerHTML = `<h5>No has enviado noticias a tus clientes. <br> Con membresia basic solo puedes enviar una al dia.</h5>`;
                                        }
                                    }

                                    // Llamamos a la función principal al cargar la página
                                    gestionarMensajes();

                                </script>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Estado de envios -->
                <div id="envios" class="tab-pane fade" style="padding-top: -2rem;">
                    <div>
                        <div id="bajarEnviosResoponsive" class="mt-4 text-center">
                            <h3>Estado de tus envíos</h3>
                            <h4 id="cantPedEntre4d5e6f">No tienes envíos pendientes</h4>
                            <div class="row align-items-center justify-content-center mb-3">
                                <!-- Filtro por estado y búsqueda a la izquierda -->
                                <div class="col-md-4">
                                    <div class="">
                                        <label for="estadoEnvio" class="form-label">Ordenar por su estado de entrega:</label>
                                        <select id="estadoEnvio" class="form-control" onchange="filtrarPorEstado()">
                                            <option value="">Selecciona un estado</option>
                                            <option value="Armando su pedido">Armando su pedido</option>
                                            <option value="Pedido en Camino">Pedido en Camino</option>
                                            <option value="Pedido Entregado y NO cobrado">Pedido Entregado y NO cobrado</option>
                                            <option value="Pedido Cancelado">Pedido Cancelado</option>
                                            <option value="Pedido Entregado y Cobrado">Pedido Entregado y Cobrado</option>
                                        </select>
                                    </div>
                                    
                                    <div class="">
                                        <label for="buscarPedido">Buscar pedido:</label>
                                        <input type="text" class="form-control" id="buscarPedido" placeholder="Ingresa el código del pedido" oninput="buscarPedido()">
                                    </div>
                                </div>
                        
                                <!-- Botón de reiniciar en el medio -->
                                <div class="col-md-2 text-center">
                                    <button type="button" class="btn btn-outline-secondary mt-2" id="btnReiniciar" onclick="reiniciarFiltros()"> <i class="fas fa-sync-alt"></i></button>
                                </div>
                        
                                <!-- Filtros de fechas a la derecha -->
                                <div class="col-md-4">
                                    <div class="">
                                        <label for="fechaDesde" class="mb-0">Desde:</label>
                                        <input type="date" class="form-control mt-0" id="fechaDesde" onchange="filtrarPorFechas()">
                                    </div>
                                    <div class="">
                                        <label for="fechaHasta" class="mb-0">Hasta:</label>
                                        <input type="date" class="form-control mt-0" id="fechaHasta" onchange="filtrarPorFechas()">
                                    </div>
                                </div>
                            </div>
                            <div id="cantFiltrata" class="card-container">
                                <h4>Filtra lo que necesites</h4>
                            </div>
                        </div>
                        <div id="ventas-9564s0t1u" class="card-container">
                            <h2>A la fecha no tienes ningún pedido para entregar</h2>
                        </div>
                    </div>
                    <script>
                        let timeoutId = null;
                        let salesFiltrades = 0
                        // Suponiendo que 'dataOwner' es un objeto global que contiene las ventas
                        let ventasOwner = [...ventas]; // Copia inicial para las ventas en propiedad
                        //console.log("Que encuentra en ventas???????", ventasOwner)
                        const cantPEdidoNOEntregado = ventas.filter(pedido => pedido.statusEnvio !== "Pedido Entregado y Cobrado");
                        const pendEntrega = document.getElementById('cantPedEntre4d5e6f');
                        pendEntrega.innerHTML = `<h4>Actualmente tienes ${cantPEdidoNOEntregado.length} pedidos sin entregar. <br> Por favor, actualízalos uno por uno inmediatamente.</h4>`;

                        function renderPedidos(ventasOwner) {
                            let pedidos = ventasOwner
                            const contenedor  = document.getElementById('ventas-9564s0t1u');
                            contenedor.innerHTML = ''; // Limpiar el contenedor

                            if (pedidos.length === 0) {
                                contenedor.innerHTML = '<h2>A la fecha no tienes ningún pedido para entregar</h2>';
                                return;
                            }

                            const pedidosOrdenados = pedidos.sort((a, b) => new Date(b.fecha) - new Date(a.fecha)); // Ordenar por fecha más reciente

                            pedidosOrdenados.forEach(pedido => {
                                // Crear una columna para la tarjeta
                                const col7 = document.createElement('div');
                                col7.style.margin = '5px'; // Margen de 5px

                                // Crear la tarjeta
                                const card7 = document.createElement('div');
                                card7.classList.add('card', 'h-100', 'text-left');
                                card7.style.width = 'calc(160px + 100px)';
                                card7.style.height = 'auto';
                                card7.style.margin = '5px'; // Margen de 5px

                                // Crear el encabezado de la tarjeta con el nombre del cliente
                                const cardHeader7 = document.createElement('div');
                                cardHeader7.classList.add('card-header');
                                cardHeader7.textContent = `Nombre del cliente: ${pedido.nombreCli}`;
                                cardHeader7.style.textAlign = "center";
                                card7.appendChild(cardHeader7);

                                // Crear el cuerpo de la tarjeta
                                const cardBody8 = document.createElement('div');
                                cardBody8.classList.add('card-body');

// Mostrar la imagen del cliente
const imgProd = pedido.imgCli || 'images/usuario.png'; // Imagen por defecto si no existe
const imgContainer = document.createElement('div'); // Crear un contenedor para la imagen
imgContainer.classList.add('d-flex', 'justify-content-center'); // Alinear la imagen al centro usando Bootstrap

const imagen879 = document.createElement('img');
imagen879.src = imgProd;
imagen879.alt = `Imagen del logo del cliente`;
imagen879.style.borderRadius = "100%";
imagen879.style.width = "80px";
imagen879.style.height = "80px";

imgContainer.appendChild(imagen879); // Añadir la imagen al contenedor centrado
cardBody8.appendChild(imgContainer); // Añadir el contenedor al cardBody

                                // Mostrar código de pedido y fecha
                                const codigoPedido = document.createElement('p');
                                codigoPedido.textContent = `Código del pedido: ${pedido.codigoPedido}`;
                                codigoPedido.classList.add('mt-4');
                                cardBody8.appendChild(codigoPedido);

                                // Mostrar cantidad de productos
                                const cantPedido = document.createElement('p');
                                cantPedido.textContent = `Cantidad de productos: ${pedido.listaProductos.length}`;
                                cardBody8.appendChild(cantPedido);

                                // Mostrar fecha
                                const fecha = document.createElement('p');
                                const fechaFormato = new Date(pedido.fecha).toLocaleDateString('es-ES'); // Formato dd/mm/yyyy
                                fecha.textContent = `Fecha: ${fechaFormato}`;
                                cardBody8.appendChild(fecha);

                                // Mostrar estado del envío
                                const estadoEnvio = document.createElement('h5');
                                estadoEnvio.innerHTML = `Estado del envío:<br>${pedido.statusEnvio}`;
                                estadoEnvio.style.height = '100px'; // Establecer alto fijo
                                estadoEnvio.style.overflow = 'hidden'; // Opcional: Para manejar contenido que exceda el alto
                                estadoEnvio.style.display = 'flex'; // Opcional: Centrar verticalmente
                                estadoEnvio.style.alignItems = 'center'; // Opcional: Centrar verticalmente
                                cardBody8.appendChild(estadoEnvio);

                                // Crear un select para cambiar el estado del envío
                                const selectEstado = document.createElement('select');
                                selectEstado.classList.add('form-select', 'text-start');
                                selectEstado.innerHTML = `
                                    <option value="Armando su pedido" ${pedido.statusEnvio === 'Armando su pedido' ? 'selected' : ''}>Armando su pedido</option>
                                    <option value="Pedido en Camino" ${pedido.statusEnvio === 'Pedido en Camino' ? 'selected' : ''}>Pedido en Camino</option>
                                    <option value="Pedido Entregado y NO cobrado" ${pedido.statusEnvio === 'Pedido Entregado y NO cobrado' ? 'selected' : ''}>Pedido Entregado y NO cobrado</option>
                                    <option value="Pedido Cancelado" ${pedido.statusEnvio === 'Pedido Cancelado' ? 'selected' : ''}>Pedido Cancelado</option>
                                    <option value="Pedido Entregado y Cobrado" ${pedido.statusEnvio === 'Pedido Entregado y Cobrado' ? 'selected' : ''}>Pedido Entregado y Cobrado</option>
                                `;
                                cardBody8.appendChild(selectEstado);

                                

                                // Agregar el cuerpo de la tarjeta a la tarjeta
                                card7.appendChild(cardBody8);
                                col7.appendChild(card7);
                                contenedor.appendChild(col7);

// Botón para actualizar el estado
const cardFooterEnv = document.createElement('div');
cardFooterEnv.classList.add('card-footer', 'text-center');

const buttonActualizar = document.createElement('button');
buttonActualizar.classList.add('btn', 'btn-primary'); // w-100 para ocupar todo el ancho
buttonActualizar.textContent = 'Actualizar Envio';
buttonActualizar.addEventListener('click', () => {
    mostrarModalLoading()
    actualizarEstadoEnvioGH78(pedido.codigoPedido, selectEstado.value);
});

cardFooterEnv.appendChild(buttonActualizar);
card7.appendChild(cardFooterEnv);

                            });
                        }
                        function actualizarEstadoEnvioGH78(codigoPedido, nuevoEstado) {
                            // Actualiza el estado del pedido en la estructura de datos
                            ventasOwner = ventasOwner.map(pedido => {
                                if (pedido.codigoPedido === codigoPedido) {
                                    return { ...pedido, statusEnvio: nuevoEstado };
                                }
                                return pedido;
                            });

                            // Re-renderiza las tarjetas con el estado actualizado
                            //renderPedidos();
                            // Llamada a la función para actualizar el estado del envío
                            // Enviar la solicitud al servidor
                            //console.log("77777777777777777", tranposterUser)
                            fetch(`${endpoints[130]}`, { // Sustituir con la URL real del servidor
                                method: 'POST',
                                headers: {
                                    'Authorization': `Bearer ${jwToken}`,            
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({
                                    idOwner,
                                    statusEnvio: nuevoEstado,
                                    codigoPedido: codigoPedido,
                                    tranposterUser
                                })
                            })
                            .then(response => response.json())
                            .then(data => {
                                ocultarModalLoading()
                                // Mostrar éxito y alerta con la respuesta del servidor
                                mostrarExito(data.message);
                                setTimeout(async () => {
                                    await actualizarData()
                                }, 1000);
                            })
                            .catch(error => {
                                console.error('Error al actualizar el estado del envío:', error);
                                mostrarAlerta(error);
                                setTimeout(async () => {
                                    await actualizarData()
                                }, 1000);
                            });

                        }

                        // Filtrar las ventas según los criterios
                        function filtrarVentas(estado, codigo, desde, hasta) {
                            console.log("Entrando al filtrado con:", estado, codigo, desde, hasta);

                            // Filtrar ventasOwner con validación de estado, código y fechas
                            return ventasOwner.filter(pedido => {
                                const fechaPedido = new Date(pedido.fecha);
                                const fechaDesdeValid = desde ? new Date(desde) : null;
                                const fechaHastaValid = hasta ? new Date(hasta) : null;

                                // Validar estado, código y fechas
                                const estadoValido = !estado || pedido.statusEnvio === estado;
                                const codigoValido = !codigo || pedido.codigoPedido.toLowerCase().includes(codigo.toLowerCase());
                                const fechaValida = (!fechaDesdeValid || fechaPedido >= fechaDesdeValid) &&
                                                    (!fechaHastaValid || fechaPedido <= fechaHastaValid);

                                return estadoValido && codigoValido && fechaValida; // Solo devuelve los pedidos válidos
                            });
                        }
                        // Filtrar Función para renderizar según filtro por estado
                        function filtrarPorEstado() {
                            const estadoSeleccionado = document.getElementById('estadoEnvio').value;
                            const pedidosFiltrados = filtrarVentas(estadoSeleccionado, '', '', '');
                            console.log("Que devuelve el filtro?????",pedidosFiltrados )
                            renderPedidos(pedidosFiltrados); // Pasar array filtrado a renderizar
                            salesFiltrades = pedidosFiltrados.length;
                            const filtrados = document.getElementById('cantFiltrata');
                            filtrados.innerHTML = `<h4>Se encontraron ${salesFiltrades} pedidos.</h4>`;
                        }
                        // Filtrar Función para buscar por código de pedido
                        function buscarPedido() {
                            const codigoPedido = document.getElementById('buscarPedido').value.toLowerCase();
                            const pedidosFiltrados = filtrarVentas('', codigoPedido, '', '');
                            renderPedidos(pedidosFiltrados);
                            salesFiltrades = pedidosFiltrados.length;
                            const filtrados = document.getElementById('cantFiltrata');
                            filtrados.innerHTML = `<h4>Se encontraron ${salesFiltrades} pedidos.</h4>`;

                        }
                        // Filtrar Función para filtrar por fechas
                        function filtrarPorFechas() {
                            const fechaDesde = document.getElementById('fechaDesde').value;
                            const fechaHasta = document.getElementById('fechaHasta').value;
                            const pedidosFiltrados = filtrarVentas('', '', fechaDesde, fechaHasta);
                            renderPedidos(pedidosFiltrados);
                            salesFiltrades = pedidosFiltrados.length;
                            const filtrados = document.getElementById('cantFiltrata');
                            filtrados.innerHTML = `<h4>Se encontraron ${salesFiltrades} pedidos.</h4>`;
                        }
                        // Función para reiniciar filtros y mostrar todas las ventas
                        function reiniciarFiltros() {
                            document.getElementById('estadoEnvio').value = '';
                            document.getElementById('buscarPedido').value = '';
                            document.getElementById('fechaDesde').value = '';
                            document.getElementById('fechaHasta').value = '';
                            salesFiltrades = ventas.length;
                            const filtrados = document.getElementById('cantFiltrata');
                            filtrados.innerHTML = `<h4>Se encontraron ${salesFiltrades-1} pedidos.</h4>`;

                            renderPedidos(ventasOwner); // Mostrar todas las ventas
                        }

                        // Render inicial de todas las ventas
                        renderPedidos(ventasOwner);


                    </script>
                </div>
                <!-- Control de stock -->
                <div id="stock" class="container-xxl tab-pane fade w-100" style="padding-top: 1rem;">
                    <div class="w-100">
                        <div class="w-100" align="center">
                            <!-- Buscador y filtro por fechas -->
                            <h3 id="responBajarStock">Estado de tus productos</h3><br>
                            <h4 id="cantdeProdA1B2C3">No tienes productos en stock</h4>
                            <script>           
                                if (ownerProducts.length >= 1) {
                                    const cantP = document.getElementById("cantdeProdA1B2C3");
                                    cantP.innerHTML = `<h4>Tienes ${ownerProducts.length} productos en stock</h4>`;
                                }
                            </script>
                            <br>
                            <div style="margin-left: 4rem" class="d-flex justify-content-center align-items-center" align="center">
                                <!-- Buscador -->
                                <div class="align-items-center" align="center">
                                    <p>Buscar producto por nombre o codigo</p>
                                    <div class="d-flex align-items-center">
                                        <input placeholder="Buscar producto" type="text" id="inputBuscarProductoA1B2C3" oninput="filtrarPorNombreA1B2C3()" class="form-control" style="width:150px;">
                                        <a class="fas fa-search" onclick="filtrarPorNombreA1B2C3()" style="font-size:1.5rem; margin: 1rem;"></a>
                                    </div>
                                    <select id="selectProductosEncontradosA1B2C3" size="5" onchange="seleccionarProductoA1B2C3()" class="form-select" style="width:150px; display:none; position: absolute; z-index: 999999;"></select>
                                </div>
                                <div class="col-auto" style="margin: auto 2rem auto 6rem;">
                                    <button class="btn btn-outline-secondary" onclick="reiFiltroFechasA1B2C3()">
                                        <i class="fas fa-sync-alt"></i>
                                    </button>
                                </div>
                                <!-- Filtro por fechas -->
                                <div>
                                    <p>Filtrar y ordenar por fechas</p>
                                    <div class="row align-items-center">
                                        <div class="col">
                                            <label for="fechaDesdeA1B2C3">Desde:</label>
                                            <input type="date" id="fechaDesdeA1B2C3" class="form-control" onchange="filtrarPorFechas654654564()">
                                        </div>
                                        <div class="col">
                                            <label for="fechaHastaA1B2C3">Hasta:</label>
                                            <input type="date" id="fechaHastaA1B2C3" class="form-control" onchange="setTimeout(filtrarPorFechas654654564, 2000)">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br>
                        <div id="contenedorProductosA1B2C3" class="card-container">
                            <h2>A la fecha no tienes ningún producto en stock</h2>
                        </div>
                        <br><br><br>
                        <div class="card-footer fixed-bottom bg-white opacity-8" style="z-index: 9999999; padding: 1rem; margin-top: 1rem">
                                <button class="btn btn-primary" onclick="exportarProdsAExcel(ownerProducts)">Descargar en Excel</button>
                        </div>                        
                        <style>
                            .card-container {
                                display: flex;
                                flex-wrap: wrap;
                                gap: 20px; /* Espacio entre las tarjetas */
                                justify-content: center;
                            }

                            .custom-cardA1B2C3 {
                                border: 1px solid #ddd;
                                border-radius: 8px;
                                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                                padding: 1rem;
                                width: calc(100% / 4 - 40px); /* 4 tarjetas por fila en pantallas grandes */
                                margin: 5px;
                                transition: background-color 2s, box-shadow 2s, transform 2s !important;
                            }

                            .custom-cardA1B2C3:hover {
                                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
                                background-color: white;
                                transform: scale(1.02);
                            }

                            .custom-card-headerA1B2C3 {
                                font-size: 1.25rem;
                                font-weight: bold;
                                margin-bottom: 0.5rem;
                                text-align: center;
                            }

                            .custom-card-bodyA1B2C3 {
                                display: flex;
                                flex-direction: column;
                                align-items: center;
                            }

                            .custom-card-bodyA1B2C3 img {
                                width: 200px; /* 20px más ancho que la imagen */
                                height: 100px;
                                margin-bottom: 1rem;
                            }

                            .custom-selectA1B2C3 {
                                margin-top: 1rem;
                            }

                            .custom-buttonA1B2C3 {
                                margin-top: 1rem;
                            }

                            .cantidadA1B2C3 {
                                display: flex;
                                align-items: center;
                                margin-top: 1rem;
                            }

                            .cantidadA1B2C3 p {
                                margin: 0 10px;
                                font-size: 1.25rem;
                                font-weight: bold;
                            }

                            .cantidadA1B2C3 input {
                                width: 100px;
                                text-align: center;
                            }

                            .cantidadA1B2C3 .btn {
                                font-size: 1.25rem;
                            }

                            .estado-cantidadA1B2C3 {
                                margin-top: 1rem;
                                font-weight: bold;
                            }

                            .verde { color: green; }
                            .amarillo { color: orange; }
                            .rojo { color: red; }

                            @media (max-width: 768px) {
                                .custom-cardA1B2C3 {
                                    width: calc(50% - 20px); /* 2 tarjetas por fila en pantallas medianas */
                                }
                            }

                            @media (max-width: 480px) {
                                .custom-cardA1B2C3 {
                                    width: calc(100% - 20px); /* 1 tarjeta por fila en pantallas pequeñas */
                                }
                            }
                        </style>
                    </div>
                    <script>
                        // Verificar si hay productos en stock
                        //console.log('Array ownerProducts:', ownerProducts);
                        if (ownerProducts.length === 0) {
                            console.log('No hay productos en stock.');
                        }

                        // Función para renderizar los productos en tarjetas
                        function renderizarProductosA1B2C3(productos) {
                            const contenedor = document.getElementById('contenedorProductosA1B2C3');
                            contenedor.innerHTML = '';
                            
                            productos.sort((a, b) => a.cantidad - b.cantidad); // Ordenar por cantidad

                            productos.forEach(producto => {
                                //producto.cantidadChange = 0
                                const card89 = document.createElement('div');
                                card89.classList.add('custom-cardA1B2C3');
                                card89.style.width = "300px"

                                const header89 = document.createElement('div');
                                header89.classList.add('custom-card-headerA1B2C3');
                                header89.textContent = producto.nombreProducto;

                                const body89 = document.createElement('div');
                                body89.classList.add('custom-card-bodyA1B2C3');
                                body89.style.width = "280px"
                                body89.style.textAlign = "left";

                                const imagen89 = document.createElement('img');
                                imagen89.src = producto.rutaSimpleImg[0];
                                imagen89.style.width = "180px"
                                imagen89.style.height = "120px"

                                const codigoProducto = document.createElement('p');
                                codigoProducto.innerText = `Codigo producto: ${producto.codProd ?? "S/C"}`;

                                const catego87 = document.createElement('p');
                                catego87.innerText = `Categoria: ${producto.categoria ?? "S/C"}`;


                                const fechaIngreso = document.createElement('p');
                                fechaIngreso.textContent = `Fecha de ingreso: ${new Date(producto.date).toLocaleDateString('es-ES')}`;

                                const cantidadContainer = document.createElement('div');
                                cantidadContainer.classList.add('cantidadA1B2C3');
                                cantidadContainer.innerHTML = `
                                    <button class="btn btn-outline-secondary" onclick="cambiarCantidadA1B2C3('${producto._id}', -1)">-</button>
<input type="number" value="${producto.cantidadChange !== undefined ? producto.cantidadChange : producto.cantidad}" readonly>
                                    <button class="btn btn-outline-secondary" onclick="cambiarCantidadA1B2C3('${producto._id}', 1)">+</button>
                                `;

                                const estadoCantidad = document.createElement('div');
                                estadoCantidad.classList.add('estado-cantidadA1B2C3');
                                estadoCantidad.textContent = `Stock actual: ${producto.cantidad} unidades`;
                                if (producto.cantidad > 5) {
                                    estadoCantidad.classList.add('verde');
                                } else if (producto.cantidad >= 2) {
                                    estadoCantidad.classList.add('amarillo');
                                } else {
                                    estadoCantidad.classList.add('rojo');
                                }

                                const button = document.createElement('button');
                                button.classList.add('btn', 'btn-outline-primary', 'custom-buttonA1B2C3');
                                button.textContent = 'Cambiar stock';
                                button.onclick = () => enviarCambiosAlServidorA1B2C3(producto._id, producto.ownerId);

                                body89.appendChild(imagen89);
                                body89.appendChild(catego87);
                                body89.appendChild(fechaIngreso);
                                body89.appendChild(codigoProducto);
                                body89.appendChild(estadoCantidad);
                                body89.appendChild(cantidadContainer);
                                body89.appendChild(button);

                                card89.appendChild(header89);
                                card89.appendChild(body89);

                                contenedor.appendChild(card89);
                            });
                        }

                        // Descargar ventas en formato Excel
                        function exportarProdsAExcel(ventasOwner) {
                            try {
                                // Crear una nueva hoja de trabajo
                                const worksheet = XLSX.utils.json_to_sheet(ventasOwner);

                                // Crear un nuevo libro de trabajo
                                const workbook = XLSX.utils.book_new();
                                XLSX.utils.book_append_sheet(workbook, worksheet, "Stock");

                                // Generar un archivo Excel
                                XLSX.writeFile(workbook, 'StockProductos.xlsx');
                                
                                // Mostrar alerta de éxito
                                mostrarExito("El archivo Excel se ha descargado correctamente.");
                                setTimeout(async () => {
                                    await actualizarData()
                                }, 1000);

                            } catch (error) {
                                // Mostrar alerta de error
                                mostrarAlerta("Hubo un error al intentar descargar el archivo. Por favor, intenta nuevamente más tarde.");
                                setTimeout(async () => {
                                    await actualizarData()
                                }, 1000);

                            }
                        }

                        function filtrarPorNombreA1B2C3() {
                            const input = document.getElementById('inputBuscarProductoA1B2C3').value.toLowerCase();
                            const select = document.getElementById('selectProductosEncontradosA1B2C3');
                            const productos = ownerProducts;

                            // Limpiar el select
                            select.innerHTML = '';
                            select.style.display = 'none';

                            if (input.length === 0) return; // Si no hay entrada, salir

                            // Buscar productos que coincidan por nombre
                            let productosFiltrados = productos.filter(producto => 
                                producto.nombreProducto && producto.nombreProducto.toLowerCase().includes(input)
                            );

                            // Si no hay productos filtrados por nombre, buscar por código
                            if (productosFiltrados.length === 0) {
                                productosFiltrados = productos.filter(producto => 
                                    producto.codProd && producto.codProd.toLowerCase().includes(input)
                                );
                            }

                            // Mostrar los resultados en el select si hay coincidencias
                            if (productosFiltrados.length > 0) {
                                select.style.display = 'block';
                                productosFiltrados.forEach(producto => {
                                    const option = document.createElement('option');
                                    option.textContent = `${producto.nombreProducto || 'Sin nombre'} - ${producto.codProd || 'S/C'}`;
                                    option.value = producto._id;
                                    select.appendChild(option);
                                });
                            }
                        }

                        // Función para seleccionar un producto del select
                        function seleccionarProductoA1B2C3() {
                            const select = document.getElementById('selectProductosEncontradosA1B2C3');
                            const idProducto = select.value;
                            const producto = ownerProducts.find(p => p._id === idProducto);
                            if (producto) {
                                renderizarProductosA1B2C3([producto]);
                            }
                        }

                        // Función para filtrar por fechas
                        function filtrarPorFechas654654564() {
                            const fechaDesde = document.getElementById('fechaDesdeA1B2C3').value;
                            const fechaHasta = document.getElementById('fechaHastaA1B2C3').value;
                            const productos = ownerProducts; // Usar el array de productos disponible

                            const productosFiltrados = productos.filter(producto => {
                                const fechaProducto = new Date(producto.date).toISOString().split('T')[0];
                                return (!fechaDesde || fechaProducto >= fechaDesde) && (!fechaHasta || fechaProducto <= fechaHasta);
                            });

                            renderizarProductosA1B2C3(productosFiltrados);
                        }

                        // Función para reiniciar el filtro de fechas
                        function reiFiltroFechasA1B2C3() {
                            // document.getElementById('fechaDesdeA1B2C3').value = '';
                            // document.getElementById('fechaHastaA1B2C3').value = '';
                            console.log("Reiniciar")
                            renderizarProductosA1B2C3(ownerProducts);
                        }

                        // Función para cambiar la cantidad de stock
                        function cambiarCantidadA1B2C3(productId, delta) {
                            const producto = ownerProducts.find(p => p._id === productId);
                            console.log("Que producto encontro para cambiar su cantidad", producto);
                            if (producto) {
                                // Convertir cantidadChange a número, si existe
                                producto.cantidadChange = Number(producto.cantidadChange) || producto.cantidad;
                                // Aplicar el cambio y asegurarse de que no sea menor a 0
                                producto.cantidadChange = Math.max(0, producto.cantidadChange + delta);
                                // Renderizar los productos
                                renderizarProductosA1B2C3(ownerProducts);
                            }
                        }

                        // Función para enviar los cambios de stock al servidor
                        function enviarCambiosAlServidorA1B2C3(productId) {
                            const producto = ownerProducts.find(p => p._id === productId);
                            console.log("Que producto debe sr cambiado su stck?", endpoints[195])
                            // endpoints2     = JSON.parse(sessionStorage.getItem('endPointsIdTokensCpanel')) || [];
                            // console.log("Que produ999999999999999999999", endpoints2[129])
                            if (producto) {
                                fetch(`${endpoints[105]}`, {
                                    method: 'POST',
                                    headers: {
                                        'Authorization': `Bearer ${jwToken}`,
                                        'Content-Type': 'application/json',
                                    },
                                    body: JSON.stringify({ productId, idOwner, cantidad: producto.cantidadChange }),
                                })
                                .then(response => response.json())
                                .then(data => {
                                    mostrarExito(`Stock actualizado: ${data.message}`);
                                    setTimeout(async () => {
                                    await RefreshactualizarData()
                                }, 1000);
                                })
                                .catch(error => {
                                    mostrarAlerta('Error al actualizar el stock, intente mas tarde.');
                                    console.error('Error:', error);
                                    setTimeout(async () => {
                                    await RefreshactualizarData()
                                }, 1000);

                                });
                            }
                        }

                        // Renderizar todos los productos al cargar la página
                        renderizarProductosA1B2C3(ownerProducts);
                    </script>
                </div>
                <!-- Ventas & Estadisticas -->
                <div id="stats" class="container-xxl tab-pane fade text-center" style="padding-top: 1rem;">
                    <div><br>
                        <h3 id="responsiveBajarEstats">Ventas & Estadísticas</h3>
                        <div class="mt-4">
                            <h4 id="cantVentas-4d5e6f">No tienes Ventas. Enra en marketing y genera alguna promocion.</h4>
                            <br>
                            <!-- Buscador y filtro por fechas -->
                            <div class="row align-items-center justify-content-center mb-3">
                                <!-- Filtro por estado y búsqueda a la izquierda -->
                                <div class="col-md-4">
                                    <div class="">
                                        <label for="estadoEnvioV" class="form-label">Ordenar por su estado de entrega:</label>
                                        <select id="estadoEnvioV" class="form-control" onchange="filtrarPorEstadoV()">
                                            <option value="">Selecciona un estado</option>
                                            <option value="Armando su pedido">Armando su pedido</option>
                                            <option value="Pedido en Camino">Pedido en Camino</option>
                                            <option value="Pedido Entregado y NO cobrado">Pedido Entregado y NO cobrado</option>
                                            <option value="Pedido Cancelado">Pedido Cancelado</option>
                                            <option value="Pedido Entregado y Cobrado">Pedido Entregado y Cobrado</option>
                                        </select>
                                    </div>
                                    <div class="">
                                        <label for="buscarPedidoV">Buscar pedido:</label>
                                        <input type="text" class="form-control" id="buscarPedidoV" placeholder="Ingresa el código del pedido" oninput="buscarPedidoV()">
                                    </div>
                                </div>
                        
                                <!-- Botón de reiniciar en el medio -->
                                <div class="col-md-2 text-center">
                                    <button type="button" class="btn btn-outline-secondary mt-2" id="btnReiniciarV" onclick="reiniciarFiltrosV()"> <i class="fas fa-sync-alt"></i></button>
                                </div>
                        
                                <!-- Filtros de fechas a la derecha -->
                                <div class="col-md-4">
                                    <div class="">
                                        <label for="fechaDesde" class="mb-0">Desde:</label>
                                        <input type="date" class="form-control mt-0" id="fechaDesdeV" onchange="filtrarPorFechasV()">
                                    </div>
                                    <div class="">
                                        <label for="fechaHasta" class="mb-0">Hasta:</label>
                                        <input type="date" class="form-control mt-0" id="fechaHastaV" onchange="filtrarPorFechasV()">
                                    </div>
                                </div>
                            </div>
                            <div id="cantFiltrataV" class="card-container">
                                <h4>Filtra lo que necesites</h4>
                            </div>                     
                            <br>
                            <div class="row container-xxl p-0">
                                <div id="ventas-9s0t1u" class="row p-0 container-fluid">
                                    <h2>A la fecha no has realizado ninguna venta</h2>
                                </div>
                            </div>
                        <div class="card-footer fixed-bottom bg-white opacity-8" style="z-index: 9999999; padding: 1rem;">
                            <div class="d-flex justify-content-between align-items-left">
                                    <p><strong>Total cantidad de productos vendidos a la fecha seleccionada:</strong> <span id="totalPedidos-2v3w4x"></span></p>
                                    <p><strong>Total de ventas en pesos:</strong> <span id="totalCompras-5y6z7a"></span></p>
                                    <button class="btn btn-primary" onclick="exportarAExcel(ventasOwner)">Descargar en Excel</button>
                            </div>
                        </div>
                        </div>
                        <script>
                            // Renderizar todas las ventas al cargar la página
                            function renderizarVentas(ventas) {
                                const cantPedi = document.getElementById('cantVentas-4d5e6f');
                                const ventasContainer = document.getElementById('ventas-9s0t1u');
                                ventasContainer.innerHTML = '';

                                if (ventas.length > 0) {
                                    cantPedi.innerText = `Has realizado ${ventas.length} ventas`;

                                    ventas.forEach(pedido => {
        const totalCompra = pedido.TotalCompra || 0; // Asumiendo que `TotalCompra` puede no estar definido
        const card11 = document.createElement('div');
        
        // Ajustes de Bootstrap para ser responsive
        card11.classList.add('col-lg-4', 'col-md-6', 'col-sm-12', 'container-xxl', "m-0");

        card11.innerHTML = `
            <style>
                .fa {
                    text-decoration: none;
                }
                .fa-hover:hover {
                    transform: scale(1.10); /* Aumentar tamaño en un 10% */
                    transition: transform 0.51s; /* Transición de 0.51 segundos */
                    color: green !important; /* Cambiar a color verde */
                    position: relative;
                }
                .fa-hover:active {
                    transform: scale(0.9); /* Disminuir tamaño en un 10% */
                    transition: transform 0.51s; /* Transición de 0.51 segundos */
                    color: red !important; /* Cambiar a color rojo */
                    position: relative;
                }
            </style>
            <div class="col">
                <div class="card m-2">
                    <div class="card-header text-center">Código del pedido: ${pedido.codigoPedido}</div>
                    <br>
                    <a href="#" style="text-decoration: none;">
                        <img src="${pedido.imgCli}" class="img-fluid" style="border-radius: 100rem; width: 100px; height: auto;" alt="Imagen del cliente"/>
                        <p>Datos del cliente</p>
                    </a>
                    <div class="card-body text-md-left">
                        <p class="card-text"><strong>Nombre del cliente:</strong> ${pedido.nombreEcomm || 'No disponible'}</p>
                        <p class="card-text"><strong>Fecha:</strong> ${formatearFecha(pedido.fecha)}</p>
                        <p class="card-text"><strong>Cantidad de productos:</strong> ${pedido.totalProductos || 'No disponible'}</p>
                        <p class="card-text"><strong>Total de la compra:</strong> ${totalCompra.toLocaleString('es-AR', { style: 'currency', currency: 'ARS' })}</p>
                        <p class="card-text"><strong>Forma de pago:</strong> ${pedido.tipoDePago || 'No disponible'}</p>
                        <p class="card-text"><strong>Estado del envío:</strong> ${pedido.statusEnvio || 'No disponible'}</p>
                    </div>
                    <div class="card-footer text-center">
                        <a class="fas fa-eye fa-hover" href="#" onclick="mostrarModalPedido('${pedido.codigoPedido}')" data-toggle="tooltip" data-placement="top" title="Mostrar Pedido" style="font-size:2rem;text-decoration: none;"></a>
                    </div>
                </div>
            </div>
        `;

        ventasContainer.appendChild(card11);
    });
                                } else {
                                    cantPedi.innerHTML = `No tienes pedidos 
                                    <br> 
                                    Haz promociones y publicalas en tus redes sociales`;
                                    ventasContainer.innerHTML = '<h2>A la fecha no has realizado ninguna venta</h2>';
                                }
                            }
                            // Filtrar las ventas según los criterios
                            function filtrarVentasV(estado, codigo, desde, hasta) {
                                console.log("Entrando al filtrado con:", estado, codigo, desde, hasta);

                                // Filtrar ventasOwner con validación de estado, código y fechas
                                return ventasOwner.filter(pedido => {
                                    const fechaPedido = new Date(pedido.fecha);
                                    const fechaDesdeValid = desde ? new Date(desde) : null;
                                    const fechaHastaValid = hasta ? new Date(hasta) : null;

                                    // Validar estado, código y fechas
                                    const estadoValido = !estado || pedido.statusEnvio === estado;
                                    const codigoValido = !codigo || pedido.codigoPedido.toLowerCase().includes(codigo.toLowerCase());
                                    const fechaValida = (!fechaDesdeValid || fechaPedido >= fechaDesdeValid) &&
                                                        (!fechaHastaValid || fechaPedido <= fechaHastaValid);

                                    return estadoValido && codigoValido && fechaValida; // Solo devuelve los pedidos válidos
                                });
                            }
                            // Filtrar Función para renderizar según filtro por estado
                            function filtrarPorEstadoV() {
                                const estadoSeleccionado = document.getElementById('estadoEnvioV').value;
                                const pedidosFiltrados = filtrarVentasV(estadoSeleccionado, '', '', '');
                                console.log("Que devuelve el filtro?????",pedidosFiltrados )
                                renderizarVentas(pedidosFiltrados); // Pasar array filtrado a renderizar
                                salesFiltradesV = pedidosFiltrados.length;
                                const filtrados = document.getElementById('cantFiltrataV');
                                filtrados.innerHTML = `<h4>Filtraste ${salesFiltradesV} ventas.</h4>`;
                            }
                            // Filtrar Función para buscar por código de pedido
                            function buscarPedidoV() {
                                const codigoPedido = document.getElementById('buscarPedidoV').value.toLowerCase();
                                const pedidosFiltrados = filtrarVentasV('', codigoPedido, '', '');
                                renderizarVentas(pedidosFiltrados);
                                salesFiltradesV = pedidosFiltrados.length;
                                const filtrados = document.getElementById('cantFiltrata');
                                filtrados.innerHTML = `<h4>Filtraste ${salesFiltradesV} ventas.</h4>`;

                            }
                            // Filtrar Función para filtrar por fechas
                            function filtrarPorFechasV() {
                                const fechaDesde = document.getElementById('fechaDesdeV').value;
                                const fechaHasta = document.getElementById('fechaHastaV').value;
                                const pedidosFiltrados = filtrarVentasV('', '', fechaDesde, fechaHasta);
                                renderizarVentas(pedidosFiltrados);
                                salesFiltradesV = pedidosFiltrados.length;
                                const filtrados = document.getElementById('cantFiltrataV');
                                filtrados.innerHTML = `<h4>Filtraste ${salesFiltradesV} ventas.</h4>`;
                            }
                            // Función para reiniciar filtros y mostrar todas las ventas
                            function reiniciarFiltrosV() {
                                document.getElementById('estadoEnvioV').value = '';
                                document.getElementById('buscarPedidoV').value = '';
                                document.getElementById('fechaDesdeV').value = '';
                                document.getElementById('fechaHastaV').value = '';
                                salesFiltradesV = ventas.length;
                                const filtrados = document.getElementById('cantFiltrataV');
                                filtrados.innerHTML = `<h4>Filtraste ${salesFiltradesV} ventas.</h4>`;
                                renderizarVentas(ventasOwner); // Mostrar todas las ventas
                            }
                            renderizarVentas(ventasOwner);
                            // Mostrar modal con detalles del pedido
                            function mostrarModalPedidoX(codigoPedido) {
                                const modal = document.getElementById('modalPedido-1a2b3c');
                                const modalBody = document.getElementById('modalBody-4d5e6f');
                                const datosPed = document.getElementById('dataPedido-7g8h9i');
                                modalBody.innerHTML = '';
                                datosPed.innerHTML = '';
                                const totalProductosPedidos = ventasOwner.find(pedido => pedido.codigoPedido === codigoPedido);

                                if (!totalProductosPedidos) {
                                    console.error('Pedido no encontrado');
                                    return;
                                }

                                function formatCurrency(amount) {
                                    return `$${amount.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}`;
                                }

                                const { totalProductos, TotalCompra, statusEnvio, listaProductos } = totalProductosPedidos;
                                datosPed.innerHTML = `
                                    <p>Estado del pedido: ${statusEnvio}</p>
                                    <p>Cantidad total de productos: ${totalProductos}</p>
                                    <p>Total de la compra: ${formatCurrency(TotalCompra)}</p>
                                `;

                                const row = document.createElement('div');
                                row.classList.add('row');

                                listaProductos.forEach(pedido => {
                                    const col = document.createElement('div');
                                    col.classList.add('col-12', 'col-md-6', 'col-lg-4', 'mb-3');
                                    col.innerHTML = `
                                        <div class="card h-100">
                                            <div class="card-header">${pedido.nombreProd}</div>
                                            <div class="card-body text-center">
                                                <img src="${pedido.imgProd}" alt="Imagen de ${pedido.nombreProd}" class="img-fluid">
                                                <ul class="list-group list-group-flush">
                                                    <li class="list-group-item d-flex justify-content-between">Precio: ${formatCurrency(pedido.precio)}</li>
                                                    <li class="list-group-item d-flex justify-content-between">Cantidad: ${pedido.cantidadProductos}</li>
                                                    <li class="list-group-item d-flex justify-content-between">Subtotal: ${formatCurrency(pedido.precio * pedido.cantidadProductos)}</li>
                                                </ul>
                                            </div>
                                        </div>
                                    `;
                                    row.appendChild(col);
                                });

                                modalBody.appendChild(row);
                                new bootstrap.Modal(modal).show();
                            }
                            // Descargar ventas en formato Excel
                            function descargarExcelX(data) {
                                const formData = new FormData();
                                formData.append('data', JSON.stringify(data));
                                mostrarModalLoading();
                                // const endpoints = JSON.parse(sessionStorage.getItem("idEndpoints"));
                                const jwToken = sessionStorage.getItem('jwtToken');
                                fetch(`${endpoints[56]}`, {
                                    method: 'POST',
                                    body: formData,
                                    headers: {
                                        'Content-Type': 'application/json',
                                        'Authorization': `Bearer ${jwToken}`
                                    }
                                })
                                .then(response => response.blob())
                                .then(blob => {
                                    ocultarModalLoading();
                                    const url = window.URL.createObjectURL(blob);
                                    const a = document.createElement('a');
                                    a.href = url;
                                    a.download = 'Ventas.xlsx';
                                    document.body.appendChild(a);
                                    a.click();
                                    window.URL.revokeObjectURL(url);
                                })
                                .catch(error => {
                                    ocultarModalLoading();
                                    mostrarAlerta('Error al descargar el archivo Excel');
                                    console.error('Error:', error);
                                });
                            }
                            function formatearFecha(fecha) {
                                const opciones = { day: '2-digit', month: 'short', year: 'numeric' };
                                return new Date(fecha).toLocaleDateString('es-AR', opciones);
                            }
                            // Calcular y mostrar estadísticas de ventas
                            function calcularEstadisticasX(ventas) {
                                //console.log("que lelga a estadistica en ventas?", ventas)
                                const totalCompras = ventas.reduce((acc, pedido) => {
                                    // Asegúrate de que `pedido.TotalCompra` es un número
                                    return acc + (pedido.TotalCompra && typeof pedido.TotalCompra === 'number' ? pedido.TotalCompra : 0);
                                }, 0);
                                const totalProdVend = ventas.reduce((acc, pedido) => {
                                    // Asegúrate de que `pedido.TotalCompra` es un número
                                    return acc + (pedido.totalProductos && typeof pedido.totalProductos === 'number' ? pedido.totalProductos : 0);
                                }, 0);
                                document.getElementById('totalPedidos-2v3w4x').innerText = totalProdVend;
                                document.getElementById('totalCompras-5y6z7a').innerText = formatCurrency(totalCompras);
                            }
                            calcularEstadisticasX(ventasOwner);
                            function formatCurrency(amount) {
                                return `$${amount.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}`;
                            }
                            // funcion que muestra el modal del pedido elejido y todos sus productos
                            function mostrarModalPedido(codigoPedido) {
                            // Obtener el modal y el cuerpo del modal
                                const modal = document.getElementById('modalPedido5998');
                                const modalBody = document.getElementById('modalBody8899');
                                const datosPed = document.getElementById('dataPedido45698987');
                            
                                // Limpiar el cuerpo del modal
                                modalBody.innerHTML = '';
                                datosPed.innerHTML = '';
                            
                                // Buscar el pedido utilizando el codigoPedido
                                const totalProductosPedidos = ventasOwner.find(pedido => pedido.codigoPedido === codigoPedido);

                                // Verificar si se encontró el pedido
                                if (!totalProductosPedidos) {
                                    console.error('Pedido no encontrado');
                                    return;
                                }
                            
                                // Función para formatear el número como moneda (pesos) con puntos y comas
                                function formatCurrency(amount) {
                                    return `$${amount.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}`;
                                }
                            
                                const totoProd = totalProductosPedidos.totalProductos;
                                const totMoney = totalProductosPedidos.TotalCompra;
                                const satatus = totalProductosPedidos.statusEnvio;
                            
                                // Crear el título del modal con el nombre del producto
                                const titulo4 = document.createElement('p');
                                titulo4.textContent = `Estado del pedido: ${satatus}`;
                                const titulo3 = document.createElement('p');
                                titulo3.textContent = `Cantidad total de productos: ${totoProd}`;
                                const titulo2 = document.createElement('p');
                                titulo2.textContent = `Total de la compra: ${formatCurrency(totMoney)}`;
                            
                                datosPed.appendChild(titulo2);
                                datosPed.appendChild(titulo3);
                                datosPed.appendChild(titulo4);
                            
                                // Crear un contenedor de rejilla para las tarjetas
                                const row = document.createElement('div');
                                row.classList.add('row');
                            
                                totalProductosPedidos.listaProductos.forEach(pedido => {
                                    // Crear una columna para la tarjeta
                                    const col = document.createElement('div');
                                    col.classList.add('col-12', 'col-sm-12', 'col-md-2', 'col-lg-12'); // Clases responsivas

                                    // Crear la tarjeta
                                    const card = document.createElement('div');
                                    card.classList.add('card', "w100", 'h-100', "m-4");
                                    card.style.width = 'auto'; // Ajustar el ancho de la tarjeta para que coincida con la imagen

                                    // Crear el título de la tarjeta con el nombre del producto
                                    const cardHeader = document.createElement('div');
                                    cardHeader.classList.add('card-header');
                                    const titulo = document.createElement('h5');
                                    titulo.textContent = `${pedido.nombreProd}`;
                                    cardHeader.appendChild(titulo);
                                    card.appendChild(cardHeader);

                                    // Mostrar la imagen del producto
                                    const cardBody = document.createElement('div');
                                    cardBody.classList.add('card-body', 'text-center');
                                    const imagen = document.createElement('img');
                                    imagen.src = pedido.imgProd;
                                    imagen.alt = `Imagen de ${pedido.nombreProd}`;
                                    imagen.style.width = '160px'; // Ajustar el ancho de la imagen
                                    imagen.style.height = '90px';
                                    cardBody.appendChild(imagen);

                                    // Calcular el subtotal
                                    const subtotal = pedido.precio * pedido.cantidadProductos;

                                    // Formatear el subtotal como moneda con puntos y comas
                                    const formattedSubtotal = formatCurrency(subtotal);

                                    // Crear elementos para cada propiedad del pedido
                                    const propiedadesPedido = [
                                        { etiqueta: 'Precio', valor: formatCurrency(pedido.precio) },
                                        { etiqueta: 'Cantidad', valor: pedido.cantidadProductos },
                                        { etiqueta: 'Subtotal', valor: formattedSubtotal },
                                    ];

                                    // Crear una lista para las propiedades del pedido
                                    const listaInfoPedido = document.createElement('ul');
                                    listaInfoPedido.classList.add('list-group', 'list-group-flush');

                                    // Recorrer las propiedades del pedido y crear elementos para cada una
                                    propiedadesPedido.forEach(propiedad => {
                                        const listItem = document.createElement('li');
                                        listItem.classList.add('list-group-item', 'd-flex', 'justify-content-between', 'align-items-left');
                                        listItem.style.margin = '0.5rem'; // Agregar margen de 1.5rem
                                        const label = document.createElement('span');
                                        label.textContent = propiedad.etiqueta;
                                        const value = document.createElement('span');
                                        value.textContent = propiedad.valor;
                                        value.style.marginLeft = '10px'; // Espacio entre la etiqueta y el valor
                                        listItem.appendChild(label);
                                        listItem.appendChild(value);
                                        listaInfoPedido.appendChild(listItem);
                                    });

                                    // Agregar la lista de propiedades al cuerpo de la tarjeta
                                    cardBody.appendChild(listaInfoPedido);
                                    card.appendChild(cardBody);
                                    col.appendChild(card);
                                    row.appendChild(col);
                                });

                                // Agregar la fila al cuerpo del modal
                                modalBody.appendChild(row);

                                // Mostrar el modal
                                const modalBootstrap = new bootstrap.Modal(modal);
                                modalBootstrap.show();

                            }
                            function exportarAExcel(ventasOwner) {
        try {
            // Filtrar datos para eliminar idCliente e idDueno
            const filteredData = ventasOwner.map(({ idCliente, idDueno, ...rest }) => rest);
            
            const workbook = XLSX.utils.book_new();
            const worksheet = XLSX.utils.json_to_sheet(filteredData);
            XLSX.utils.book_append_sheet(workbook, worksheet, "Ventas");
            XLSX.writeFile(workbook, 'comprasCliente.xlsx');
            mostrarExito("Descarga completa.");
        } catch (error) {
            mostrarAlerta("Error en la descarga.");
        } finally {
            setTimeout(actualizarData, 1000);
        }
    }
                        </script>
                    </div>
                </div>
                <!-- Mis clientes -->
                <div id="clients" class="w-100 tab-pane fade" style="padding-top: 1rem;">
                    <div class="w-100 " align="center">
                        <br>
                        <h2 id="responBajaCLientes">Mis clientes</h2>
                        <div class=" w-100" align="center">
                            <!-- Mensaje de cantidad de clientes -->
                            <h4 id="cantClientesA1B2C3">
                                Actualmente NO tienes clientes. 
                                <br>
                                Haz Promociones en tus redes para vender.
                            </h4>
                            <script>
                                // Datos simulados para prueba
                                let misClientes = dataOwner.clientes 

                                function actualizarCantidadClientes() {
                                    const cantClientes = document.getElementById("cantClientesA1B2C3");
                                    if (misClientes.length >= 1) {
                                        cantClientes.innerHTML = `<h4>Tienes ${misClientes.length} clientes.</h4>`;
                                    } else {
                                        cantClientes.innerHTML = `<h4>Actualmente NO tienes clientes.<br> 
                                            Haz Promociones en tus redes para vender.</h4>`;
                                    }
                                }
                                actualizarCantidadClientes();
                            </script>
                            <br>
                            <div id="hideFil" style="margin-left: 4rem" class="d-flex justify-content-center align-items-center" align="center" >
                                <!-- Buscador -->
                                <div class="align-items-center" align="center">
                                    <p>Buscar cliente por nombre</p>
                                    <div class="d-flex align-items-center">
                                        <input placeholder="Buscar cliente" type="text" id="inputBuscarClienteA1B2C3" oninput="filtrarPorNombreClienteA1B2C3()" class="form-control" style="width:150px;">
                                        <a class="fas fa-search" onclick="filtrarPorNombreClienteA1B2C3()" style="font-size:1.5rem; margin: 1rem;"></a>
                                    </div>
                                    <select id="selectClientesEncontradosA1B2C3" size="5" onchange="seleccionarClienteA1B2C3()" class="form-select" style="width:150px; display:none; position: absolute; z-index: 999999;"></select>
                                </div>
                                <div class="col-auto" style="margin: auto 2rem auto 6rem;">
                                    <button class="btn btn-outline-secondary" onclick="reiniciarFiltroFechasA1B2C3()">
                                        <i class="fas fa-sync-alt"></i>
                                    </button>
                                </div>
                                <!-- Filtro por fechas -->
                                <div>
                                    <p>Filtrar y ordenar por fechas</p>
                                    <div class="row align-items-center">
                                        <div class="col">
                                            <label for="fechaDesdeA1B2C3">Desde:</label>
                                            <input type="date" id="fechaDesdeA1B2C3" class="form-control" onchange="setTimeout(filtrarPorFechasA1B2C3, 2000)">
                                        </div>
                                        <div class="col">
                                            <label for="fechaHastaA1B2C3">Hasta:</label>
                                            <input type="date" id="fechaHastaA1B2C3" class="form-control" onchange="setTimeout(filtrarPorFechasA1B2C3, 2000)">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br>
                        <div id="contenedorClientesA1B2C3" class="card-container"></div>
                        <br><br><br>
                        <div class="card-footer fixed-bottom bg-white opacity-8" style="z-index: 9999999; padding: 1rem; margin-top: 1rem">
                            <button class="btn btn-primary" onclick="exportarClientesAExcelB85485(misClientes)">Descargar en Excel</button>
                        </div>
                        <style>
                            .custom-cardA1B2C3 {
                                border: 1px solid #ddd;
                                border-radius: 8px;
                                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                                padding: 7px 10% !important;
                                width: calc(100% - 20px); /* Tarjetas adaptadas al tamaño de pantalla */
                                height: auto;
                                margin: 10px !important;
                                transition: box-shadow 0.3s, transform 0.3s;
                                display: flex;
                                flex-direction: column;
                                align-items: center;
                            }

                            .custom-cardA1B2C3:hover {
                                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
                                transform: scale(1.02);
                            }

                            .custom-card-headerA1B2C3 {
                                font-size: 1.25rem;
                                font-weight: bold;
                                margin-bottom: 0.5rem;
                                text-align: center;
                            }

                            .custom-card-bodyA1B2C3 {
                                display: flex;
                                flex-direction: column;
                                align-items: center;
                            }

                            .custom-card-bodyA1B2C3 img {
                                width: 180px; /* 20px más ancho que la imagen */
                                height: 100px;
                                margin-bottom: 1rem;
                            }

                            .custom-card-bodyA1B2C3 p {
                                margin: 0;
                            }

                            .custom-buttonA1B2C3 {
                                margin-top: 1rem;
                            }

                            .cantidadA1B2C3 {
                                display: flex;
                                align-items: center;
                                margin-top: 1rem;
                            }

                            .cantidadA1B2C3 p {
                                margin: 0 10px;
                                font-size: 1.25rem;
                                font-weight: bold;
                            }

                            .cantidadA1B2C3 input {
                                width: 60px;
                                text-align: center;
                            }

                            .cantidadA1B2C3 .btn {
                                font-size: 1.25rem;
                            }

                            .estado-cantidadA1B2C3 {
                                margin-top: 1rem;
                                font-weight: bold;
                            }

                            @media (max-width: 768px) {
                                .custom-cardA1B2C3 {
                                    width: calc(100% - 20px); /* 1 tarjeta por fila en pantallas medianas */
                                }
                            }

                            @media (max-width: 480px) {
                                .custom-cardA1B2C3 {
                                    width: calc(100% - 20px); /* 1 tarjeta por fila en pantallas pequeñas */
                                }
                            }
                        </style>
                    </div>
                    <script>
                        // Función para renderizar clientes
                        function renderClientesA1B2C3(misClientes) {
                            const contenedor = document.getElementById('contenedorClientesA1B2C3');
                            contenedor.innerHTML = ''; // Limpiar el contenedor

                            misClientes.forEach(cliente => {
                                const card55 = document.createElement('div');
                                card55.className = 'custom-cardA1B2C3';
                                card55.style.width = "333px"; // Define el ancho del contenedor de la tarjeta
                                card55.style.padding = '10px'; // Asegura que el contenido no se desborde
                                card55.style.overflow = 'hidden'; // Asegura que el contenido no se desborde

                                // Obtener los valores de emailCliente y numCelCliente
                                const emails = Array.isArray(cliente.emailCliente) && cliente.emailCliente.length > 0 
                                    ? cliente.emailCliente.map(emailObj => emailObj.emailCliente).join('<br>') 
                                    : 'No disponible';

                                const telefonos = Array.isArray(cliente.numCelCliente) && cliente.numCelCliente.length > 0 
                                    ? cliente.numCelCliente.map(telObj => telObj.numCelCliente).join('<br>') 
                                    : 'No disponible';

                        card55.innerHTML = `
                            <div class="custom-card-bodyA1B2C3" style="padding: 10px !important; word-wrap: break-word;">
                                <img src="${cliente.imgCli}" alt="Imagen de ${cliente.nombre}" style="border-radius: 50%; width: 50px; height: 50px;">
                                <div align="left" style="word-wrap: break-word;">
                                    <div class="custom-card-headerA1B2C3" style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                                        ${cliente.nombre} ${cliente.apellido}
                                    </div>
                                    <p style="padding: 5px ;"><strong>Email/s:</strong><br> <span style="word-wrap: break-word;">${emails}</span></p>
                                    <p style="padding: 5px ;"><strong>Teléfono/s:</strong><br> <span style="word-wrap: break-word;">${telefonos}</span></p>
                                </div>
                            </div>
                        `;

                                contenedor.appendChild(card55);
                            });
                        }

                        // Funciones de filtro
                        function filtrarPorNombreClienteA1B2C3() {
                            const input = document.getElementById('inputBuscarClienteA1B2C3').value.toLowerCase();
                            const select = document.getElementById('selectClientesEncontradosA1B2C3');
                            select.innerHTML = ''; // Limpiar el select

                            misClientes.forEach(cliente => {
                                if (cliente.nombre.toLowerCase().includes(input)) {
                                    const option = document.createElement('option');
                                    option.value = cliente.idCliente;
                                    option.textContent = `${cliente.nombre} ${cliente.apellido}`;
                                    select.appendChild(option);
                                }
                            });

                            select.style.display = select.options.length > 0 ? 'block' : 'none';
                        }

                        function seleccionarClienteA1B2C3() {
                            const select = document.getElementById('selectClientesEncontradosA1B2C3');
                            const idCliente = select.value;
                            const cliente = misClientes.find(c => c.idCliente === idCliente);

                            if (cliente) {
                                const contenedor = document.getElementById('contenedorClientesA1B2C3');
                                contenedor.innerHTML = '';
                                //select.innerHTML = '';
                                miCliente = []
                                miCliente.push(cliente)
                                renderClientesA1B2C3(miCliente)
                            }
                        }

                        function filtrarPorFechasA1B2C3() {
                            const fechaDesde = document.getElementById('fechaDesdeA1B2C3').value;
                            const fechaHasta = document.getElementById('fechaHastaA1B2C3').value;

                            const fechaDesdeDate = new Date(fechaDesde);
                            const fechaHastaDate = new Date(fechaHasta);

                            const clientesFiltrados = misClientes.filter(cliente => {
                                const clienteFecha = new Date(cliente.fecha); // Suponiendo que la fecha esté en cliente.fecha
                                return (!fechaDesde || clienteFecha >= fechaDesdeDate) && (!fechaHasta || clienteFecha <= fechaHastaDate);
                            });

                            // Mostrar clientes filtrados
                            // const contenedor = document.getElementById('contenedorClientesA1B2C3');
                            // contenedor.innerHTML = '';
                            renderClientesA1B2C3(clientesFiltrados)
                        }

                        function reiniciarFiltroFechasA1B2C3() {
                            renderClientesA1B2C3(misClientes)
                        }

                        function exportarClientesAExcelB85485(clientes) {

                            try {
                                // Crear una nueva hoja de trabajo
                                const worksheet = XLSX.utils.json_to_sheet(clientes);

                                // Crear un nuevo libro de trabajo
                                const workbook = XLSX.utils.book_new();
                                XLSX.utils.book_append_sheet(workbook, worksheet, "Clientes");

                                // Generar un archivo Excel
                                XLSX.writeFile(workbook, 'MisClientes.xlsx');
                                
                                // Mostrar alerta de éxito
                                mostrarExito("El archivo Excel se ha descargado correctamente.");
                                setTimeout(async () => {
                                    await actualizarData()
                                }, 1000);

                            } catch (error) {
                                // Mostrar alerta de error
                                mostrarAlerta("Hubo un error al intentar descargar el archivo. Por favor, intenta nuevamente más tarde.");
                                setTimeout(async () => {
                                    await actualizarData()
                                }, 1000);
                            }
                        }

                        renderClientesA1B2C3(misClientes)
                    </script>
                </div>
                <!-- Mensajeria -->
                <div id="mess" class="w-100 tab-pane fade" style="padding-top: 1rem;">
                    <div id="bajarMensaRespo" class="w-100" align="center">
                        <br>
                        <h2>Mis Mensajes</h2>
                        <div class="w-100" align="center">
                            <!-- Mensaje de cantidad de clientes -->
                            <h4 id="cantMensajesA1B2C3">Actualmente NO tienes mensajes.</h4>
                            <script>
                                let misMensajes = [];
                                if (ownerMensajes.length >= 1) {
                                    let misMensa = ownerMensajes.filter(m => m.idOwner == idOwner && !m.nwePromoOk && !m.nweNoticias);
                                    misMensajes = misMensa;
                                    function actualizarCantidadMensajesA1B2C3() {
                                        const cantMensajes = document.getElementById("cantMensajesA1B2C3");
                                        if (misMensajes.length >= 1) {
                                            cantMensajes.innerHTML = `<h4>Tienes ${misMensajes.length} mensajes.</h4>`;
                                        } else {
                                            cantMensajes.innerHTML = `<h4>
                                                Actualmente NO tienes mensajes. 
                                                <br>
                                                Comienza a vender y recibirás algunos.</h4>`;
                                        }
                                    }
                                    actualizarCantidadMensajesA1B2C3();
                                }
                            </script>
                            <br>
                            <div id="hideFil" style="margin-left: 4rem" class="d-flex justify-content-center align-items-center" align="center">
                                <!-- Buscador -->
                                <div class="align-items-center" align="center">
                                    <p>Buscar cliente por nombre</p>
                                    <div class="d-flex align-items-center">
                                        <input placeholder="Buscar cliente" type="text" id="inputBuscarMensajeA1B2C3" oninput="filtrarPorNombreMensajeA1B2C3()" class="form-control" style="width:150px;">
                                        <a class="fas fa-search" onclick="filtrarPorNombreMensajeA1B2C3()" style="font-size:1.5rem; margin: 1rem;"></a>
                                    </div>
                                    <select id="selectMensajesEncontradosA1B2C3" size="5" onchange="seleccionarMensajeA1B2C3()" class="form-select" style="width:150px; display:none; position: absolute; z-index: 999999;"></select>
                                </div>
                                <!-- reiniciador -->
                                <div class="col-auto" style="margin: auto 2rem auto 6rem;">
                                    <button class="btn btn-outline-secondary" onclick="reiniciarFiltroFechasA1B2C3()">
                                        <i class="fas fa-sync-alt"></i>
                                    </button>
                                </div>
                                <!-- Filtro por fechas -->
                                <div>
                                    <p>Filtrar y ordenar por fechas</p>
                                    <div class="row align-items-center">
                                        <div class="col">
                                            <label for="fechaDesdeA1B2C3">Desde:</label>
                                            <input type="date" id="fechaDesdeA1B2C3" class="form-control" onchange="setTimeout(filtrarPorFechasA1B2C3, 2000)">
                                        </div>
                                        <div class="col">
                                            <label for="fechaHastaA1B2C3">Hasta:</label>
                                            <input type="date" id="fechaHastaA1B2C3" class="form-control" onchange="setTimeout(filtrarPorFechasA1B2C3, 2000)">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br>
                        <div id="contenedorMensajesA1B2C3" class="card-container"></div>
                        <br><br><br>
                        <div class="card-footer fixed-bottom bg-white opacity-8" style="z-index: 9999999; padding: 1rem; margin-top: 1rem">
                            <button class="btn btn-primary" onclick="exportarMensajesAExcelB85485(misMensajes)">Descargar en Excel</button>
                        </div>
                    </div>
                    <script>
                        // Función para renderizar mensajes
                        function renderMensajesA1B2C3(misMensajes) {
                            const contenedor = document.getElementById('contenedorMensajesA1B2C3');
                            contenedor.innerHTML = ''; // Limpiar el contenedor

                            // Ordenar los mensajes de más reciente a más viejo
                            misMensajes.sort((a, b) => new Date(b.date) - new Date(a.date));

                            misMensajes.forEach(mensaje => {
                                const card55 = document.createElement('div');
                                card55.className = 'custom-cardA1B2C3';
                                card55.style.width = "333px"; // Define el ancho del contenedor de la tarjeta
                                card55.style.padding = '10px'; // Asegura que el contenido no se desborde
                                card55.style.overflow = 'hidden'; // Asegura que el contenido no se desborde

                                // Obtener los valores de emailCliente y numCelCliente
                                const emails = Array.isArray(mensaje.emailCliente) && mensaje.emailCliente.length > 0 
                                    ? mensaje.emailCliente.map(emailObj => emailObj.emailCliente).join('<br>') 
                                    : 'No disponible';

                                const telefonos = Array.isArray(mensaje.numCelCliente) && mensaje.numCelCliente.length > 0 
                                    ? mensaje.numCelCliente.map(telObj => telObj.numCelCliente).join('<br>') 
                                    : 'No disponible';

                                // Formatear la fecha a dd/mm/yyyy
                                const formattedDate = new Date(mensaje.date).toLocaleDateString('es-ES');

                                card55.innerHTML = `
                                    <div class="custom-card-bodyA1B2C3" style="padding: 10px !important; word-wrap: break-word;">
                                        <div align="left" style="word-wrap: break-word;">
                                            <div class="custom-card-headerA1B2C3" style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                                                ${mensaje.nombreCliente}
                                            </div>
                                            <p style="padding: 5px ;"><strong>Fecha:</strong><br> <span style="word-wrap: break-word;">${formattedDate}</span></p>
                                            <p style="padding: 5px ;"><strong>Mensaje:</strong><br> <span style="word-wrap: break-word;">${mensaje.messageOwner}</span></p>
                                        </div>
                                        <button class="btn btn-danger custom-buttonA1B2C3" onclick="eliminarMensajeA1B2C3('${mensaje._id}')">Eliminar</button>
                                    </div>
                                `;
                                contenedor.appendChild(card55);
                            });
                        }

                        // Función para eliminar mensaje
                        async function eliminarMensajeA1B2C3(idMensaje) {
                            try {
                                if (confirm('¿Estás seguro de que deseas eliminar este mensaje?')) {
                                    const formData = new FormData();
                                    formData.append('idMensaje', idMensaje);

                                    const response = await fetch(`${endpoints[47]}`, {
                                        method: 'POST',
                                        body: formData,
                                        headers: { 'Authorization': `Bearer ${jwToken}` }
                                    });

                                    if (response.ok) {
                                        mostrarExito('Mensaje eliminado exitosamente.');
                                        renderMensajesA1B2C3(misMensajes);
                                        await actualizarData();
                                    } else {
                                        mostrarAlerta('Hubo un error al eliminar el mensaje.');
                                    }
                                }
                            } catch (error) {
                                console.error('Error:', error);
                                mostrarAlerta('Ocurrió un error: ' + error.message);
                                setTimeout(async () => await actualizarData(), 1000);
                            }
                        }

                        // Filtro por nombre
                        function filtrarPorNombreMensajeA1B2C3() {
                            const inputBuscar = document.getElementById('inputBuscarMensajeA1B2C3').value.toLowerCase();
                            const mensajesFiltrados = misMensajes.filter(mensaje =>
                                mensaje.nombreCliente.toLowerCase().includes(inputBuscar)
                            );

                            renderMensajesA1B2C3(mensajesFiltrados);
                        }

                        // Filtro por fechas
                        function filtrarPorFechasA1B2C3() {
                            const fechaDesde = new Date(document.getElementById('fechaDesdeA1B2C3').value);
                            const fechaHasta = new Date(document.getElementById('fechaHastaA1B2C3').value);
                            const mensajesFiltrados = misMensajes.filter(mensaje => {
                                const mensajeFecha = new Date(mensaje.date);
                                return mensajeFecha >= fechaDesde && mensajeFecha <= fechaHasta;
                            });

                            renderMensajesA1B2C3(mensajesFiltrados);
                        }

                        // Reiniciar filtro
                        function reiniciarFiltroFechasA1B2C3() {
                            document.getElementById('fechaDesdeA1B2C3').value = '';
                            document.getElementById('fechaHastaA1B2C3').value = '';
                            renderMensajesA1B2C3(misMensajes);
                        }

                        renderMensajesA1B2C3(misMensajes)

                    </script>
                </div>
                <!-- Mis Finanzas -->
                <div id="finans" class="w-100 tab-pane fade" align="center" style="">
                    <br><br>
                    <h4 id="bajarEstatsRespo">Estadísticas & Finanzas</h4>
                    <!-- Sub Nav Tabs -->
                    <ul class="nav nav-tabs w-100" style="background:transparent; margin: 1rem">
                        <li class="nav-item">
                            <a class="nav-link active" data-bs-toggle="tab" href="#quik">Quik view</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" href="#detVent">Detalle de las ventas</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" href="#oter">Ingresos & Egresos</a>
                        </li>
                        <li class="nav-item" id="disapRetMem">
                            <a class="nav-link" data-bs-toggle="tab" href="#Retiros">Retiros</a>
                        </li>
                    </ul>
                    <script>
                        // Obtener el elemento de la lista
                        const retirosNavItem = document.getElementById('disapRetMem');
                        // Verificar si tipoMembresia es "basic"
                        if (dataOwner.tipoMembresia !== 'basic') {
                            // Ocultar el elemento si el tipo de membresía no es "basic"
                            retirosNavItem.style.display = 'none';
                        }
                    </script>
                    <div class="tab-content" align="center">
                        <!-- quik View -->
                        <div align="center" id="quik" class="container-xxl tab-pane active " style="position: relative !important;">
                            <br>
                            <h4>Quik view</h4>
                            <div id="quikViewContainer" class="d-flex flex-wrap justify-content-center" style="text-align: center; padding-top: 2rem;">
                                <h4>
                                    Aún no tienes ventas. 
                                    <br> 
                                    Entra en "Marketing" y genera algunas promociones.
                                </h4>
                            </div>
                            <script>
                                // Supongamos que 'Ventas2' es tu array de ventas
                                const Ventas2 = ventasOwner;
                                function formatearDinero(valor) {
                                    return `$${valor.toLocaleString('es-AR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
                                }
                                // Función para calcular y renderizar las estadísticas
                                function renderQuikView(Ventas2) {
                                const quikViewContainer = document.getElementById('quikViewContainer');

                                // Verificar si Ventas2 está definido y no está vacío
                                if (!Ventas2 || Ventas2.length === 0) {
                                    //console.log("No hay datos de ventas disponibles.");
                                    return;
                                }
                                else{
                                    quikViewContainer.innerHTML = '';
                                }
                               //console.log("11111111111111111111111Datos de ventas:", Ventas2);
                                // Calcular estadísticas
                                const totalVentas = Ventas2.length;
                                //console.log("Total de ventas:", totalVentas);
                                // Calcular la facturación total
                                const totalFacturacion = Ventas2.reduce((sum, venta) => {
                                    // Verificar si TotalCompra está definido
                                    const totalCompra = venta.TotalCompra ? parseFloat(venta.TotalCompra) : 0;
                                    if (venta.TotalCompra === undefined) {
                                        //console.warn("Falta TotalCompra en una de las ventas, se cuenta como $0:", venta);
                                    }
                                    return sum + totalCompra;
                                }, 0);

                                //console.log("Facturación total:", totalFacturacion);

                                // Calcular el ticket promedio
                                const ticketPromedio = totalVentas > 0 ? totalFacturacion / totalVentas : 0;
                                //console.log("Ticket promedio:", ticketPromedio);

                                // Calcular la cantidad de clientes únicos
                                const cantidadClientes = new Set(Ventas2.map(venta => venta.idCliente)).size;
                                //console.log("Cantidad de clientes únicos:", cantidadClientes);

                                // Obtener los 5 primeros clientes con más facturación
                                const clientesFacturacion = Ventas2.reduce((acc, venta) => {
                                    const totalCompra = venta.TotalCompra ? parseFloat(venta.TotalCompra) : 0;
                                    const nombreCliente = venta.nombreCli || '';
                                    acc[nombreCliente] = (acc[nombreCliente] || 0) + totalCompra;
                                    return acc;
                                }, {});

                                //console.log("Facturación por cliente:", clientesFacturacion);

                                const topClientes = Object.entries(clientesFacturacion).sort((a, b) => b[1] - a[1]).slice(0, 5);
                                //console.log("Top 5 clientes con más facturación:", topClientes);

                                // Obtener los 5 productos más vendidos
                                const productosVendidos = Ventas2.reduce((acc, venta) => {
                                    if (venta.listaProductos) {
                                        venta.listaProductos.forEach(prod => {
                                            acc[prod.nombreProd] = (acc[prod.nombreProd] || 0) + prod.cantidadProductos;
                                        });
                                    }
                                    return acc;
                                }, {});
                                //console.log("Cantidad de productos vendidos:", productosVendidos);
                                const topProductos = Object.entries(productosVendidos).sort((a, b) => b[1] - a[1]).slice(0, 5);

                                // Obtener las 5 promos más vendidas
                                const promosVendidas = Ventas2.reduce((acc, venta) => {
                                    venta.listaProductos.forEach(prod => {
                                            if (prod.esPromocion) {
                                            acc[prod.nombreProd] = (acc[prod.nombreProd] || 0) + prod.cantidadProductos;
                                        }
                                    });
                                    return acc;  
                                }, {});
                                const topPromos = Object.entries(promosVendidas).sort((a, b) => b[1] - a[1]).slice(0, 5);
                                //console.log("Top 5 productos más vendidos:", Ventas2);
                                // Obtener totales de promociones vendidas y la facturación total de promociones
                                const promocionesVendidas = Ventas2.reduce((acc, venta) => {
                                    venta.listaProductos.forEach(prod => {
                                        if (prod.esPromocion) {
                                            //console.log("promocionesVendidas",prod)
                                            acc.promocionesFacturacion += prod.subTotalCompra; // Acumular correctamente el subTotalCompra
                                            acc.promocionesCantidad += prod.cantidadProductos; // Acumular correctamente la cantidadProductos
                                        }
                                    });
                                    return acc;
                                }, { promocionesFacturacion: 0, promocionesCantidad: 0 });
                                //console.log("Promociones vendidas:", promocionesVendidas);

                                // Renderizar estadísticas
                                const estadisticas = [
                                    { titulo: "Cant. total de ventas", valor: totalVentas },
                                    { titulo: "Facturación total", valor: formatearDinero(totalFacturacion) },
                                    { titulo: "Ticket promedio", valor: formatearDinero(ticketPromedio) },
                                    { titulo: "Cantidad de clientes", valor: cantidadClientes },
                                    { 
                                        titulo: "5 primeros clientes con más facturación", 
                                        valor: topClientes.map(([cliente, facturacion]) => `<div style="text-align: left;">${cliente}: ${formatearDinero(facturacion)}</div>`).join('') 
                                    },
                                    { 
                                        titulo: "5 primeros productos más vendidos", 
                                        valor: topProductos.map(([nombreProd, cantidad]) => `<div style="text-align: left;">${nombreProd}: ${cantidad} unidades</div>`).join('') 
                                    },
                                    {
                                        titulo: "5 primeras promos más vendidas", 
                                        valor: topPromos.map(([nombreProd, cantidad]) => `<div style="text-align: left;">${nombreProd}: ${cantidad} unidades</div>`).join('') 
                                        },
                                        { titulo: "Cantidad de Promociones vendidas", valor: promocionesVendidas.promocionesCantidad },
                                        { titulo: "Total facturación de promociones", valor: formatearDinero(promocionesVendidas.promocionesFacturacion) 
                                    }                  
                                ];
                                estadisticas.forEach(stat => {
                                    const card = document.createElement('div');
                                    card.className = 'QVcard mb-3';
                                    card.style.width = '23%'; // Ajusta el tamaño según sea necesario
                                    card.style.maxHeight = '300px'; // Limitar la altura máxima
                                    card.style.overflowY = 'auto'; // Scroll vertical
                                    card.innerHTML = `
                                        <div class="card-body">
                                            <h5 class="card-title">${stat.titulo}</h5>
                                            <p class="card-text">${stat.valor}</p>
                                        </div>
                                    `;
                                    quikViewContainer.appendChild(card);
                                });
                                }
                                // Función para formatear el dinero en pesos contable con comas y puntos
                                function formatearDinero(valor) {
                                return `$${valor.toLocaleString('es-AR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
                                }
                                renderQuikView(Ventas2);
                                function exportarFinanzasAExcelB85485(Ventas2) {
                                    try {
                                        // Crear un libro de trabajo
                                        const workbook = XLSX.utils.book_new();

                                        // Filtrar los datos para eliminar idCliente e idDueno
                                        const datosFiltrados = Ventas2.map(({ idCliente, idDueno, ...resto }) => resto);
                                        
                                        // Crear una hoja para los datos principales
                                        const worksheetDatos = XLSX.utils.json_to_sheet(datosFiltrados);
                                        XLSX.utils.book_append_sheet(workbook, worksheetDatos, "Finanzas");

                                        // Analizar cada objeto en Ventas2 para identificar arrays
                                        Ventas2.forEach((venta, index) => {
                                            Object.keys(venta).forEach(key => {
                                                if (Array.isArray(venta[key])) {
                                                    // Convertir el array a una hoja de trabajo
                                                    const arraySheet = XLSX.utils.json_to_sheet(venta[key]);
                                                    // Usar el índice para evitar nombres de hojas duplicadas
                                                    XLSX.utils.book_append_sheet(workbook, arraySheet, `${key}_${index}`);
                                                }
                                            });
                                        });

                                        // Generar un archivo Excel
                                        XLSX.writeFile(workbook, 'MisFinanzas.xlsx');
                                        
                                        // Mostrar alerta de éxito
                                        mostrarExito("El archivo Excel se ha descargado correctamente.");
                                        setTimeout(async () => {
                                            await actualizarData();
                                        }, 1000);

                                    } catch (error) {
                                        console.error("Error al generar el archivo Excel:", error);
                                        // Mostrar alerta de error
                                        mostrarAlerta("Hubo un error al intentar descargar el archivo. Por favor, intenta nuevamente más tarde.");
                                        setTimeout(async () => {
                                            await actualizarData();
                                        }, 1000);
                                    }
                                }
                            </script>
                            <style>
                            #quikViewContainer {
                                display: flex;
                                flex-wrap: wrap;
                                justify-content: space-between; /* Ajusta el espacio entre tarjetas */
                                gap: 10px; /* Espaciado entre tarjetas */
                            }

                            .QVcard {
                                background-color: transparent;
                                border: 1px solid #dcdcdc;
                                border-radius: 8px;
                                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                                overflow: hidden;
                                padding: 15px;
                                transition: transform 0.3s ease-in-out;
                                flex-basis: calc(33.33% - 20px); /* Ocupa un tercio del ancho del contenedor menos el espacio entre tarjetas */
                                box-sizing: border-box;
                                transition: background-color 1.5s, transform 1.5s;
                            }

                            .QVcard:hover {
                                background-color: aliceblue;
                                transform: scale(1.02);
                            }

                            .QVcard .card-body {
                                display: flex;
                                flex-direction: column;
                            }

                            .QVcard .card-title {
                                font-size: 1.2rem;
                                font-weight: bold;
                                color: #333333;
                                margin-bottom: 10px;
                            }

                            .QVcard .card-text {
                                font-size: 1rem;
                                color: #666666;
                            }

                            /* Media queries para hacer responsivo el diseño */
                            @media (max-width: 992px) {
                                .QVcard {
                                    flex-basis: calc(50% - 20px); /* Ocupa la mitad del ancho en pantallas medianas */
                                }
                            }

                            @media (max-width: 768px) {
                                .QVcard {
                                    flex-basis: calc(100% - 20px); /* Ocupa todo el ancho en pantallas pequeñas */
                                }
                            }

                            </style>
                        </div>
                        <!-- detalle de ventas -->
                        <div id="detVent" class="container-xxl tab-pane" style="position: relative !important;">
                            <h4 align="center">Detalle de las ventas</h4>
                            <p>Puedes bajar en el excel los datos para obtener todas las metricas y estadisticas que desees.</p>
                            <style>
                                /* Estilos para el contenedor de las tarjetas */
                                #detVent {
                                    position: relative !important;
                                    padding: 20px;
                                }

                                /* Estilos para el contenedor de las tarjetas en fila */
                                #dcardContainer {
                                    display: flex;
                                    flex-wrap: wrap; /* Permite que las tarjetas se ajusten en varias filas */
                                    gap: 15px; /* Espacio entre tarjetas */
                                }

                                /* Estilos para las tarjetas Dcard */
                                .Dcard {
                                    width: 300px; /* Ajusta el ancho de la tarjeta según sea necesario */
                                    height: 250px; /* Ajusta la altura de la tarjeta según sea necesario */
                                    background-color: transparent; /* Color de fondo de la tarjeta */
                                    border: 1px solid #ddd; /* Borde de la tarjeta */
                                    border-radius: 5px; /* Bordes redondeados */
                                    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Sombra de la tarjeta */
                                    overflow-y: auto; /* Scroll vertical si el contenido excede el alto */
                                    margin-bottom: 15px; /* Espacio entre tarjetas */
                                }

                                /* Estilos para el contenido de la tarjeta */
                                .Dcard .card-body {
                                    padding: 15px; /* Espaciado interno de la tarjeta */
                                }

                                /* Estilos para el título de la tarjeta */
                                .Dcard .card-title {
                                    font-size: 1.25rem; /* Tamaño del texto del título */
                                    margin-bottom: 10px; /* Espacio debajo del título */
                                    text-align: center; /* Centra el título */
                                }

                                /* Estilos para el texto de la tarjeta */
                                .Dcard .card-text {
                                    font-size: 1rem; /* Tamaño del texto del contenido */
                                    margin-bottom: 5px; /* Espacio entre líneas de texto */
                                    text-align: left; /* Alinea el texto a la izquierda */
                                }

                                /* Estilos para la lista de productos */
                                .Dcard ul {
                                    list-style-type: none; /* Elimina los puntos de la lista */
                                    padding: 0; /* Elimina el espaciado interno */
                                    margin: 0; /* Elimina el margen externo */
                                }

                                .Dcard ul li {
                                    text-align: left; /* Alinea el texto a la izquierda */
                                }
                            </style>
                            <!-- Contenedor para las tarjetas Dcard -->
                            <div id="dcardContainer"><!-- Las tarjetas Dcard se renderizarán dinámicamente aquí --></div>
                            <!-- renderiza el detalles de las ventas -->
                            <script>
                                // Función para formatear la fecha
                                function formatFecha(fecha) {
                                    const date = new Date(fecha);
                                    const horas = date.getHours().toString().padStart(2, '0');
                                    const minutos = date.getMinutes().toString().padStart(2, '0');
                                    const dia = date.getDate().toString().padStart(2, '0');
                                    const mes = (date.getMonth() + 1).toString().padStart(2, '0'); // Los meses son 0-indexados
                                    const año = date.getFullYear();
                                    return `${horas}:${minutos} ${dia}/${mes}/${año}`;
                                }

                                // Función para renderizar las tarjetas Dcard
                                function renderDetallesVentas(Ventas2) {
                                    const dcardContainer = document.getElementById('dcardContainer');
                                    dcardContainer.innerHTML = '';

                                    // Verificar si Ventas2 está definido y no está vacío
                                    if (!Ventas2 || Ventas2.length === 0) {
                                        //console.log("No hay datos de ventas disponibles.");
                                        return;
                                    }

                                    // Ordenar las ventas por fecha, de la más reciente a la más antigua
                                    Ventas2.sort((a, b) => new Date(b.fecha) - new Date(a.fecha));

                                    Ventas2.forEach(venta => {
                                        // Crear el contenedor de la tarjeta
                                        const card = document.createElement('div');
                                        card.className = 'Dcard';

                                        // Agregar contenido a la tarjeta
                                        card.innerHTML = `
                                            <div class="card-body QVcard">
                                                <h5 class="card-title">Código Pedido: ${venta.codigoPedido}</h5>
                                                <p class="card-text"><strong>Cliente:</strong> ${venta.nombreCli || 'Sin nombre Cliente'}</p>
                                                <p class="card-text"><strong>Email:</strong> ${venta.email || 'Sin data cliente'}</p>
                                                <p class="card-text"><strong>Fecha:</strong> ${venta.fecha ? formatFecha(venta.fecha) : 'No disponible'}</p>
                                                <p class="card-text"><strong>Total Compra:</strong> $${parseFloat(venta.TotalCompra || 0).toFixed(2)}</p>
                                                <p class="card-text"><strong>Productos:</strong></p>
                                                <ul>
                                                    ${venta.listaProductos ? venta.listaProductos.map(prod => `
                                                        <li>${prod.nombreProd || 'Producto sin nombre'} - ${prod.cantidadProductos} unidades</li>
                                                    `).join('') : '<li>No hay productos disponibles</li>'}
                                                </ul>
                                            </div>
                                        `;

                                        // Agregar la tarjeta al contenedor
                                        dcardContainer.appendChild(card);
                                    });
                                }

                                // Renderizar las tarjetas
                                renderDetallesVentas(Ventas2);
                            </script>
                            <br><br><br>
                            <div class="card-footer fixed-bottom bg-white opacity-8" style="z-index: 9999999; margin: 0; bottom: 0;">
                                <button id="exportarExcelBtn" onclick="exportarFinanzasAExcelB85485(Ventas2)" class="btn btn-primary">Exportar a Excel</button>
                            </div>
                        </div>
                        <!-- ingresos egresos -->
                        <div id="oter" class="container-xxl tab-pane mx-1" style="position: relative !important;">
                            <h4 align="center">Ingresos & Egresos</h4>
                            <!-- Filtro por fechas -->
                            <div class="container">
                                <p>Filtrar y ordenar por fechas</p>
                                <div class="row align-items-center">
                                    <div class="col-sm-4">
                                        <label for="fechaDesdeA1B2C3">Desde:</label>
                                        <input type="date" id="fechaDesdeA1B2C987" class="form-control">
                                    </div>
                                    <!-- reiniciador -->
                                    <div class="col-auto" style="margin: auto ">
                                        <button class="btn btn-outline-secondary" onclick="r977einiciarFiltroFechasA1B2C3()">
                                            <i class="fas fa-sync-alt"></i>
                                        </button>
                                    </div>
                                    <div class="col-sm-4">
                                        <label for="fechaHastaA1B2C3">Hasta:</label>
                                        <input type="date" id="fechaHastaA1B2C987" class="form-control" onchange="setTimeout(l789filtrarPorFechasA1B2C3, 2000)">
                                    </div>
                                </div>
                            </div>
                            <br>
                            <div class="resultados-financieros"></div>
                            <br><br>
                            <!-- todas tu egresos -->
                            <div class="card-footer fixed-bottom bg-white opacity-8" style="z-index: 9999999; margin: 0; bottom: 0;">
                                <button id="exportarExcelBtn" onclick="exportarFinanzasAExcelB85485(Ventas2)" class="btn btn-primary">Exportar a Excel</button>
                            </div>
                        </div>
                        <!-- Render Retiros -->
                        <div id="Retiros" class="container-xxl tab-pane mx-1" style="position: relative !important;">
                            <div id="dineroActual"></div>
                            <div class="container mt-5">
                                <div class="w-100">  
                                    <div class="card shadow-sm border-light">  
                                        <div class="card-header">  
                                            <h3 class="card-title text-center mb-4">Solicitar retiro de dinero</h3>  
                                        </div>  
                                        <div class="card-body">  
                                            <form id="retiroForm">  
                                                <div class="mb-3">  
                                                    <label for="monto" class="form-label">Monto</label>  
                                                    <input type="text" class="form-control form-control-lg" id="monto" placeholder="Monto en pesos" required>  
                                                </div>  
                                                <div class="mb-3">  
                                                    <label for="descripcion" class="form-label">Descripción</label>  
                                                    <textarea class="form-control form-control-lg" id="descripcion" rows="2" placeholder="Descripción del retiro (opcional)" required></textarea>  
                                                </div>  
                                                <div class="text-center">  
                                                    <button type="submit" class="btn btn-primary btn-lg">Agregar Retiro</button>  
                                                </div>  
                                            </form>  
                                            <script>  
                                                document.getElementById('monto').addEventListener('input', function(event) {  
                                                    let value = event.target.value;  
                                                    
                                                    // Eliminar cualquier carácter que no sea número  
                                                    value = value.replace(/[^\d]/g, '');  
                                                    
                                                    // Convertir a un número absoluto (evitar números negativos)  
                                                    const numericValue = Math.abs(parseInt(value || '0', 10));  
                                                    
                                                    // Formatear como moneda con el símbolo de pesos  
                                                    event.target.value = new Intl.NumberFormat('es-AR', {  
                                                        style: 'currency',  
                                                        currency: 'ARS',  
                                                        minimumFractionDigits: 0  
                                                    }).format(numericValue);  
                                                });  
                                            </script>  
                                        </div>  
                                        <div class="card-footer">  
                                            <p>Debes tener la documentación al día</p>  
                                        </div>  
                                    </div>  
                                </div>
                            </div>
                            <div id="agregarRetiros" class="row"></div>
                            <script>
                                let fondos = 0
                                function renderRetiros() {
        const contenedor = document.getElementById('agregarRetiros');
        contenedor.innerHTML = '';
        if (dataOwner.retiros && dataOwner.retiros.length > 0) {
            dataOwner.retiros.forEach(retiro => {
                const fecha = new Date(retiro.fecha).toLocaleDateString();
                const montoFormateado = retiro.monto.toLocaleString('es-AR', { style: 'currency', currency: 'ARS' });
                const cardHTML = `
    <div class="col-md-4 col-sm-12 mb-3">
        <div class="card">
            <div class="card-header">
                Retiro ID: ${retiro.codigoRetiro}
            </div>
            <div class="card-body">
                <h5 class="card-title">Monto: ${montoFormateado}</h5>
                <p class="card-text"><strong>Fecha:</strong> ${fecha}</p>
                <p class="card-text"><strong>Descripción:</strong> ${retiro.descripcion}</p>
                <p class="card-text"><strong>Estado:</strong> ${retiro.estado}</p>
            </div>
            <div class="card-footer text-muted">
                Información del retiro
            </div>
        </div>
    </div>
`;
                contenedor.innerHTML += cardHTML;
            });
        } else {
            contenedor.innerHTML = '<p>No se encontraron retiros.</p>';
        }
    }
                                // Llamar a la función para renderizar los retiros
                                renderRetiros();
                            </script>
                        </div>
                    </div>
                    <script>
                        // Función para filtrar ventas por fechas seleccionadas
                        function l789filtrarPorFechasA1B2C3() {
                            console.log("fechaDesdeInput fechas, no se realizará el filtrado.")
                            // Obtener los valores de las fechas seleccionadas
                            //mostrarModalLoading()
                            const fechaDesdeInput = document.getElementById('fechaDesdeA1B2C987').value;
                            const fechaHastaInput = document.getElementById('fechaHastaA1B2C987').value;
                            console.log("2222fechaDesdeInput fechas.", fechaDesdeInput, fechaHastaInput);
                            // Comprobar que ambas fechas estén seleccionadas
                            if (!fechaDesdeInput || !fechaHastaInput) {
                                console.log("Faltan fechas, no se realizará el filtrado.");
                                return;
                            }

                            // Convertir las fechas seleccionadas a objetos Date
                            const fechaDesde = new Date(fechaDesdeInput);
                            const fechaHasta = new Date(fechaHastaInput);

                            // Validar que la fecha "desde" no sea mayor que la fecha "hasta"
                            if (fechaDesde > fechaHasta) {
                                mostrarAlerta("La fecha 'Desde' no puede ser mayor que la fecha 'Hasta'.");
                                return;
                            }

                            // Filtrar el array Ventas2 para obtener solo las ventas dentro del rango de fechas
                            const ventasFiltradas = Ventas2.filter(venta => {
                                const fechaVenta = new Date(venta.fecha); // Asegúrate de que `venta.fecha` esté en formato ISO 'yyyy-mm-dd'
                                return fechaVenta >= fechaDesde && fechaVenta <= fechaHasta;
                            });

                            console.log("Ventas filtradas: ", ventasFiltradas);

                            // Actualizar el resumen financiero con las ventas filtradas
                            actualizarResumenFinanciero(ventasFiltradas);
                            //ocultarModalLoading()
                        }

                        // Convertir fecha en formato dd/mm/yyyy a un objeto Date
                        function convertirFechaDDMMYYYY(fechaString) {
                            const partes = fechaString.split('/');
                            return new Date(`${partes[2]}-${partes[1]}-${partes[0]}`);
                        }

                        function r977einiciarFiltroFechasA1B2C3() {
                            console.log("Reiniciando filtro de fechas...");
                            // Reiniciar los campos de fecha
                            document.getElementById('fechaDesdeA1B2C3').value = '';
                            document.getElementById('fechaHastaA1B2C3').value = '';

                            // Mostrar todas las ventas nuevamente
                            actualizarResumenFinanciero(Ventas2);
                        }

                        // Función para actualizar el resumen financiero con los datos filtrados
                        function actualizarResumenFinanciero(ventas) {
                            // Sumar el total de ingresos
                            //console.log("Que datos hay en Ventas2???????????????????????????",Ventas2)
                            const totalIngresosMP = Ventas2.reduce((sum, venta) => {
                                return venta.tipoDePago === "Mercado Pago" 
                                    ? sum + (parseFloat(venta.TotalCompra) || 0) 
                                    : sum;
                            }, 0);

                            const totalIngresosPCF = Ventas2.reduce((sum, venta) => {
                                return venta.tipoDePago === "Pago Contra Factura" 
                                    ? sum + (parseFloat(venta.TotalCompra) || 0) 
                                    : sum;
                            }, 0);

                            const totalIngresos = totalIngresosMP + totalIngresosPCF;

                            //const totalIngresos = ventas.reduce((acumulador, venta) => acumulador + venta.TotalCompra, 0);
                            //console.log("0000000000000000Que hay en financias", totalIngresos)
                            // Calcular comisiones (16.5% del total de ingresos)
                            //const comisiones = totalIngresos * 0.165;
                            const basicData4 = JSON.parse(sessionStorage.getItem("basicData"))
                            const comisiones = basicData4.comisionBasic  * 0.01 * totalIngresosMP;

                            //console.log("11111111Que hay en financias", basicData4.tiempoParking)

                            // Definir otros egresos (puedes modificar el valor aquí)
                            
                            // Sumar todos los montos en el array de retiros
                            const otrosEgresos = dataOwner.retiros.reduce((total, retiro) => total + retiro.monto, 0);
                            //console.log("22222222Que hay en otrosEgresos", otrosEgresos)

                            // calcular el monto que esta en espera de parking
                            const diasDParking = basicData4.tiempoParking; // Ejemplo del costo de parking por 72hrs
                            //console.log("3333333Que hay en diasDParking", diasDParking)
                            // Obtener la fecha actual
                            const fechaActual = new Date();

                            // Función para calcular la diferencia en días entre dos fechas
                            function diferenciaEnDias(fecha1, fecha2) {
                                const msPorDia = 24 * 60 * 60 * 1000;
                                return Math.round((fecha2 - fecha1) / msPorDia);
                            }

                            // Inicializar el totalMontoParking
                            let totalMontoParking = 0;

                           // console.log("4444444444444Que hay en Ventas2", Ventas2)
                            // Iterar sobre cada objeto en Ventas2
                            Ventas2.forEach(venta => {
                                // Convertir la fecha del objeto a un objeto Date
                                const fechaVenta = new Date(venta.fecha);
                                // Calcular la diferencia en días entre la fecha actual y la fecha de la venta
                                const diasDiferencia = diferenciaEnDias(fechaVenta, fechaActual);
                                // Verificar si la diferencia en días es menor que diasDParking
                                if (diasDiferencia < diasDParking) {
                                    // Verificar si existe TotalCompra y si es un número válido
                                    if (venta.TotalCompra !== undefined && venta.TotalCompra !== null && !isNaN(venta.TotalCompra)) {
                                        // Sumar el TotalCompra al totalMontoParking
                                        totalMontoParking += venta.TotalCompra;
                                    }
                                }
                            });

                            // Formatear totalMontoParking como pesos mexicanos
                            const totMonParkPesos = totalMontoParking.toLocaleString('es-MX', { style: 'currency', currency: 'MXN' });

                            fondos = totalIngresosMP - comisiones - otrosEgresos - totalMontoParking
                            // Calcular el monto disponible para retirar
                            const montoDisponible = totalIngresosMP - comisiones - otrosEgresos - totalMontoParking;
                            
                            //console.log("5555555555555555555Que hay en fondos", totalIngresos , comisiones , otrosEgresos , totalMontoParking, )
                            //console.log("5555555555555555555Que hay en montoDisponible", montoDisponible,)

                            // Función para formatear el monto como pesos mexicanos
                            function formatoPesos(monto) {
                                return monto.toLocaleString('es-MX', { style: 'currency', currency: 'MXN' });
                            }

                            if (tipoMembresia == "basic" && montoDisponible >= 1) {
                                function generarIdSimple() {
                                    const caracteres = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
                                    let id = '';
                                    for (let i = 0; i < 6; i++) {
                                        const randomIndex = Math.floor(Math.random() * caracteres.length);
                                        id += caracteres[randomIndex];
                                    }
                                    return id;
                                }
                                // avisa a infoDiario rapido
                                const fechaActual2 = new Date().toLocaleDateString('es-ES', { day: '2-digit', month: '2-digit', year: '2-digit' }) + ' ' + new Date().toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
                                const montoD = formatoPesos(montoDisponible);
                                const datInfo = {
                                    Date: fechaActual2, 
                                    positivo:true,
                                    infoMensaje: `Hoy puedes retirar ${montoD}.`,
                                    idInfo:montoD
                                };

                                infoDiario(datInfo)
                            }

                            constDinerilo = document.getElementById("dineroActual")
                            constDinerilo.innerHTML = 
                            `   <h4> 
                                    Actualmente tiene ${formatoPesos(fondos)} para retirar. 
                                    <br> 
                                    La imputacion del retiro puede demorar hasta 72hrs.
                                </h4>
                            `

                            // Crear el HTML dinámicamente
                            const htmlContenido = `
                                <div class="card shadow-sm p-4 mb-4 bg-white">
                                    <h4 class="text-center">Total resumen financiero</h4>
                                    <table class="table table-bordered">
                                        <thead class="thead-light">
                                            <tr>
                                                <th>Descripción</th>
                                                <th class="text-right">Cantidad</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><strong>Total de Ingresos</strong></td>
                                                <td class="text-right">${formatoPesos(totalIngresos)}</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Total de Ingresos Pago Manual</strong></td>
                                                <td class="text-right">${formatoPesos(totalIngresosPCF)}</td>
                                            </tr>                                            
                                            <tr>
                                                <td><strong>Total de Ingresos con plataformas de pago. ( M.P. Stripe, Paypal, Modo, etc)</strong></td>
                                                <td class="text-right">${formatoPesos(totalIngresosMP)}</td>
                                            </tr>                                            
                                            <tr>
                                                <td><strong>Comisiones (16.5%)</strong></td>
                                                <td class="text-right">${formatoPesos(comisiones)}</td>
                                            </tr>
<tr>
    <td><strong>Retención parking 72 hrs</strong></td>
    <td class="text-end text-danger">${formatoPesos(totalMontoParking)}</td>
</tr>


                                            <tr>
                                                <td><strong>Retiros</strong></td>
                                                <td class="text-right">${formatoPesos(otrosEgresos)}</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Total de Egresos</strong></td>
                                                <td class="text-right">${formatoPesos(comisiones + otrosEgresos)}</td>
                                            </tr>
    <tr class="table-success">
        <td><strong>Puedes Retirar:</strong></td>
        <td class="text-right">
            ${montoDisponible < 0 ? '<strong>No puedes retirar</strong>' : formatoPesos(montoDisponible)}
        </td>
    </tr>
                                        </tbody>
                                    </table>
                                </div>
                            `;

                            // Insertar el HTML en el div
                            document.querySelector('.resultados-financieros').innerHTML = htmlContenido;
                        }

                        // Ejecutar la función para mostrar todas las ventas al inicio
                        actualizarResumenFinanciero(Ventas2);

                        // envia backend el retiro 
                        document.getElementById('retiroForm').addEventListener('submit', async function(event) {
                        event.preventDefault();
                        const monto = parseFloat(document.getElementById('monto').value.replace(/[^\d]/g, ''));
                        const descripcion = document.getElementById('descripcion').value;
                        const nuevoRetiro = { monto, descripcion, fecha: new Date().toISOString() };
                        const dataSend = { ...nuevoRetiro, idOwner, tranposterUser:null, tipoMembresia, fondos };
                        console.log("que fdatos envia a serler???????", cheqDocument, dataSend)
                        if (fondos >= monto && cheqDocument) {
                            fetch(`${endpoints[189]}`, {
                                method: 'POST',
                                headers: {
                                    'Authorization': `Bearer ${jwToken}`,
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify(dataSend)
                            })
                            .then(response => response.json())
                            .then(async data => {
                                mostrarExito('Retiro exitoso: ' + JSON.stringify(data.message));
                                document.getElementById('retiroForm').reset();
                                await actualizarData()
                                setTimeout(async function() {
                                    window.location.reload(true);
                                }, 2000); // 2000 milisegundos = 2 segundos
                            })
                            .catch(error => mostrarAlerta('Error: ' + error.message));
                        } else {
                            if (!cheqDocument || cheqDocument === null || cheqDocument === undefined ) {
                                mostrarAlerta('Para realizar un retiro de fondos debes subir tu documento.');
                                // Llamar a la función para cargar el contenido en el modal
                                await cargarModalDocumentos();
                                return
                            } else {
                                mostrarAlerta('Fondos insuficientes.');
                            }
                        }
                    });
                        // Validador documental
                        async function cargarModalDocumentos() {
                            const modal = new bootstrap.Modal(document.getElementById('modalMenu5'));
                            modal.show();

                            const modalMenu5 = document.getElementById('modalMenu5');
                            if (!modalMenu5) {
                                console.error("No se encontró el modal con id 'modalMenu5'.");
                                return;
                            }

                            // HTML del contenido del modal
                            modalMenu5.innerHTML =  `  
    <div class="modal-dialog">  
        <div class="modal-content">  
            <div class="modal-header">  
                <h5 class="modal-title">Subir Documentos para Fiscalizar</h5>  
                <button type="button" onclick="setTimeout(function() { window.location.reload(true); }, 0);" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>  
            </div>  
            <div class="modal-body">  
                <form id="documentUploadForm">  
                    <div class="mb-3">  
                        <label for="image1" class="form-label">Lado Frontal / adelante / primera hoja</label>  
                        <input type="file" class="form-control" id="image1" accept="image/*">  
                    </div>  
                    <div class="mb-3">  
                        <label for="image2" class="form-label">Lado dorsal / trasero / 2da hoja</label>  
                        <input type="file" class="form-control" id="image2" accept="image/*">  
                    </div>  
                    <div class="row">  
                        <div class="col">  
                            <img id="previewImage1" src="#" alt="Imagen 1" class="img-fluid" style="display:none;"/>  
                        </div>  
                        <div class="col">  
                            <img id="previewImage2" src="#" alt="Imagen 2" class="img-fluid" style="display:none;"/>  
                        </div>  
                    </div>  

                    <div class="mb-3">  
                        <label for="docType" class="form-label">Tipo de documento</label>  
                        <select class="form-control" id="docType">  
                            <option value="DNI">DNI</option>  
                            <option value="CI">C.I.</option>  
                            <option value="Pasaporte">Pasaporte</option>  
                            <option value="Otros">Otros</option>  
                        </select>  
                    </div>  
                    <div class="mb-3">  
                        <label for="docNumber" class="form-label">Número de documento</label>  
                        <input type="text" class="form-control" id="docNumber">  
                    </div>  
                    <div class="mb-3">  
                        <label for="expirationDate" class="form-label">Fecha de vencimiento</label>  
                        <input type="date" class="form-control" id="expirationDate">  
                    </div>  
<div class="mb-3">  
    <label for="CVBUType" class="form-label">CBU/CVU para depositarte (Debe ser del mismo titular del documento.)</label>  
    <select class="form-control" id="CVBUType">  
        <option value="CBU banco">CBU banco</option>  
        <option value="CVU Wallet">CVU Wallet</option>  
    </select>  
</div>  
<div class="mb-3">  
    <label for="CVBUNumber" class="form-label">Número de CBU / CVU (Debe ser del mismo titular del documento.)</label>  
    <input type="text" class="form-control" id="CVBUNumber">  
</div>  
<p>Si el titular del documento, cuenta en usatiendafacil.com y CBU/CVU no coinciden, el depósito NO se realiza.</p>
                    <div class="form-check">  
                        <input class="form-check-input" type="checkbox" id="authorizeCheck">  
                        <label class="form-check-label" for="authorizeCheck">  
                            Autorizo a que me llamen para validar mi documento si fuera necesario.  
                        </label>  
                    </div>  
                </form>  
            </div>  
            <div class="modal-footer">  
                <button type="button" class="btn btn-primary" id="submitDoc">Enviar Documento</button>  
            </div>  
        </div>  
    </div>  
`;                            // Eventos para previsualización de imágenes
                            document.getElementById('image1').addEventListener('change', function (event) {
                                mostrarImagen(event, 'previewImage1');
                            });
                            document.getElementById('image2').addEventListener('change', function (event) {
                                mostrarImagen(event, 'previewImage2');
                            });

                            // Función para previsualizar imágenes
                            function mostrarImagen(event, previewId) {
                                const file = event.target.files[0];
                                if (file) {
                                    const reader = new FileReader();
                                    reader.onload = function (e) {
                                        const imgElement = document.getElementById(previewId);
                                        imgElement.src = e.target.result;
                                        imgElement.style.display = 'block';
                                    };
                                    reader.readAsDataURL(file);
                                }
                            }

                            // Lógica de envío del formulario
                            document.getElementById('submitDoc').addEventListener('click', async function (event) {
                                event.preventDefault();

                                const tipoDocumento     = document.getElementById('docType').value;
                                const numeroDocumento   = document.getElementById('docNumber').value;
                                const fechaVencimiento  = document.getElementById('expirationDate').value;
                                const CVBUType          = document.getElementById('CVBUType').value;
                                const CVBUNumber        = document.getElementById('CVBUNumber').value;
                                const documentoFrontal  = document.getElementById('image1').files[0];
                                const documentoReverso  = document.getElementById('image2').files[0];
                                const autorizacionCheck = document.getElementById('authorizeCheck').checked;

                                if (!CVBUType || !CVBUNumber || !documentoFrontal || !documentoReverso || !autorizacionCheck) {
                                    mostrarAlerta("Por favor, completa todos los campos y sube ambos documentos.");
                                    return;
                                }

                                const formData = new FormData();
                                formData.append('tipoDocumento', tipoDocumento);
                                formData.append('numeroDocumento', numeroDocumento);
                                formData.append('fechaVencimiento', fechaVencimiento);
                                formData.append('documentoFrontal', documentoFrontal);
                                formData.append('documentoReverso', documentoReverso);
                                formData.append('autorizacionCheck', autorizacionCheck);
                                formData.append('idOwner', idOwner);
                                formData.append('urlOwner', urlOwner);
                                formData.append('CVBUNumber', CVBUNumber);
                                formData.append('CVBUType', CVBUType);
                                console.log("Que meierda envia??????", formData)
                                try {
                                    const response = await fetch(`${endpoints[190]}`, {
                                        method: 'POST',
                                        headers: {
                                            'Authorization': `Bearer ${jwToken}`,
                                        },
                                        body: formData
                                    });
                                    const result = await response.json();
                                    console.log("Martiiinnnnnnnnnnnnn", result)
                                    if (response.ok) {
                                        mostrarExito(result.message);
                                        await actualizarData()
                                        setTimeout(async function() {
                                            window.location.reload(true);
                                        }, 2000); // 2000 milisegundos = 2 segundos
                                    } else {
                                        mostrarAlerta("Error al enviar el documento: " + result.message);
                                    }
                                } catch (error) {
                                    console.error("Error al enviar el documento:", error);
                                    mostrarAlerta("Ocurrió un error al intentar enviar el documento.");
                                }
                            });
                        }
                    </script>
                </div>
            </div>
        </div>

        <!-- todos los modales de apoyo -->

        <!-- Modal editar producto -->
        <div class="modal fade container-xxl" id="editarProducto254" tabindex="-1" aria-labelledby="modalMenu1Label" aria-hidden="true" style="z-index: 9999;">
            <div id="borrarEditProd" class="modal-dialog modal-dialog-centered modal-xl"> <!-- Cambiado a modal-xl para extra ancho -->
                <div class="modal-content" align="center">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalMenu1Label">Haz click aquí y edita tu producto</h5>
                        <button type="button" class="btn-close" onclick="cerrarModalPorId('editarProducto254')" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div id="insertarProducto"></div>
                        <script>
                            // Objeto que contiene la opción seleccionada
                            let tipoTarjetaEdit = {
                                cardProdHor: false,
                                cardProdVert: false,
                                cardProdTra: false
                            };
                        
                            // Función para manejar el switch
                            function handleSwitchABCedit(tipoABC, elementABC) {
                                // Apagar todos los switches excepto el seleccionado
                                const switchesABC = ['switch1ABCedit', 'switch2ABCedit', 'switch3ABCedit'];
                                switchesABC.forEach(switchIdABC => {
                                    if (switchIdABC !== elementABC.id) {
                                        document.getElementById(switchIdABC).checked = false;
                                    }
                                });
                        
                                // Actualizar el objeto tipoTarjeta
                                tipoTarjetaEdit = {
                                    cardProdHor: false,
                                    cardProdVert: false,
                                    cardProdTra: false
                                };
                        
                                // Encender solo el switch seleccionado en el objeto
                                tipotipoTarjetaEditTarjeta[tipoABC] = elementABC.checked;
                        
                                // Mostrar el resultado en la consola
                                console.log("Tipo de tarjeta seleccionada:", tipoTarjetaEdit);
                            }
                        </script>

                    </div>
                    <div class="modal-footer" align="center">
                        <p>Para editar las imágenes y la categoría elimina el producto y cárgalo de nuevo.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal para ver la lista de pedidos de ventas y estadisticas -->
        <div class="modal fade" id="modalPedido5998" tabindex="-1" aria-labelledby="modalPedidoLabel" aria-hidden="true" style="z-index: 99999999999999999999 !important;">
            <div class="modal-dialog modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalPedidoLabel">Lista de productos de tu venta.</h5>
                        <button type="button" class="btn-close" onclick="cerrarModalPorId('modalPedido5998')" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" align="center">
                        <p id="dataPedido45698987"></p>
                        <!-- Encabezado del modal -->
                        <div id="modalBody8899">
                            <!-- Cuerpo del modal -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <br>
                    </div>
                </div>
            </div>
        </div>

        <!-- Inserta todos las promociones-->
        <div class="modal fade" id="promocionarProd" tabindex="-1" aria-labelledby="modalMenu1Label" aria-hidden="true" style="z-index: 9999;">
            <div id=cerrarModalPromos class="modal-dialog modal-xl modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalMenu1Label">Diseña la promoción y/o descuento que quieras. (Las promos no son editables).</h5>
                        <button type="button" class="btn-close" onclick="cerrarModalPorId('promocionarProd')"  data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div id="insertarProductoPromocional"></div>
                    </div>
                    <div class="modal-footer" hidden>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- // Modal confirma direccion -->
        <div class="modal fade" id="exampleModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1" >
            <script>
                    let direccion1 = {}
                    function guardarNuevaDireccionCpanel(direccion) {
                        const borrar = document.getElementById('exampleModalToggle'); // Asegúrate de que esté entre comillas
                        const borrar2 = document.getElementById('exampleModalToggle2'); 
                        if (borrar || borrar2) {
                            borrar.innerHTML = ""; // Limpia el contenido solo si el elemento existe
                            borrar2.innerHTML = ""; // Limpia el contenido solo si el elemento existe
                        }
                    console.log("Entra en la funcion guardarNuevaDireccionCpanel", direccion, direccion1)
                    // Realizar la solicitud Fetch
                    //const endpoints = JSON.parse(sessionStorage.getItem('endPointsIdTokens'));
                    //const dataOwner = JSON.parse(sessionStorage.getItem('dataOwner'));
                    const jwToken   = sessionStorage.getItem('jwTokenOwner');
                    direccion.idOwner = idOwner
                    fetch(`${endpoints[69]}`, { 
                        method: 'POST',
                        headers: { 
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${jwToken}`
                        },
                    body: JSON.stringify(direccion)
                    })
                    .then(async response => {
                        if (response.ok) {
                            return response.json();
                        } else {
                            // Capturar el mensaje de error del backend
                            const data = await response.json();
                            throw new Error(data.message);
                            // Recargar la página
                            setTimeout(async () => {
                                await actualizarData()
                            }, 2000); // 3000 milisegundos = 3 segundos
                        }
                    })
                    .then(data => {
                        // Verificar si la respuesta contiene un mensaje de éxito
                        if (data.success) {
                            mostrarExito(data.message); // Mostrar mensaje de éxito en mostrarExito
                            // Recargar la página
                            setTimeout(async () => {
                                await actualizarData()
                            }, 2000); // 3000 milisegundos = 3 segundos
                        } else {
                            mostrarAlerta(data.message); // Mostrar mensaje de error en mostrarAlerta
                            setTimeout(async () => {
                                await actualizarData()
                            }, 1000); // 3000 milisegundos = 3 segundos
                        }
                    })
                    .catch(error => {
                        console.error('Error en la solicitud Fetch:', error);
                        mostrarAlerta("Error al cambiar su dirección",error.message); // Mostrar mensaje de error del backend
                        setTimeout(async () => {
                            await actualizarData()
                        }, 1000); // 3000 milisegundos = 3 segundos
                    });

                }
            </script>
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalToggleLabel">Confirma tu dirección.</h5>
                        <button type="button" class="btn-close"  onclick="window.location.reload(true)"
                        aria-label="Close" id="CerrarDireccion"></button>
                    </div>
                    <!-- primera opcion de direccion -->
                    <div class="modal-body" id="direccionEnvio11">
                        <div id="" align="center">
                            <div id="direccionInfo">
                                <p id="pais">País: </p>
                                <p id="ciudad">Ciudad: </p>
                                <p id="calle">Calle: </p>
                                <p id="CP">Código Postal: </p>
                            </div>
                            <div id="map" style="height: 200px; width: 100%;"></div>
                            <h5>Atencion</h5>
                        </div>
                        <p>Si la dirección de envío es correcta, presiona "Confirmar" o </p>
                        <p>Busca en el mapa y has click en la nueva dirección y presiona "Confirmar" o </p>
                        <p>Presiona "Otra Dirección" y escríbela.</p>
                    </div>
                    <div class="modal-footer" id="cambiarBotonera">
                        <button class="btn btn-success" id="6546546544654654confirmarDireecion">Confirmar</button>
                        <button class="btn btn-primary" data-bs-target="#exampleModalToggle2" data-bs-toggle="modal" data-bs-dismiss="modal">Otra direccion</button>

                        <script>
                            let country1 = {}

                            document.addEventListener('DOMContentLoaded', async function() {
                                // Inicializa el popup
                                var popup = L.popup();
                                // Función para obtener la ubicación del usuario
                                async function obtenerUbicacion() {
                                    if (navigator.geolocation) {
                                        navigator.geolocation.getCurrentPosition(async function(position) {
                                            var latitud = position.coords.latitude;
                                            var longitud = position.coords.longitude;
                                            latitud1  = latitud
                                            longitud1 = longitud
                                            //console.log("Que dir de lat y lng encuentran?", latitud1, longitud1)
                                            await obtenerDireccion(latitud, longitud, await mostrarDireccion); // Obtiene información de dirección y muestra la dirección
                                        });
                                    } else {
                                        mostrarAlerta('Geolocalización no es compatible en este navegador.');
                                    }
                                }
                                // Función para obtener información de dirección basada en coordenadas utilizando la API de OpenCage

                                async function obtenerDireccion(latitud, longitud, callback) {
    let apiKey = basicData.data.ConfigsOne[0].apiKeyMap; // Reemplaza con tu propia API key
    var url = `https://api.opencagedata.com/geocode/v1/json?q=${latitud}+${longitud}&key=${apiKey}`;

    fetch(url)
        .then(response => response.json())
        .then(data => {
            if (data.results && data.results.length > 0) {
                var direccion = data.results[0].components;

                mostrarDireccion(direccion);

                // Aumentar el nivel de zoom para mejorar la precisión
                map.setView([latitud, longitud], 18); // Cambia a 18 para mayor detalle

                const dire = ("Calle: " + direccion.road + "<br>Número: " + direccion.house_number);
                userPolygon = L.polygon([
                    [latitud - 0.0001, longitud - 0.0001],
                ], {
                    color: 'blue',
                    fillColor: '#3388ff',
                    fillOpacity: 0.5
                }).addTo(map);

                var popup = L.popup()
                    .setLatLng([latitud, longitud])
                    .setContent(dire)
                    .openOn(map);

                userPolygon.bindPopup("Calle: " + direccion.road + "<br>Número: " + direccion.house_number).openPopup();
            } else {
                console.error('No se encontró ninguna dirección.');
            }
        })
        .catch(error => {
            console.error('Error al obtener la dirección:', error);
        });
}
                                // Función para mostrar información de dirección en los elementos <p>
                                async function mostrarDireccion(direccion) {

                                    if (direccion.country){ country1 = direccion.country}

                                    direccion1 = direccion

                                    if (direccion) {
                                        //console.log("DENTRO DE direccione encontro?", direccion)
                                        document.getElementById('pais').textContent = 'País: ' + (direccion.country || '(No disponible)');
                                        document.getElementById('ciudad').textContent = 'Ciudad:' + " " + (direccion.state) + " " + "Localidad"+ "  /   " +(direccion.state_district || '(No disponible)');
                                        document.getElementById('calle').textContent = 'Calle: ' + (direccion.road + "  " + 'Numero: ' + direccion.house_number || '(No disponible)');
                                        document.getElementById('CP').textContent = 'Código Postal: ' + (direccion.state_code + direccion.postcode || '(No disponible)');
                                    } else {
                                        document.getElementById('pais').textContent = 'País: (No disponible)';
                                        document.getElementById('ciudad').textContent = 'Ciudad: (No disponible)';
                                        document.getElementById('calle').textContent = 'Calle: (No disponible)';
                                        document.getElementById('CP').textContent = 'Código Postal: (No disponible)';
                                    }
                                }
                                // Función para manejar el evento de clic en el mapa
                                function onMapClick(e) {
                                    obtenerDireccion(e.latlng.lat, e.latlng.lng, function(direccion) {
                                        popup
                                            .setLatLng(e.latlng)
                                            .setContent("Dirección: " + direccion.road + direccion.house_number)
                                            .openOn(map);
                                    });
                                }
                                // Evento para escuchar el clic en el mapa
                                map.on('click', onMapClick);

                                // Llama a la función para obtener la ubicación del usuario al cargar la página
                                await obtenerUbicacion();
                            }); 
                                // Obtener referencia al botón de confirmación
                                const confirmButton1 = document.getElementById("6546546544654654confirmarDireecion");
                                // Agregar event listener al botón de confirmación
                                confirmButton1.addEventListener("click", async function(event) {
                                    // Evitar que el formulario se envíe automáticamente
                                    event.preventDefault();
                                    // Obtener los valores de los campos del formulario
                                    const pais         = direccion1.country
                                    const estado       = direccion1.state
                                    const localidad    = direccion1.state_district
                                    const calle        = direccion1.road
                                    const numeroPuerta = direccion1.house_number
                                    const CP           = direccion1.state_code + direccion1.postcode || "S/N"
                                    const lat          = latitud1
                                    const lng          = longitud1
                                    
                                    // Verificar si los datos del formulario y del sessionStorage existen
                                    const direccion = {lat:lat, lng:lng, pais:pais, estado:estado, localidad:localidad, calle:calle, numeroPuerta:numeroPuerta, CP:CP}
                                    // funcion que sirve para agregar direcciones
                                    console.log('//Entro a guardar nueva direccion', direccion);
                                    await guardarNuevaDireccionCpanel(direccion)
                                });
                        </script>
                    </div>
                </div>
            </div>
        </div>
            <!-- segunda opcion de direccion -->
            <div class="modal fade" id="exampleModalToggle2" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2" tabindex="-1">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalToggleLabel2">Confirma dirección de envío</h5>
                            <button type="button" class="btn-close" onclick="cerrarModalPorId('exampleModalToggle2')"    data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body" >
                            <form class="row g-3">
                                <input type="text" id="lat" name="lat" hidden>
                                <input type="text" id="lng" name="lng" hidden>
                                <div class="col-md-6">
                                    <label style="color: black !important" for="validationDefault03" class="form-label">Estado/Provincia</label>
                                    <input name="estado" id="estado" style="color: black !important" type="text" class="form-control" id="validationDefault01" required>
                                </div>
                                <div class="col-md-6">
                                    <label style="color: black !important" for="validationDefault03" class="form-label">Localidad/Ciudad</label>
                                    <input name="localidad" id="localidad" style="color: black !important" type="text" class="form-control" id="validationDefault02" required>
                                </div>
                                <div class="col-md-6">
                                    <label style="color: black !important" for="validationDefault03" class="form-label">Calle</label>
                                    <input name="calle" id="calle2" style="color: black !important" type="text" class="form-control" id="validationDefault02" required>
                                </div>
                                <div class="col-md-6">
                                    <label style="color: black !important" for="numeroPuerta" class="form-label">Número de puerta</label>
                                    <input name="numeroPuerta" id="numeroPuerta" style="color: black !important" type="text" class="form-control" required>
                                    <small id="errorNumeroPuerta" style="color: red; display: none;">Por favor, ingrese solo números.</small>
                                </div>
                                <script>
                                    document.getElementById('numeroPuerta').addEventListener('input', function () {
                                        const input = this.value;
                                        const errorLabel = document.getElementById('errorNumeroPuerta');
                                
                                        // Verificar si el valor contiene solo números
                                        if (/^\d*$/.test(input)) {
                                            errorLabel.style.display = 'none';  // Ocultar el mensaje de error si solo hay números
                                        } else {
                                            errorLabel.style.display = 'block';  // Mostrar el mensaje de error si hay caracteres no numéricos
                                        }
                                    });
                                </script>
                                
                                <div class="col-md-3">
                                    <label for="validationDefault05" class="form-label" style="color: black !important">C.P.</label>
                                    <input name="CP" id="CP2" type="text" class="form-control" id="validationDefault05" required>
                                </div>
                                <div class="mb-3">
                                    <label for="validationTextarea" class="form-label" style="color: black !important">Observaciones</label>
                                    <textarea name="obsDire" id="obsDire" class="form-control is-invalid" id="validationTextarea"></textarea>
                                    <div class="invalid-feedback" style="color: black !important">
                                        Describa una referencia para llegar a su domicilio, ejemplo casa blanca, portón negro, NO anda el timbre, llamar cuando estés abajo, al lado de...
                                    </div>
                                </div>
                                <button id="btnNuevaDir5698" class="btn-block btn-primary" style="">Ver en el mapa</button>
                            </form>
                            <br>
                            <div id="map2" style="height: 200px; width: 100%;"></div>
                            <!-- escript que dibuja ene l  mapa la nueva direccion -->
                            <script>
                                let newLtd = ""
                                let newLng = ""
                                let map22 = false;
                                let mapi2;
                                // Obtener referencia al botón
                                const btnNuevaDir = document.getElementById("btnNuevaDir5698");
                                // Agregar event listener al botón
                                btnNuevaDir.addEventListener("click", function(event) {
                                    // Evitar que el formulario se envíe automáticamente
                                    event.preventDefault();
                            
                                    // Obtener los valores de los campos del formulario
                                    const state          = document.getElementById("estado").value;
                                    const state_district = document.getElementById("localidad").value;
                                    const road           = document.getElementById("calle2").value;
                                    const house_number   = document.getElementById("numeroPuerta").value;
                                    const postcode       = document.getElementById("CP2").value;
                                    const obsDire        = document.getElementById("obsDire").value;
                                    // Crear la dirección concatenando los valores
                                    const direccion = `${road}, ${house_number}, ${state_district}, ${state}, ${postcode}, ${country1} `;
                                    //console.error('Que nueva direccion ARMO?',direccion);
                                    // Llamar a la función para obtener la dirección
                                    obtenerDireccion(direccion);
                                    function obtenerDireccion(direccion) {
                                        var apiKey = basicData.data.ConfigsOne[0].apiKeyMap; // Recuerda reemplazar con tu propia API key
                                        const url = `https://api.opencagedata.com/geocode/v1/json?q=${encodeURIComponent(direccion)}&key=${apiKey}`;
                                        fetch(url)
                                            .then(response => response.json())
                                            .then(data => {
                                                if (data.results && data.results.length > 0) {
                                                    const latitud  = data.results[0].geometry.lat;
                                                    const longitud = data.results[0].geometry.lng;
                                                    newLng = longitud
                                                    newLtd = latitud
                                                    const direccionCompleta = data.results[0].formatted;

                                                    mostrarDireccion(latitud, longitud, direccionCompleta);

                                                    console.error('Que nueva direccion encontró?',latitud, longitud, direccionCompleta);
                                                } else {
                                                    console.error('No se encontró ninguna dirección.');
                                                }
                                            })
                                            .catch(error => {
                                                console.error('Error al obtener la dirección:', error);
                                            });
                                    }
                                    function mostrarDireccion(latitud, longitud, direccionCompleta) {
                                        // Destruir el mapa existente si está inicializado
                                        if (map22) {
                                            console.log("Destruyo el mapa")
                                            mapi2.off();
                                            mapi2.remove();
                                        }
                                        // Mostrar y poner data de dirección en los campos de formulario
                                        document.getElementsByName("lat").value          = latitud;
                                        document.getElementsByName("lng").value          = longitud;
                                        document.getElementsByName("estado").value       = direccionCompleta.state;
                                        document.getElementsByName("localidad").value    = direccionCompleta.state_district;
                                        document.getElementsByName("calle").value        = direccionCompleta.road;
                                        document.getElementsByName("numeroPuerta").value = direccionCompleta.house_number;
                                        document.getElementsByName("CP").value           = direccionCompleta.state_code+direccionCompleta.postcode || "S/D";

                                        // Mostrar dirección en el mapa
                                        mapi2 = L.map('map2').setView([latitud, longitud], 16);
                                        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                                            attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">TBS-IT</a>'
                                        }).addTo(mapi2);
                                
                                        L.marker([latitud, longitud]).addTo(mapi2)
                                            .bindPopup(direccionCompleta)
                                            .openPopup();
                                        map22 = true;
                                    }
                                });
                            </script>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-success" id="confirmarGuardarDireccion32145658974">Confirmar</button>
                            <button class="btn btn-primary" onclick="window.location.reload(true)" >Volver</button>
                        
                            <script>
                                    // Obtener referencia al botón de confirmación
                                    const confirmButton = document.getElementById("confirmarGuardarDireccion32145658974");
                                    // Agregar event listener al botón de confirmación
                                    confirmButton.addEventListener("click", async function(event) {
                                        console.log("Botón encontrado correctamente:", confirmButton);
                                        // Evitar que el formulario se envíe automáticamente
                                        event.preventDefault();
                    
                                // Obtener los valores de los campos del formulario

                                const estado       = document.getElementById("estado").value;
                                const localidad    = document.getElementById("localidad").value;
                                const calle        = document.getElementById("calle2").value;
                                const numeroPuerta = document.getElementById("numeroPuerta").value || 0;
                                const CP           = document.getElementById("CP2").value;
                                const obsDire      = document.getElementById("obsDire").value;
                                const lat          = newLtd
                                const lng          = newLng

                                const direccion = {obsDire,lat, lng, pais:country1, estado, localidad, calle, numeroPuerta, CP}; // Uso de shorthand para asignar propiedades
                                //console.log('Entro a guardar nueva direccion', direccion);
                                // Aquí envía los datos al backend para confirmar la compra
                                await guardarNuevaDireccionCpanel(direccion)
                                });
                            </script>
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>

        <!-- Instrucicones de uso de los update de email y celus-->
        <div class="modal fade" id="instruccionesUdpated" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel" style="text-align: center !important;">Instrucciones de uso de los Up-Date</h5>
                    <button type="button" class="btn-close" onclick="cerrarModalPorId('instruccionesUdpated')" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <style>
                    .modal-body ul {
                        list-style-type: none;
                        padding-left: 0;
                        text-align: left;
                    }
                    
                    .modal-body li {
                        margin-bottom: 10px;
                    }
                </style>
                    <h3>Instrucciones</h3>
                    <p>
                        Para actualizar tanto los números celulares como los correos electrónicos es muy simple:
                    </p>
                    <ul>
                        <li><strong>Para actualizar:</strong> Elige el número o correo electrónico que deseas actualizar, abajo coloca el número o correo electrónico a actualizar y oprime el botón.</li>
                        <li><strong>Para agregar:</strong> Elige la opción "Agregar nuevo celular" o "Agregar nuevo correo" si fuera el caso, y abajo coloca el número celular o correo electrónico, y aprieta el botón.</li>
                        <li><strong>Para eliminar:</strong> Elige el número o correo electrónico a eliminar. Abajo, no pongas nada y oprime el botón.</li>
                    </ul>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" hidden>Close</button>
                    <button type="button" class="btn btn-primary" hidden>Volver</button>
                </div>
                </div>
            </div>
        </div>

    </body>

    <!-- aqui van los datos de las alertas -->
    <div id="informacionPlus" style="z-index: 99999 !important; position: absolute;"></div>
	<div id="muestraAlerta"   style="z-index: 99999 !important; position: absolute;"></div>
	<div id="muestraExito"    style="z-index: 9999999999 !important; position: absolute;" data-bs-backdrop="static"></div>
	<div id="exitoVenta"      style="z-index: 99999 !important; position: absolute;" data-bs-backdrop="static"></div>
	<div id="opciones"        style="z-index: 99999 !important; position: absolute;" data-bs-backdrop="static"></div>
	<div id="pagoWallet"      style="z-index: 99999 !important; position: absolute;" data-bs-backdrop="static"></div>

    <!-- //Modal de esperando los datos -->
	<div class="modal fade data-bs-backdrop=" id="loadingModal" tabindex="-1" aria-labelledby="loadingModalLabel" aria-hidden="true" style="z-index:999999999999 !important;background-color: lightgray; opacity: 0.8;">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-body text-center" style="">
					<div class="spinner-border text-primary" role="status">
					<span class="visually-hidden">Loading...</span>
					</div>
					<h5 style=""><strong> Procesando informacion... </strong></h5>
				</div>
			</div>
		</div>
	</div>
    
    <!-- modal de marketin -->
    <div class="modal fade" id="modalMenu5" tabindex="-1" aria-labelledby="modalMenu5Label" aria-hidden="true"> </div>

    <!-- ckeditor -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const textareas = document.querySelectorAll('ckeditor');
            //const textareas = document.querySelectorAll('textarea.ckeditor');
            // Crear una instancia de CKEditor para cada textarea
            textareas.forEach(textarea => {
                ClassicEditor.create(textarea)
                    .then(editor => {
                        // Almacenar la instancia del editor usando el id del textarea como clave
                        editorInstances[textarea.id] = editor;
                        //console.log('Editor creado para:', textarea.id);
                    })
                    .catch(error => {
                        console.error('Error al inicializar CKEditor:', error);
                    });
            });
        });
        
    </script>

    <!-- Modal de pago Membresía Premium Cpanel MP-->
    <div class="modal fade" id="signupModalCPanelYZ123" tabindex="-1" aria-labelledby="signupModalLabelXYZ123" aria-hidden="true" style="z-index: 9998 !important;">
        <!-- modal del pago del login membresua premium -->
        <div class="modal-dialog modal-lg" align="center" >
            <div class="modal-content p-4" align="center">
                <div class="modal-header">
                    <h5 class="modal-title" id="signupModalLabelXYZ123">Abona Membresía Premium</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" onclick="location.reload();"></button>
                </div>
                <fieldset class="card-container p-1" id="infoAPagar"></fieldset>
                <div id="shopping-cart"></div>
                <div id="statusScreenBrick_container"></div>
                <div id="payment"></div>
                <div id="paymentBrick_container"></div>
                <div id="walletBrick_container"></div>
                <div id="statusScreen"></div>
                
                <div id="preciosModalCpanel"></div>
                <div id="wallet_container"></div>
                <div id="opcionesDePagoUpGrade">
                    <button class="btn btn-primary" id="signupFormCpanelWallet">
                        Pagar con Mercado Libre, T.C. o T. Debito.
                    </button>
                    <br><br>
                    <button class="btn btn-primary" id="PagoManualUPGrade">
                        Pago Manual.
                    </button>
                </div>
                <br>
                <div class="modal-footer d-flex flex-column align-items-center">
                    <p>Si no usas MP puedes abonar desde cualquier billetera con el alias: <strong>usatiendafacil.com.mp</strong> y enviar el comprobante al <strong> +054 9 11 6140 9440 </strong>.</p>
                </div>
            </div>
        </div>
        <script>
            const urlCpanel = window.location.href; // Obtener la URL completa actual
            sessionStorage.setItem("urlCpanel", JSON.stringify(urlCpanel)); // Guardar en sessionStorage
            //console.log("Que urlCpanel encontro??????????????????????????????????????", urlCpanel)

            let dataMP = {}
            // const dataBasic = JSON.parse(sessionStorage.getItem('datosBasicos'));
            const idEnpointCheq = basicData.data.endpointTokensArray2
            if (!basicData) {
                reloadPage()
                //location.reload();
            }
            // Se agrega botones de pago Wallet y con tC
            document.getElementById('signupFormCpanelWallet').addEventListener('click', async function (e) {
                console.log("*********Apreto el boton de pagar con wallet desde Cpanel")
                mostrarModalLoading()
                e.preventDefault();
                //collectData()
                await CpanelmpWallet();
            });
            // Pago Manual UPGRADE CPANEL
            document.getElementById('PagoManualUPGrade').addEventListener('click', function () {
                const dataPayOSes = JSON.parse(sessionStorage.getItem('dataPayOSes'));
                console.log("Entro al pago manual dataPayOSes", dataPayOSes)
                const modalBody = document.getElementById('opcionesDePagoUpGrade');
                //ocultarModalLoading()
                modalBody.innerHTML = `
    <div class="mb-3 text-center">
    <h2>Pago Manual<h2>
    <h5 style="color:green">
        CVU Mercado Pago: usatiendafacil.com.mp <br>
        CBU Bco. Galicia: 16546465146546165456465465465
    </h5>
    </div>
    <form id="manualPaymentForm">
    <div class="mb-3">
        <label for="paymentMethod" class="form-label">Método de Pago</label>
        <select class="form-select" id="paymentMethodUG" required>
            <option value="" disabled selected>Seleccionar método</option>
            <option value="CVU Mercado Pago">CVU Mercado Pago</option>
            <option value="CBU Galicia">CBU Galicia</option>
        </select>
    </div>
    <div class="mb-3">
        <label for="ticketNumber" class="form-label">Número de Ticket</label>
        <input type="text" class="form-control" id="ticketNumberUG" placeholder="Número de ticket" required>
    </div>
    <div class="mb-3">
        <label for="extraData" class="form-label">Datos Extras y Observaciones</label>
        <textarea class="form-control" id="extraDataUG" rows="3" placeholder="Escribe tus observaciones aquí..." required></textarea>
    </div>
    <div class="mb-3">
        <label for="receiptImage" class="form-label">Subir Comprobante</label>
        <input type="file" class="form-control" id="receiptImageUG" accept="image/*" required>
        <small class="form-text text-muted">La imagen debe ser menor a 1MB.</small>
    </div>
    <button type="button" id="EnviaDataPAgoManualUpgrade" class="btn btn-primary w-100 m-1">
    <i class="bi bi-send-fill"></i> Enviar Datos
    </button>

    <button type="button" id="botonVolver" class="btn btn-secondary w-100 m-1" onclick="location.reload()">
    <i class="bi bi-arrow-left"></i> Volver
    </button>


    </form>
    `;
                document.getElementById('EnviaDataPAgoManualUpgrade').addEventListener('click', async function (e) {
    e.preventDefault();
    // Obtener los valores de los campos
    const paymentMethod = document.getElementById('paymentMethodUG').value;
    const ticketNumber  = document.getElementById('ticketNumberUG').value;
    const extraData     = document.getElementById('extraDataUG').value;
    const receiptImage  = document.getElementById('receiptImageUG');
    // Validar que todos los campos estén completos
    if (!paymentMethod || !ticketNumber || !receiptImage.files[0]) {
    mostrarAlerta('Todos los campos deben ser completados incluyendo la imagen del ticket.');
    // Recargar la página después de 3 segundos
    setTimeout(async () => {
        await actualizarData(urlCpanel);
    }, 3000);
    }
    // Validar tamaño de la imagen
    if (receiptImage.files[0].size > 1 * 1024 * 1024) { // 1MB en bytes
    mostrarAlerta('La imagen debe ser menor a 1MB.');
    // Recargar la página después de 3 segundos
    setTimeout(async () => {
        await actualizarData(urlCpanel);
    }, 3000);
    }
    var ownerDataX = JSON.parse(sessionStorage.getItem('dataOwner'))
    const {nombre, apellido, email, urlServer, cantContratosMemRealizados, tipoMembresia, fechaVencMem } =  ownerDataX
    const ownerID = ownerDataX._id
    const cantProdQTiene = ownerDataX.TotalProdCOntratados
    const dataOwner5 = {nombre, apellido, email, urlServer, ownerID, cantProdQTiene, cantContratosMemRealizados,tipoMembresia }
    // Crear un objeto FormData para enviar la imagen y los datos del formulario
    const formData = new FormData();
    formData.append('paymentMethod', paymentMethod);
    formData.append('ticketNumber', ticketNumber);
    formData.append('extraData', extraData);
    formData.append('dataOwner', JSON.stringify(dataOwner5));
    formData.append('dataPay', JSON.stringify(dataPayOSes));
    formData.append('urlServer', JSON.stringify(urlServer));
    formData.append('fechaVencMem', JSON.stringify(fechaVencMem));
    // Agregar la imagen al FormData
    formData.append('imgTicket', receiptImage.files[0]);

    //console.log("111111111Imagen seleccionada:", receiptImage.files[0]);
    //console.log("222222222FormData antes del envío:", formData);

    try {
    const jwToken = dataBasic.data.jwToken
    const idEnpointCheq142 = idEnpointCheq[142]
    const response = await fetch(`${idEnpointCheq142}`, {
        method: 'POST',
        body: formData,
        headers: {
            'Authorization': `Bearer ${jwToken}`
        }
    });

    if (!response.ok) {
        // Obtener los datos de error del backend
        const errorData = await response.json();
        // Si el backend no envía un mensaje, usa un mensaje por defecto
        const errorMessage = errorData.message || 'Error en el envío de datos.';
        throw new Error(errorMessage);
    }

    // Convierte la respuesta a JSON
    const result = await response.json();
    //console.log('Resultado del envío:', result);
    if (tipoMembresia == "basic") {
        mostrarExito(`
            ¡Felicitaciones! <br><br> Has actualizado tu membresía a Premium.
            <br><br>
            Nos pondremos en contacto contigo en un plazo de 48 horas hábiles para habilitar tu dominio personalizado.
            <br><br>
            Recibirás un correo electrónico con la confirmación de tu actualización y los próximos pasos a seguir.
            <br><br>
            Si no lo ves en tu bandeja de entrada, te recomendamos revisar la carpeta de spam y marcar el correo como seguro.
        `);
    } else {
        mostrarExito(`
            ¡Felicitaciones! <br><br> Has aumentado los productos de tu membresía Premium.
            <br><br>
            Recibirás un correo electrónico con la confirmación de tu transaccion.
            <br><br>
            Si no lo ves en tu bandeja de entrada, te recomendamos revisar la carpeta de spam y marcar el correo como seguro.
        `);
    }
        // Recargar la página después de 3 segundos
        setTimeout(async () => {
            await actualizarData(urlCpanel);
        }, 3000);

        } catch (error) {
            // Mostrar el mensaje de error que proviene del backend
            console.error('Error:', error.message);
            mostrarAlerta(error.message); // Aquí se muestra el mensaje de error en el frontend
            // Recargar la página después de 3 segundos
            setTimeout(async () => {
                await actualizarData(urlCpanel);
            }, 3000);
        }
    });
            });
    </script>

    </div>

    <!-- CDN de Bootstrap JS y Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-beta1/js/bootstrap.min.js"></script>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>

    <script src="/ownerFunctions/cPanelFront.js"></script>
    <script src="/alertas.js"></script>
    <script src="/landingPageFunctions/LPmpWallet.js"></script>
    <script src="/landingPageFunctions/LPmpTCDEf.js"></script>
    <script src="/reiniciar.js"></script>

</html>
